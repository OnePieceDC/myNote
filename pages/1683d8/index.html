<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>权限管理之文件权限 | DC&#39;s blog</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="/fonts/iconfont.css">
    <meta name="description" content="人类终将毁灭,世界属于三体!">
    <meta name="keywords" content="DC的个人博客.">
    
    <link rel="preload" href="/assets/css/0.styles.66b92039.css" as="style"><link rel="preload" href="/assets/js/app.ac54adc6.js" as="script"><link rel="preload" href="/assets/js/4.7ddc74e3.js" as="script"><link rel="preload" href="/assets/js/1.a0c4ff1b.js" as="script"><link rel="preload" href="/assets/js/3.8b03321d.js" as="script"><link rel="preload" href="/assets/js/164.5d8b2cb7.js" as="script"><link rel="preload" href="/assets/js/104.cae2d944.js" as="script"><link rel="preload" href="/assets/js/184.46eabf07.js" as="script"><link rel="prefetch" href="/assets/js/10.a91ae011.js"><link rel="prefetch" href="/assets/js/100.2e8ea472.js"><link rel="prefetch" href="/assets/js/101.46f57a02.js"><link rel="prefetch" href="/assets/js/102.f51bcd80.js"><link rel="prefetch" href="/assets/js/103.3f003e0e.js"><link rel="prefetch" href="/assets/js/105.6c6ebc28.js"><link rel="prefetch" href="/assets/js/106.47dc8889.js"><link rel="prefetch" href="/assets/js/107.6b5602b4.js"><link rel="prefetch" href="/assets/js/108.46f0c21d.js"><link rel="prefetch" href="/assets/js/109.0f1168a5.js"><link rel="prefetch" href="/assets/js/11.e6a94228.js"><link rel="prefetch" href="/assets/js/110.6a961498.js"><link rel="prefetch" href="/assets/js/111.c6f27c88.js"><link rel="prefetch" href="/assets/js/112.9ee3d3bb.js"><link rel="prefetch" href="/assets/js/113.82b72aa0.js"><link rel="prefetch" href="/assets/js/114.7487460e.js"><link rel="prefetch" href="/assets/js/115.cd079d0a.js"><link rel="prefetch" href="/assets/js/116.b6b829eb.js"><link rel="prefetch" href="/assets/js/117.89d9336c.js"><link rel="prefetch" href="/assets/js/118.467c4437.js"><link rel="prefetch" href="/assets/js/119.c4b2ac40.js"><link rel="prefetch" href="/assets/js/12.9d3501e4.js"><link rel="prefetch" href="/assets/js/120.5ff31c09.js"><link rel="prefetch" href="/assets/js/121.2e59c3a5.js"><link rel="prefetch" href="/assets/js/122.a66096cf.js"><link rel="prefetch" href="/assets/js/123.4885ba5f.js"><link rel="prefetch" href="/assets/js/124.cacc66be.js"><link rel="prefetch" href="/assets/js/125.dc5b30fe.js"><link rel="prefetch" href="/assets/js/126.4e21eb5e.js"><link rel="prefetch" href="/assets/js/127.cb36a9bf.js"><link rel="prefetch" href="/assets/js/128.ce38358e.js"><link rel="prefetch" href="/assets/js/129.e5f414eb.js"><link rel="prefetch" href="/assets/js/13.ca017a68.js"><link rel="prefetch" href="/assets/js/130.17b597f0.js"><link rel="prefetch" href="/assets/js/131.e1ded2dc.js"><link rel="prefetch" href="/assets/js/132.aae1c627.js"><link rel="prefetch" href="/assets/js/133.73cecdb3.js"><link rel="prefetch" href="/assets/js/134.80cf38a0.js"><link rel="prefetch" href="/assets/js/135.735ed588.js"><link rel="prefetch" href="/assets/js/136.91f8db08.js"><link rel="prefetch" href="/assets/js/137.d6fb8bda.js"><link rel="prefetch" href="/assets/js/138.75cafe73.js"><link rel="prefetch" href="/assets/js/139.b01bf0db.js"><link rel="prefetch" href="/assets/js/14.ee2605b5.js"><link rel="prefetch" href="/assets/js/140.ff0a7911.js"><link rel="prefetch" href="/assets/js/141.c69e7f54.js"><link rel="prefetch" href="/assets/js/142.997b03ac.js"><link rel="prefetch" href="/assets/js/143.e40faea8.js"><link rel="prefetch" href="/assets/js/144.369f23e5.js"><link rel="prefetch" href="/assets/js/145.1268424d.js"><link rel="prefetch" href="/assets/js/146.94c65c4a.js"><link rel="prefetch" href="/assets/js/147.05fe6a36.js"><link rel="prefetch" href="/assets/js/148.327cc29d.js"><link rel="prefetch" href="/assets/js/149.90068676.js"><link rel="prefetch" href="/assets/js/15.42e0a0e4.js"><link rel="prefetch" href="/assets/js/150.b4b780bb.js"><link rel="prefetch" href="/assets/js/151.b4611012.js"><link rel="prefetch" href="/assets/js/152.4d2c8246.js"><link rel="prefetch" href="/assets/js/153.f32dfa58.js"><link rel="prefetch" href="/assets/js/154.b79a78fb.js"><link rel="prefetch" href="/assets/js/155.6ad2865c.js"><link rel="prefetch" href="/assets/js/156.fd49a1af.js"><link rel="prefetch" href="/assets/js/157.55113800.js"><link rel="prefetch" href="/assets/js/158.af321bc9.js"><link rel="prefetch" href="/assets/js/159.37d9c659.js"><link rel="prefetch" href="/assets/js/16.007f45b3.js"><link rel="prefetch" href="/assets/js/160.7a3b5a9a.js"><link rel="prefetch" href="/assets/js/161.fc1fbea8.js"><link rel="prefetch" href="/assets/js/162.2f8d3d1c.js"><link rel="prefetch" href="/assets/js/163.aa889940.js"><link rel="prefetch" href="/assets/js/165.44d4a9b5.js"><link rel="prefetch" href="/assets/js/166.c1b4c4d4.js"><link rel="prefetch" href="/assets/js/167.0c39929e.js"><link rel="prefetch" href="/assets/js/168.fede035a.js"><link rel="prefetch" href="/assets/js/169.ff940d50.js"><link rel="prefetch" href="/assets/js/17.7395c644.js"><link rel="prefetch" href="/assets/js/170.b6fcb3bf.js"><link rel="prefetch" href="/assets/js/171.2b927a7c.js"><link rel="prefetch" href="/assets/js/172.b07a90a1.js"><link rel="prefetch" href="/assets/js/173.367352bf.js"><link rel="prefetch" href="/assets/js/174.4ea4e20f.js"><link rel="prefetch" href="/assets/js/175.d9679b61.js"><link rel="prefetch" href="/assets/js/176.f7804143.js"><link rel="prefetch" href="/assets/js/177.c5d1e680.js"><link rel="prefetch" href="/assets/js/178.808293fa.js"><link rel="prefetch" href="/assets/js/179.2acf6b3c.js"><link rel="prefetch" href="/assets/js/18.46f9153d.js"><link rel="prefetch" href="/assets/js/180.ddf3ecf7.js"><link rel="prefetch" href="/assets/js/181.4da0855c.js"><link rel="prefetch" href="/assets/js/182.591d135a.js"><link rel="prefetch" href="/assets/js/183.9d08f9fe.js"><link rel="prefetch" href="/assets/js/185.ee1c8428.js"><link rel="prefetch" href="/assets/js/186.c7b19133.js"><link rel="prefetch" href="/assets/js/187.52945990.js"><link rel="prefetch" href="/assets/js/188.a1d395c5.js"><link rel="prefetch" href="/assets/js/189.5b66165e.js"><link rel="prefetch" href="/assets/js/19.2db19edb.js"><link rel="prefetch" href="/assets/js/190.265a75de.js"><link rel="prefetch" href="/assets/js/191.b4c65143.js"><link rel="prefetch" href="/assets/js/192.cc4d4115.js"><link rel="prefetch" href="/assets/js/193.fa02ecc5.js"><link rel="prefetch" href="/assets/js/194.b0c9ad53.js"><link rel="prefetch" href="/assets/js/195.eda8cd34.js"><link rel="prefetch" href="/assets/js/196.cbae4dc6.js"><link rel="prefetch" href="/assets/js/197.693b1b85.js"><link rel="prefetch" href="/assets/js/198.8213665b.js"><link rel="prefetch" href="/assets/js/199.ddf0036d.js"><link rel="prefetch" href="/assets/js/2.4c15b693.js"><link rel="prefetch" href="/assets/js/20.6742e8ae.js"><link rel="prefetch" href="/assets/js/200.340df508.js"><link rel="prefetch" href="/assets/js/201.7431c15b.js"><link rel="prefetch" href="/assets/js/202.217b2b38.js"><link rel="prefetch" href="/assets/js/203.06c6a93d.js"><link rel="prefetch" href="/assets/js/204.a068a898.js"><link rel="prefetch" href="/assets/js/205.9361d3f5.js"><link rel="prefetch" href="/assets/js/206.886beca0.js"><link rel="prefetch" href="/assets/js/207.2278bda8.js"><link rel="prefetch" href="/assets/js/208.db0acc0d.js"><link rel="prefetch" href="/assets/js/209.0e05b204.js"><link rel="prefetch" href="/assets/js/21.fd552a4e.js"><link rel="prefetch" href="/assets/js/210.4c730041.js"><link rel="prefetch" href="/assets/js/211.417dbee1.js"><link rel="prefetch" href="/assets/js/212.eef4f4a3.js"><link rel="prefetch" href="/assets/js/213.ab742b0b.js"><link rel="prefetch" href="/assets/js/214.a57228de.js"><link rel="prefetch" href="/assets/js/215.37f52459.js"><link rel="prefetch" href="/assets/js/216.2f110f92.js"><link rel="prefetch" href="/assets/js/217.09654311.js"><link rel="prefetch" href="/assets/js/218.a7568950.js"><link rel="prefetch" href="/assets/js/219.628ee193.js"><link rel="prefetch" href="/assets/js/22.465a76d2.js"><link rel="prefetch" href="/assets/js/220.c5df9186.js"><link rel="prefetch" href="/assets/js/221.101ddb09.js"><link rel="prefetch" href="/assets/js/222.db210e3c.js"><link rel="prefetch" href="/assets/js/223.429cbf14.js"><link rel="prefetch" href="/assets/js/224.aa002868.js"><link rel="prefetch" href="/assets/js/225.79a40017.js"><link rel="prefetch" href="/assets/js/226.3e08228b.js"><link rel="prefetch" href="/assets/js/227.a09dd4b4.js"><link rel="prefetch" href="/assets/js/228.f930c492.js"><link rel="prefetch" href="/assets/js/229.f639a9e4.js"><link rel="prefetch" href="/assets/js/23.df6831af.js"><link rel="prefetch" href="/assets/js/230.e8ac7aad.js"><link rel="prefetch" href="/assets/js/231.99501214.js"><link rel="prefetch" href="/assets/js/232.e2932792.js"><link rel="prefetch" href="/assets/js/233.43dfa689.js"><link rel="prefetch" href="/assets/js/234.7951f9c4.js"><link rel="prefetch" href="/assets/js/235.1dc96b6c.js"><link rel="prefetch" href="/assets/js/236.40b8d4e4.js"><link rel="prefetch" href="/assets/js/237.75a692de.js"><link rel="prefetch" href="/assets/js/238.cc9d9ac1.js"><link rel="prefetch" href="/assets/js/239.4616a566.js"><link rel="prefetch" href="/assets/js/24.b68dc734.js"><link rel="prefetch" href="/assets/js/240.dd825147.js"><link rel="prefetch" href="/assets/js/241.85e3219b.js"><link rel="prefetch" href="/assets/js/242.bf4123c4.js"><link rel="prefetch" href="/assets/js/243.ce68f4f0.js"><link rel="prefetch" href="/assets/js/244.e2598d4d.js"><link rel="prefetch" href="/assets/js/245.2c696827.js"><link rel="prefetch" href="/assets/js/246.2c44a497.js"><link rel="prefetch" href="/assets/js/247.02405fce.js"><link rel="prefetch" href="/assets/js/248.6727bdf6.js"><link rel="prefetch" href="/assets/js/249.4901f575.js"><link rel="prefetch" href="/assets/js/25.d639c65c.js"><link rel="prefetch" href="/assets/js/250.c922c9ea.js"><link rel="prefetch" href="/assets/js/251.b1350ead.js"><link rel="prefetch" href="/assets/js/252.8295c5ea.js"><link rel="prefetch" href="/assets/js/253.b0a9ba20.js"><link rel="prefetch" href="/assets/js/254.d208b848.js"><link rel="prefetch" href="/assets/js/255.2cfb6ad3.js"><link rel="prefetch" href="/assets/js/256.e7687a81.js"><link rel="prefetch" href="/assets/js/257.db329d54.js"><link rel="prefetch" href="/assets/js/258.be75b1f9.js"><link rel="prefetch" href="/assets/js/259.67500f7e.js"><link rel="prefetch" href="/assets/js/26.9db429a9.js"><link rel="prefetch" href="/assets/js/260.73609cfa.js"><link rel="prefetch" href="/assets/js/261.22fc7c08.js"><link rel="prefetch" href="/assets/js/262.2c620ccd.js"><link rel="prefetch" href="/assets/js/263.e0ce1454.js"><link rel="prefetch" href="/assets/js/264.7fe82318.js"><link rel="prefetch" href="/assets/js/265.537d06c5.js"><link rel="prefetch" href="/assets/js/266.901695a7.js"><link rel="prefetch" href="/assets/js/267.8eb24590.js"><link rel="prefetch" href="/assets/js/268.a21e44dc.js"><link rel="prefetch" href="/assets/js/269.33e6ce5d.js"><link rel="prefetch" href="/assets/js/27.2296e284.js"><link rel="prefetch" href="/assets/js/270.31507ac3.js"><link rel="prefetch" href="/assets/js/271.b9406b42.js"><link rel="prefetch" href="/assets/js/272.0acaba6f.js"><link rel="prefetch" href="/assets/js/273.c2e359b0.js"><link rel="prefetch" href="/assets/js/274.a80428a6.js"><link rel="prefetch" href="/assets/js/28.7e4f4dc1.js"><link rel="prefetch" href="/assets/js/29.ba75f79a.js"><link rel="prefetch" href="/assets/js/30.16cd3622.js"><link rel="prefetch" href="/assets/js/31.54ed5bc1.js"><link rel="prefetch" href="/assets/js/32.b2fbba6a.js"><link rel="prefetch" href="/assets/js/33.f7ff0107.js"><link rel="prefetch" href="/assets/js/34.4b2cea7d.js"><link rel="prefetch" href="/assets/js/35.1159e74c.js"><link rel="prefetch" href="/assets/js/36.0b6296f3.js"><link rel="prefetch" href="/assets/js/37.fc67879e.js"><link rel="prefetch" href="/assets/js/38.637afaf8.js"><link rel="prefetch" href="/assets/js/39.748a78f3.js"><link rel="prefetch" href="/assets/js/40.4fede9bb.js"><link rel="prefetch" href="/assets/js/41.c7f0b087.js"><link rel="prefetch" href="/assets/js/42.5b1a487d.js"><link rel="prefetch" href="/assets/js/43.59275b93.js"><link rel="prefetch" href="/assets/js/44.b18a4c94.js"><link rel="prefetch" href="/assets/js/45.bc8f7cb3.js"><link rel="prefetch" href="/assets/js/46.6a4ec89f.js"><link rel="prefetch" href="/assets/js/47.e1e129e6.js"><link rel="prefetch" href="/assets/js/48.c284ce23.js"><link rel="prefetch" href="/assets/js/49.17e5dd65.js"><link rel="prefetch" href="/assets/js/5.e3d12916.js"><link rel="prefetch" href="/assets/js/50.34c3ac45.js"><link rel="prefetch" href="/assets/js/51.035f7031.js"><link rel="prefetch" href="/assets/js/52.e9ef227a.js"><link rel="prefetch" href="/assets/js/53.ecbb032d.js"><link rel="prefetch" href="/assets/js/54.e9af4cfe.js"><link rel="prefetch" href="/assets/js/55.7e71402b.js"><link rel="prefetch" href="/assets/js/56.511071fe.js"><link rel="prefetch" href="/assets/js/57.13b7fe79.js"><link rel="prefetch" href="/assets/js/58.e51f8b0e.js"><link rel="prefetch" href="/assets/js/59.a1b8bdb7.js"><link rel="prefetch" href="/assets/js/6.5fc3f358.js"><link rel="prefetch" href="/assets/js/60.fd7e1c08.js"><link rel="prefetch" href="/assets/js/61.0daf2361.js"><link rel="prefetch" href="/assets/js/62.04632944.js"><link rel="prefetch" href="/assets/js/63.f0dd5615.js"><link rel="prefetch" href="/assets/js/64.89a4b562.js"><link rel="prefetch" href="/assets/js/65.6764ff0c.js"><link rel="prefetch" href="/assets/js/66.049bdee1.js"><link rel="prefetch" href="/assets/js/67.b0d4ec16.js"><link rel="prefetch" href="/assets/js/68.46d97067.js"><link rel="prefetch" href="/assets/js/69.f540f0da.js"><link rel="prefetch" href="/assets/js/7.ce17dd73.js"><link rel="prefetch" href="/assets/js/70.17d8f857.js"><link rel="prefetch" href="/assets/js/71.b2a166a0.js"><link rel="prefetch" href="/assets/js/72.1c17a875.js"><link rel="prefetch" href="/assets/js/73.dac8984b.js"><link rel="prefetch" href="/assets/js/74.5bbc33ac.js"><link rel="prefetch" href="/assets/js/75.483644c7.js"><link rel="prefetch" href="/assets/js/76.de5461ab.js"><link rel="prefetch" href="/assets/js/77.7fa90702.js"><link rel="prefetch" href="/assets/js/78.f41853b8.js"><link rel="prefetch" href="/assets/js/79.598b50e6.js"><link rel="prefetch" href="/assets/js/80.61d2d23a.js"><link rel="prefetch" href="/assets/js/81.d310c6e4.js"><link rel="prefetch" href="/assets/js/82.22aa814c.js"><link rel="prefetch" href="/assets/js/83.f493eba4.js"><link rel="prefetch" href="/assets/js/84.3a32a1eb.js"><link rel="prefetch" href="/assets/js/85.2f47134e.js"><link rel="prefetch" href="/assets/js/86.74e65a77.js"><link rel="prefetch" href="/assets/js/87.e87bff96.js"><link rel="prefetch" href="/assets/js/88.aabc97af.js"><link rel="prefetch" href="/assets/js/89.b0945d87.js"><link rel="prefetch" href="/assets/js/90.630f62d3.js"><link rel="prefetch" href="/assets/js/91.ed816647.js"><link rel="prefetch" href="/assets/js/92.19065457.js"><link rel="prefetch" href="/assets/js/93.a0fe1919.js"><link rel="prefetch" href="/assets/js/94.51e48580.js"><link rel="prefetch" href="/assets/js/95.e591bede.js"><link rel="prefetch" href="/assets/js/96.1723f1d6.js"><link rel="prefetch" href="/assets/js/97.02bbb7d4.js"><link rel="prefetch" href="/assets/js/98.a3625ba6.js"><link rel="prefetch" href="/assets/js/99.1accbf48.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.5959bfd2.js">
    <link rel="stylesheet" href="/assets/css/0.styles.66b92039.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu have-body-img"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/nav-logo.png" alt="DC's blog" class="logo"> <span class="site-name can-hide">DC's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="IT必备" class="dropdown-title"><a href="/IT/" class="link-title">IT必备</a> <span class="title" style="display:none;">IT必备</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/IT/basis/" class="nav-link">计算机基础</a></li><li class="dropdown-item"><!----> <a href="/IT/linux/" class="nav-link">linux基础</a></li><li class="dropdown-item"><!----> <a href="/IT/mysql/" class="nav-link">mysql</a></li><li class="dropdown-item"><!----> <a href="/IT/git/" class="nav-link">git</a></li><li class="dropdown-item"><!----> <a href="/IT/structure/" class="nav-link">数据结构与算法</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Python" class="dropdown-title"><a href="/python/" class="link-title">Python</a> <span class="title" style="display:none;">Python</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/python/basis/" class="nav-link">opp</a></li><li class="dropdown-item"><!----> <a href="/python/oop/" class="nav-link">oop</a></li><li class="dropdown-item"><!----> <a href="/python/Network_concurrency/" class="nav-link">网络并发编程</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/front_end/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front_end/html/" class="nav-link">html</a></li><li class="dropdown-item"><!----> <a href="/front_end/css/" class="nav-link">css</a></li><li class="dropdown-item"><!----> <a href="/front_end/js/" class="nav-link">javascript</a></li><li class="dropdown-item"><!----> <a href="/front_end/jquery/" class="nav-link">jquery</a></li><li class="dropdown-item"><!----> <a href="/front_end/ui/" class="nav-link">UI</a></li><li class="dropdown-item"><!----> <a href="/front_end/vue/" class="nav-link">vue</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><a href="/python_web/" class="link-title">后端</a> <span class="title" style="display:none;">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/python_web/django/" class="nav-link">Django</a></li><li class="dropdown-item"><!----> <a href="/python_web/drf/" class="nav-link">drf</a></li><li class="dropdown-item"><!----> <a href="/python_web/drf_re/" class="nav-link">drf_re</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="实战" class="dropdown-title"><a href="/project/" class="link-title">实战</a> <span class="title" style="display:none;">实战</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>前后端不分离</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/project/bbs/" class="nav-link">BBS</a></li><li class="dropdown-subitem"><a href="/project/order/" class="nav-link">订单系统</a></li><li class="dropdown-subitem"><a href="/project/crm/" class="nav-link">CRM</a></li></ul></li><li class="dropdown-item"><h4>前后端分离</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/project/supply/" class="nav-link">供应链系统</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><a href="/other/" class="link-title">其他</a> <span class="title" style="display:none;">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/other/essays/" class="nav-link">杂文</a></li><li class="dropdown-item"><h4>关于我</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/about/" class="nav-link">me</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><!----> <span class="title" style="display:;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/OnePieceDC/" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="/img/avatar.gif"> <div class="blogger-info"><h3>DC</h3> <span>愿我一生欢喜,不为世俗所及.</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="IT必备" class="dropdown-title"><a href="/IT/" class="link-title">IT必备</a> <span class="title" style="display:none;">IT必备</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/IT/basis/" class="nav-link">计算机基础</a></li><li class="dropdown-item"><!----> <a href="/IT/linux/" class="nav-link">linux基础</a></li><li class="dropdown-item"><!----> <a href="/IT/mysql/" class="nav-link">mysql</a></li><li class="dropdown-item"><!----> <a href="/IT/git/" class="nav-link">git</a></li><li class="dropdown-item"><!----> <a href="/IT/structure/" class="nav-link">数据结构与算法</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Python" class="dropdown-title"><a href="/python/" class="link-title">Python</a> <span class="title" style="display:none;">Python</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/python/basis/" class="nav-link">opp</a></li><li class="dropdown-item"><!----> <a href="/python/oop/" class="nav-link">oop</a></li><li class="dropdown-item"><!----> <a href="/python/Network_concurrency/" class="nav-link">网络并发编程</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/front_end/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front_end/html/" class="nav-link">html</a></li><li class="dropdown-item"><!----> <a href="/front_end/css/" class="nav-link">css</a></li><li class="dropdown-item"><!----> <a href="/front_end/js/" class="nav-link">javascript</a></li><li class="dropdown-item"><!----> <a href="/front_end/jquery/" class="nav-link">jquery</a></li><li class="dropdown-item"><!----> <a href="/front_end/ui/" class="nav-link">UI</a></li><li class="dropdown-item"><!----> <a href="/front_end/vue/" class="nav-link">vue</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><a href="/python_web/" class="link-title">后端</a> <span class="title" style="display:none;">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/python_web/django/" class="nav-link">Django</a></li><li class="dropdown-item"><!----> <a href="/python_web/drf/" class="nav-link">drf</a></li><li class="dropdown-item"><!----> <a href="/python_web/drf_re/" class="nav-link">drf_re</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="实战" class="dropdown-title"><a href="/project/" class="link-title">实战</a> <span class="title" style="display:none;">实战</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>前后端不分离</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/project/bbs/" class="nav-link">BBS</a></li><li class="dropdown-subitem"><a href="/project/order/" class="nav-link">订单系统</a></li><li class="dropdown-subitem"><a href="/project/crm/" class="nav-link">CRM</a></li></ul></li><li class="dropdown-item"><h4>前后端分离</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/project/supply/" class="nav-link">供应链系统</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><a href="/other/" class="link-title">其他</a> <span class="title" style="display:none;">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/other/essays/" class="nav-link">杂文</a></li><li class="dropdown-item"><h4>关于我</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/about/" class="nav-link">me</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><!----> <span class="title" style="display:;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/OnePieceDC/" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>计算机基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>linux基础</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/da5198/" class="sidebar-link">准备工作</a></li><li><a href="/pages/8939f4/" class="sidebar-link">初识shell与基础常用命令</a></li><li><a href="/pages/b323da/" class="sidebar-link">文件管理之基础命令</a></li><li><a href="/pages/bd85fe/" class="sidebar-link">文件管理之四大模式</a></li><li><a href="/pages/4e332e/" class="sidebar-link">文件管理之命令补充</a></li><li><a href="/pages/e843c3/" class="sidebar-link">文件管理之文件系统</a></li><li><a href="/pages/15d340/" class="sidebar-link">权限管理之用户与组</a></li><li><a href="/pages/1683d8/" aria-current="page" class="active sidebar-link">权限管理之文件权限</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/1683d8/#文件详细信息" class="sidebar-link">文件详细信息</a></li><li class="sidebar-sub-header level2"><a href="/pages/1683d8/#基本权限" class="sidebar-link">基本权限</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/1683d8/#权限的类型" class="sidebar-link">权限的类型</a></li><li class="sidebar-sub-header level3"><a href="/pages/1683d8/#权限的归属" class="sidebar-link">权限的归属</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/1683d8/#设置权限" class="sidebar-link">设置权限</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/1683d8/#chmod" class="sidebar-link">chmod</a></li><li class="sidebar-sub-header level3"><a href="/pages/1683d8/#chown" class="sidebar-link">chown</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/1683d8/#权限的作用-意义" class="sidebar-link">权限的作用/意义!!!</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/1683d8/#操作文件内容" class="sidebar-link">操作文件内容</a></li><li class="sidebar-sub-header level3"><a href="/pages/1683d8/#操作文件夹" class="sidebar-link">操作文件夹</a></li><li class="sidebar-sub-header level3"><a href="/pages/1683d8/#总结" class="sidebar-link">总结</a></li><li class="sidebar-sub-header level3"><a href="/pages/1683d8/#文件执行" class="sidebar-link">文件执行</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/1683d8/#suid" class="sidebar-link">SUID</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/1683d8/#抛出问题" class="sidebar-link">抛出问题</a></li><li class="sidebar-sub-header level3"><a href="/pages/1683d8/#suid特点及使用过程" class="sidebar-link">SUID特点及使用过程</a></li><li class="sidebar-sub-header level3"><a href="/pages/1683d8/#实验证明" class="sidebar-link">实验证明</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/1683d8/#sgid" class="sidebar-link">SGID</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/1683d8/#普通文件" class="sidebar-link">普通文件</a></li><li class="sidebar-sub-header level3"><a href="/pages/1683d8/#目录文件" class="sidebar-link">目录文件</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/1683d8/#sbit-sticky" class="sidebar-link">SBIT/Sticky</a></li><li class="sidebar-sub-header level2"><a href="/pages/1683d8/#特殊权限总结☆" class="sidebar-link">特殊权限总结☆</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/1683d8/#没有特殊权限" class="sidebar-link">没有特殊权限</a></li><li class="sidebar-sub-header level3"><a href="/pages/1683d8/#suid-2" class="sidebar-link">SUID</a></li><li class="sidebar-sub-header level3"><a href="/pages/1683d8/#sgid、sbit" class="sidebar-link">SGID、SBIT</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/1683d8/#umask" class="sidebar-link">umask</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/1683d8/#umask规则" class="sidebar-link">umask规则</a></li><li class="sidebar-sub-header level3"><a href="/pages/1683d8/#临时-永久设置" class="sidebar-link">临时/永久设置</a></li></ul></li></ul></li><li><a href="/pages/7ba656/" class="sidebar-link">权限管理之ACL</a></li><li><a href="/pages/415178/" class="sidebar-link">权限管理之su与sudo</a></li><li><a href="/pages/80cc13/" class="sidebar-link">软件包管理之rpm</a></li><li><a href="/pages/0c6963/" class="sidebar-link">软件包管理之yum</a></li><li><a href="/pages/4944d1/" class="sidebar-link">查看进程</a></li><li><a href="/pages/cece9f/" class="sidebar-link">管理进程</a></li><li><a href="/pages/9c5405/" class="sidebar-link">存储管理之传统磁盘管理</a></li><li><a href="/pages/0d43c6/" class="sidebar-link">存储管理之LVM</a></li><li><a href="/pages/0fa05e/" class="sidebar-link">网络管理</a></li><li><a href="/pages/fb22ed/" class="sidebar-link">shell基础</a></li><li><a href="/pages/d423cf/" class="sidebar-link">crond计划任务</a></li><li><a href="/pages/f264b1/" class="sidebar-link">系统优化</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>mysql</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>git</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据结构与算法</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-91157402><div class="articleInfo" data-v-91157402><ul class="breadcrumbs" data-v-91157402><li data-v-91157402><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-91157402></a></li> <li data-v-91157402><a href="/categories/?category=IT_Need" title="分类" data-v-91157402>IT_Need</a></li><li data-v-91157402><a href="/categories/?category=linux%E5%9F%BA%E7%A1%80" title="分类" data-v-91157402>linux基础</a></li></ul> <div class="info" data-v-91157402><div title="作者" class="author iconfont icon-touxiang" data-v-91157402><a href="https://github.com/OnePieceDC" target="_blank" title="作者" class="beLink" data-v-91157402>DC</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-91157402><a href="javascript:;" data-v-91157402>2022-10-08</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">权限管理之文件权限<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h2 id="文件详细信息"><a href="#文件详细信息" class="header-anchor">#</a> 文件详细信息</h2> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># ll 1.txt</span>
-rw-r--r-- <span class="token number">1</span> root root <span class="token number">4</span> <span class="token number">7</span>月  <span class="token number">19</span> <span class="token number">18</span>:56 <span class="token number">1</span>.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="/assets/img/10.84fc0e65.png" alt=""></p> <p><font color="gray">Ps: root用户可不受权限压制, 并没有说root组不受权限压制!</font></p> <hr> <h2 id="基本权限"><a href="#基本权限" class="header-anchor">#</a> 基本权限</h2> <h3 id="权限的类型"><a href="#权限的类型" class="header-anchor">#</a> 权限的类型</h3> <table><thead><tr><th>字符</th> <th>含义</th> <th>关联数字</th></tr></thead> <tbody><tr><td>r</td> <td>可读</td> <td>4</td></tr> <tr><td>w</td> <td>可写</td> <td>2</td></tr> <tr><td>x</td> <td>可执行</td> <td>1</td></tr></tbody></table> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>权限是与ugo相对应的,即权限要与ugo相关联才有意义

以 -rw-r--r--. 为例
第一位对应文件的类型,接下来9位3位为一组分别对应u、g、o.
若最后还有个点,表示此文件是在SElinux已加载状态下<span class="token punctuation">(</span>非disabled<span class="token punctuation">)</span>创建,此文件受SElinux的管制
文件类型：
    -: 文本文档
    d: 目录
    b: 设备block
    c: 字符设备
    s: 套接字文件
    l: 软链接
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="权限的归属"><a href="#权限的归属" class="header-anchor">#</a> 权限的归属</h3> <table><thead><tr><th>字符</th> <th>含义</th></tr></thead> <tbody><tr><td>u</td> <td>属主</td></tr> <tr><td>g</td> <td>属组</td></tr> <tr><td>o</td> <td>其它人</td></tr></tbody></table> <hr> <h2 id="设置权限"><a href="#设置权限" class="header-anchor">#</a> 设置权限</h2> <blockquote><p><strong>chmod</strong>   设置权限的类型<br> <strong>chown</strong>	设置权限的归属 即用户和组</p></blockquote> <h3 id="chmod"><a href="#chmod" class="header-anchor">#</a> chmod</h3> <p>有三种方式修改文件权限的类型:  <font color="gray">eg: r-- rw- r-- 变为 rwx r-x rw-</font><br>
1&gt; <strong>加减法</strong> <font color="gray">在原来的基础上增增减减</font><br> <code>chmod u+wx,g-w+x,o+w 1.txt</code><br>
2&gt; <strong>赋值</strong> <font color="gray">不管原来是什么,直接覆盖</font><br> <code>chmod u=rwx,g=rx,o=rw 1.txt</code><br>
     若相同可简写 eg: <code>chmod ug=rx,o=rw 1.txt</code><br>
3&gt; <strong>数字</strong> <font color="gray">必须是3位数</font><br> <code>chmod 756 1.txt</code>      4+2+1,4+1,4+2</p> <p><code>chmod a=- test/a.txt</code> <strong>a代表ugo</strong> ---------</p> <p><font color="brown">-R选项</font> 意味着递归修改,主要针对目录文件(文件夹)的  并不会影响后续新建的</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># mkdir -p a/b/c</span>
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># touch a/b/c/d.txt</span>
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># ll -d a</span>
drwxr-xr-x <span class="token number">3</span> root root <span class="token number">15</span> <span class="token number">7</span>月  <span class="token number">28</span> <span class="token number">10</span>:41 a
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># ll -d a/b</span>
drwxr-xr-x <span class="token number">3</span> root root <span class="token number">15</span> <span class="token number">7</span>月  <span class="token number">28</span> <span class="token number">10</span>:41 a/b
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># ll -d a/b/c</span>
drwxr-xr-x <span class="token number">2</span> root root <span class="token number">19</span> <span class="token number">7</span>月  <span class="token number">28</span> <span class="token number">10</span>:42 a/b/c
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># ll a/b/c/d.txt </span>
-rw-r--r-- <span class="token number">1</span> root root <span class="token number">0</span> <span class="token number">7</span>月  <span class="token number">28</span> <span class="token number">10</span>:42 a/b/c/d.txt

<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># chmod -R 777 a</span>

<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># chmod -R 777 a</span>
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># ll -d a</span>
drwxrwxrwx <span class="token number">3</span> root root <span class="token number">15</span> <span class="token number">7</span>月  <span class="token number">28</span> <span class="token number">10</span>:41 a
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># ll -d a/b</span>
drwxrwxrwx <span class="token number">3</span> root root <span class="token number">15</span> <span class="token number">7</span>月  <span class="token number">28</span> <span class="token number">10</span>:41 a/b
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># ll -d a/b/c</span>
drwxrwxrwx <span class="token number">2</span> root root <span class="token number">19</span> <span class="token number">7</span>月  <span class="token number">28</span> <span class="token number">10</span>:42 a/b/c
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># ll a/b/c/d.txt </span>
<span class="token parameter variable">-rwxrwxrwx</span> <span class="token number">1</span> root root <span class="token number">0</span> <span class="token number">7</span>月  <span class="token number">28</span> <span class="token number">10</span>:42 a/b/c/d.txt

<span class="token string">&quot;&quot;</span>&quot;
通常啥时候用呢？下载某一软件部署在主机上,批量修改软件下所有文件的权限.
<span class="token string">&quot;&quot;</span>&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p><font color="gray">Ps: 将文件权限置空. <code>chmod000file.txt</code>; <code>chmod u=-,g=-,o=- a/b/c/d.txt</code>(chmod ugo=rwx a/b/c/d.txt)</font></p> <h3 id="chown"><a href="#chown" class="header-anchor">#</a> chown</h3> <p><code>chown dc.devops a.txt</code>      --      修改属主,属组<br> <code>chown dc a.txt</code>      --      只修改属主<br> <code>chown .devops a.txt</code>      --      只修改属组<br> <code>chown dc. a.txt</code>      --      属主和属组会一样, 等同于<code>chown dc.dc a.txt</code></p> <p><font color="brown">-R选项</font> 意味着递归修改,主要针对目录文件(文件夹)的	并不会影响后续新建的</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># chown -R dc.dc a</span>
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># ll -d a </span>
drwxrwxrwx <span class="token number">3</span> <span class="token function">dc</span> <span class="token function">dc</span> <span class="token number">15</span> <span class="token number">7</span>月  <span class="token number">28</span> <span class="token number">10</span>:41 a
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># ll -d a/b/</span>
drwxrwxrwx <span class="token number">3</span> <span class="token function">dc</span> <span class="token function">dc</span> <span class="token number">15</span> <span class="token number">7</span>月  <span class="token number">28</span> <span class="token number">10</span>:41 a/b/
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># ll -d a/b/c</span>
drwxrwxrwx <span class="token number">2</span> <span class="token function">dc</span> <span class="token function">dc</span> <span class="token number">19</span> <span class="token number">7</span>月  <span class="token number">28</span> <span class="token number">10</span>:42 a/b/c
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># ll -d a/b/c/d.txt </span>
<span class="token parameter variable">-rwxrwxrwx</span> <span class="token number">1</span> <span class="token function">dc</span> <span class="token function">dc</span> <span class="token number">0</span> <span class="token number">7</span>月  <span class="token number">28</span> <span class="token number">10</span>:42 a/b/c/d.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><hr> <h2 id="权限的作用-意义"><a href="#权限的作用-意义" class="header-anchor">#</a> 权限的作用/意义!!!</h2> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>针对文件<span class="token punctuation">(</span>操作文件内容<span class="token punctuation">)</span>
    r: 读取文件内容 <span class="token variable"><span class="token variable">`</span><span class="token function">cat</span><span class="token variable">`</span></span>
    w: 修改文件内容	<span class="token variable"><span class="token variable">`</span><span class="token function">vim</span><span class="token variable">`</span></span> <span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">echo</span> <span class="token operator">&gt;&gt;</span> <span class="token operator">&gt;</span> 追加,覆盖<span class="token variable">`</span></span>
    x: 可以把文件当作一个命令/程序来运行 <span class="token punctuation">(</span>前提是此文件得是个代码文件<span class="token punctuation">)</span>
       若该文件的代码是编译好的结果,那么只有x权限即可执行<span class="token punctuation">;</span>
       若该文件的代码是一个解释型的脚本程序,则还需要配合r权限才可执行 rx
针对目录<span class="token punctuation">(</span>操作某一目录下的子文件夹或子文件 创建删除移动<span class="token punctuation">)</span>
    r: 可以浏览该目录下的子目录名和子文件名字,意味着能<span class="token variable"><span class="token variable">`</span><span class="token function">ls</span><span class="token variable">`</span></span> <span class="token variable"><span class="token variable">`</span>ll<span class="token variable">`</span></span>罗列目录文件下的有哪些东西
    w: 可在该目录下创建<span class="token variable"><span class="token variable">`</span><span class="token function">touch</span><span class="token variable">`</span></span>、删除<span class="token variable"><span class="token variable">`</span><span class="token function">rm</span><span class="token variable">`</span></span>、移动子文件或子文件夹<span class="token variable"><span class="token variable">`</span><span class="token function">mv</span><span class="token variable">`</span></span>
    x: 可以进入该目录,意味着能<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">cd</span><span class="token variable">`</span></span>到此路径下
       即我们需要操作<span class="token punctuation">(</span>增删改<span class="token punctuation">)</span>目录下的内容,就得先能进入该目录,得先拥有该目录的x执行权限
       具体来说:
          可以正常切换到目录下,若涉及到多层目录如/a/b/c,需要对每一级都有x权限才可以正常走到下一级

▼ 文件不管是否有r,都可以ls<span class="token punctuation">;</span>目录没有r,不能ls
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="操作文件内容"><a href="#操作文件内容" class="header-anchor">#</a> 操作文件内容</h3> <p>☆ <font color="blue"><strong>操作文件夹下的文件内容</strong></font><br>
     查看某一个文件内容需要具备的权限: 对所有文件夹的x权限以及对目标文件的r权限<br>
     解析: <font color="gray">/a/b/c.txt  该用户要能cd一层层的切到路径/a/b路径下,即需要对<code>/a/b</code>目录文件以及沿途的<code>/</code> <code>/a</code>目录文件有x权限; 要能读取文件的内容,需要对 c.txt 有r权限.</font></p> <h3 id="操作文件夹"><a href="#操作文件夹" class="header-anchor">#</a> 操作文件夹</h3> <p>☆ <font color="blue"><strong>操作文件夹下的子文件与子文件夹(注意不是文件内容)</strong></font><br>
     在目录下创建、删除、移动文件需要的权限: 对沿途所有文件夹的x权限以及对目标文件夹的w权限<br>
     解析: <font color="gray">在/a/b目录下创建c.txt文件,得先能cd到/a/b路径下; 需要对b文件夹有w写权限,才能touch创建c.txt文件.</font></p> <h3 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h3> <p>     第一步: <strong>用户必须要对沿途的文件夹都有一个x执行权限;</strong><br>
​     第二步: 用户看具体要求<br>
​          1&gt; 对文件夹的操作(不操作文件内容), r代表可以浏览,w代表可以创建删除移动子文件和子目录.<br>
​          2&gt; 对文件的操作(操作文件内容), r代表可以读文件内容,w代表可以修改文件内容.</p> <p>​	<font color="blue"><strong>vim 写入内容 wq!强制覆盖,需要的权限:(二选一)</strong></font><br>
​          沿途的文件夹都有一个x执行权限, 目标文件 <code>-w-</code>   目标文件所在文件夹 <code>--x</code><br>
​          沿途的文件夹都有一个x执行权限, 目标文件 <code>---</code>   目标文件所在文件夹 <code>-wx</code></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>▲ <span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span> 若用户对沿途所有文件夹只有x权限,对目标文件没有r读权限,有w写权限
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># cat a.txt </span>
<span class="token number">111</span>
！！！注意！！！vim
简单来说,vim的原理是将文件内容一下子从硬盘全部读到内存中,在内存中改完后,再一次性全部覆盖硬盘的原文件<span class="token punctuation">..</span>
没有r读权限 -- vim打开文件时,虽然不会报错,但是空的,啥内容也没有<span class="token punctuation">..</span>
有w写权限  -- 写后可以wq<span class="token operator">!</span>强制保存<span class="token punctuation">..</span> 写的内容是在内存里,wq<span class="token operator">!</span>后直接覆盖了硬盘中原来的内容<span class="token punctuation">..</span>.
在操作过程中会提示 <span class="token string">&quot;警告:正在修改一个只读文件&quot;</span><span class="token punctuation">;</span><span class="token string">&quot;请加!强制执行&quot;</span>
Ps: 吐槽,明明针对当前用户而言,对该文件只有写权限,还提示正在修改一个只读文件Hhhh.
    也许是开发者在提醒你没看到源内容最好别修改.站的角度不同.
	
补充:echo 因为有写权限,<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">echo</span> <span class="token number">222</span> <span class="token operator">&gt;&gt;</span> a.txt<span class="token variable">`</span></span><span class="token punctuation">;</span> <span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">echo</span> <span class="token number">3333</span> <span class="token operator">&gt;</span> a.txt<span class="token variable">`</span></span><span class="token punctuation">;</span>都会成功.


▲ <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span> 当前用户lili对沿途所有文件夹都有x权限并且当前用户对c文件夹有w权限,但是lili对d.txt文件没有权限
/a/b/c/d.txt
<span class="token comment">## -wx</span>
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># ll -d a/b/c </span>
drwxr-x-wx <span class="token number">1</span> root root <span class="token number">22</span> <span class="token number">7</span>月  <span class="token number">28</span> <span class="token number">18</span>:42 a/b/c
<span class="token comment">## ---</span>
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># ll a/b/c/d.txt </span>
-rw-r------ <span class="token number">1</span> root root <span class="token number">21</span> <span class="token number">7</span>月  <span class="token number">28</span> <span class="token number">18</span>:42 a/b/c/d.txt

lili对c文件夹有w权限,那么lili可以删除d.txt,再touch创建一个新的d.txt,曲线救国.
但不需要一步步的操作,vim可以一步到位.
lili可以vim编辑文件内容,并且可以wq<span class="token operator">!</span>强制保存退出完成文件修改.底层原理就是将源文件删掉了.
<span class="token punctuation">(</span>这一过程是不是跟上面的第一点相似,对的,他们实现的最终效果是一样的<span class="token punctuation">)</span>可以通过查看前后操作的文件inode号来确定.
<span class="token comment">## 文件的属主和属组变啦.也就侧面验证了源文件删除啦,新文件是lili创建的.</span>
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># ll a/b/c/d.txt </span>
-rw-r------ <span class="token number">1</span> lili lili <span class="token number">15</span> <span class="token number">7</span>月  <span class="token number">28</span> <span class="token number">18</span>:42 a/b/c/d.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h3 id="文件执行"><a href="#文件执行" class="header-anchor">#</a> 文件执行</h3> <p>☆ <font color="blue"><strong>对文件的执行权限</strong></font></p> <blockquote><p>对文件拥有执行权限意味着可以把文件当成命令运行</p></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token string">&quot;&quot;</span>&quot;
linux一切皆文件
可以观测到 ugo对/usr/bin/cat文件都有x可执行权限
<span class="token string">&quot;&quot;</span>&quot;
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># which echo</span>
/usr/bin/echo
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># ll /usr/bin/echo</span>
-rwxr-xr-x. <span class="token number">1</span> root root <span class="token number">33088</span> <span class="token number">11</span>月 <span class="token number">17</span> <span class="token number">2020</span> /usr/bin/echo

<span class="token string">&quot;&quot;</span>&quot;
将echo命令所在的文件拷贝到/opt/t1/t2目录下,并赋予最基本的文件可执行权限
<span class="token string">&quot;&quot;</span>&quot;
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># mkdir -p /opt/t1/t2</span>
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># cp /usr/bin/echo /opt/t1/t2</span>
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># chmod o=x /opt/t1/t2/echo</span>
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># head -3 /opt/t1/t2/echo</span>
ELF<span class="token operator">&gt;</span>J@@?y@8	@@@@@@?88@8@@@?^?^ ?m?m<span class="token variable"><span class="token variable">`</span>?m<span class="token variable">`</span></span>??nn<span class="token variable"><span class="token variable">`</span>?TT@T@DDP?td?Q?Q@?Q@<span class="token operator">&lt;&lt;</span>Q?tdR?td?m?m<span class="token variable">`</span></span>?m`XX/lib64/ld-linux-x86-64.so.2GNU GNU???IDk?????<span class="token comment">#?DT?vX!C??z?8??q?  ?H??X0?@??\&gt;</span>

<span class="token string">&quot;&quot;</span>&quot;
.sh表明此文件要被shell解释器解锁执行,赋予了a.sh最基本的可执行权限
<span class="token string">&quot;&quot;</span>&quot;
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># touch /opt/t1/t2/a.sh</span>
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># vim /opt/t1/t2/a.sh</span>
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># cat /opt/t1/t2/a.sh</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;hello&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;world&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;hahah&quot;</span>
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># chmod o=x /opt/t1/t2/a.sh</span>

<span class="token string">&quot;&quot;</span>&quot;
查看权限
<span class="token string">&quot;&quot;</span>&quot;
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># ll /opt/t1/t2</span>
总用量 <span class="token number">40</span>
-rw-r----x <span class="token number">1</span> root root    <span class="token number">39</span> <span class="token number">7</span>月  <span class="token number">30</span> <span class="token number">17</span>:10 a.sh
-rwxr-x--x <span class="token number">1</span> root root <span class="token number">33088</span> <span class="token number">7</span>月  <span class="token number">30</span> <span class="token number">17</span>:18 <span class="token builtin class-name">echo</span>

<span class="token string">&quot;&quot;</span>&quot;
登录普通用户dc
执行/opt/t1/t2/echo和/opt/t1/t2/a.sh两个可执行文件
！！！！！！前者可执行成功,后者失败 why?
因为echo文件是编译好的结果,不需要shell解释器解释啦,只需要x权限即可执行<span class="token punctuation">;</span>
但a.sh文件的代码是一个解释型的脚本程序,即需要shell解释器读出来翻译成二进制再运行,则需要配合r权限才可执行
<span class="token string">&quot;&quot;</span>&quot;
<span class="token punctuation">[</span>dc@localhost opt<span class="token punctuation">]</span>$ /opt/t1/t2/echo wawo
wawo
<span class="token punctuation">[</span>dc@localhost opt<span class="token punctuation">]</span>$ /opt/t1/t2/a.sh
bash: /opt/t1/t2/a.sh: 权限不够

<span class="token string">&quot;&quot;</span>&quot;
root用户修改a.sh的权限为rx
dc用户重新执行a.sh文件 成功<span class="token operator">!</span><span class="token operator">!</span><span class="token operator">!</span>
<span class="token string">&quot;&quot;</span>&quot;
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># chmod o=rx /opt/t1/t2/a.sh </span>
<span class="token punctuation">[</span>dc@localhost opt<span class="token punctuation">]</span>$ /opt/t1/t2/a.sh
hello
world
hahah
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br></div></div><hr> <h2 id="suid"><a href="#suid" class="header-anchor">#</a> SUID</h2> <h3 id="抛出问题"><a href="#抛出问题" class="header-anchor">#</a> 抛出问题</h3> <p>普通用户dc可以用<code>passwd</code>命令修改自己的账号密码,我们清楚的知道修改密码则是在修改<code>/etc/shadow</code>文件..<br>
但dc普通用户对于<code>/etc/shadow</code>文件而言, 不是root也不属于root组,属于<code>其它人</code>,其权限为 <code>---</code> 即没有任何权限.</p> <p>逻辑上冲突了啊!? 是怎么一回事呢?  悄悄告诉你,是 <strong>SUID</strong> 从中作祟.</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># ll /etc/shadow</span>
---------- <span class="token number">1</span> root root <span class="token number">1388</span> <span class="token number">7</span>月   <span class="token number">4</span> <span class="token number">16</span>:53 /etc/shadow
<span class="token punctuation">[</span>dc@localhost opt<span class="token punctuation">]</span>$ <span class="token function">passwd</span> 
更改用户 <span class="token function">dc</span> 的密码 。
为 <span class="token function">dc</span> 更改 STRESS 密码。
（当前）UNIX 密码：
新的 密码：
<span class="token punctuation">..</span>. <span class="token punctuation">..</span>. <span class="token punctuation">..</span>.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>在UNIX系列的操作系统里面, 确定用户的身份是通过UID号确定的,跟用户名没有关系..<br>
默认以登录用户的uid和gid为准..<br> <strong>但除了<code>UID</code>与<code>GID</code>还有<code>euid</code>与<code>egid</code>,它两代表执行程序时,真正采用的用户id与组id.</strong><br> <font color="gray">ps:e是effective有效的意思</font></p> <p>登录dc用户,使用命令启用相应的进程..进程的权限就是当前登录用户dc的权限.<br>
即进程的uid和gid都是dc. unix在进程真正运行的时候会进行转换的,将uid关联euid,gid关联egid.<br>
默认情况下,uid==euid;gid==egid 是相等的! 但是可以改变！</p> <h3 id="suid特点及使用过程"><a href="#suid特点及使用过程" class="header-anchor">#</a> SUID特点及使用过程</h3> <blockquote><p><font color="brown">suid作用于可执行的命令,意味着无论哪个用户来运行此命令,它的身份都会转换成此命令的主人来运行.</font><br>
即进程运行的时候,euid是该命令主人的uid..不是当前登录用户的uid..</p></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># ll /etc/shadow</span>
---------- <span class="token number">1</span> root root <span class="token number">1388</span> <span class="token number">7</span>月   <span class="token number">4</span> <span class="token number">16</span>:53 /etc/shadow
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># ll `which passwd`</span>
-rwsr-xr-x. <span class="token number">1</span> root root <span class="token number">27856</span> <span class="token number">4</span>月   <span class="token number">1</span> <span class="token number">2020</span> /usr/bin/passwd
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># ll `which su`</span>
-rwsr-xr-x. <span class="token number">1</span> root root <span class="token number">32128</span> <span class="token number">2</span>月   <span class="token number">3</span> <span class="token number">2021</span> /usr/bin/su
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>这个s就代表着二进制文件具有SUID权限</strong><br> <font color="green">这里显示的小s是因为属主本身具有x执行权限; 若属主没有x执行权限,那么显示的是大S.</font></p> <p><font color="blue"><strong>[特点]</strong></font></p> <blockquote><p><strong>二进制可执行文件     当前登录用户/使用者对其拥有x可执行权限     在执行该命令的过程中</strong></p></blockquote> <p>○ SUID权限仅对二进制可执行文件有效 <font color="gray">bin目录下的文件,那些命令!</font><br>
○ 如果执行者对于该二进制可执行文件具有 x 的权限, 执行者将具有该执行文件的属主的权限<br>
     即当前登录用户在使用二进制可执行文件时身份临时转换成该执行文件的属主<br>
○ 本权限 <strong>仅在执行该二进制可执行文件的过程中</strong> 有效 <font color="gray">即仅限于执行命令的操作..</font></p> <p><font color="blue"><strong>[使用过程]</strong></font></p> <p>普通用户dc利用 SUID 权限完成密码修改的过程如下:</p> <p>1&gt; dc用户对于 /usr/bin/passwd 这个程序具有执行权限, 因此可以执行passwd命令/程序<br>
2&gt; passwd 程序的所有者为 root;  dc用户执行 passwd 程序的过程中会暂时获得root权限<br>
3&gt; root不受权限的压制,因此dc用户在 <em>执行passwd程序的过程中</em> 可以修改 /etc/shadow 文件</p> <h3 id="实验证明"><a href="#实验证明" class="header-anchor">#</a> 实验证明</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token string">&quot;&quot;</span>&quot;
可以看到,root用户不受权限压制可以看到a.txt的内容
但是普通用户dc不能,权限不够<span class="token punctuation">..</span> 
<span class="token string">&quot;&quot;</span>&quot;
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># mkdir test</span>
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># chmod 777 test</span>
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># echo 123456 &gt; test/a.txt</span>
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># chmod 000 test/a.txt </span>
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># ll test/a.txt </span>
---------- <span class="token number">1</span> root root <span class="token number">7</span> <span class="token number">8</span>月   <span class="token number">1</span> 09:40 test/a.txt
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># cat test/a.txt </span>
<span class="token number">123456</span>

<span class="token punctuation">[</span>dc@localhost ~<span class="token punctuation">]</span>$ <span class="token function">cat</span> /opt/test/a.txt 
cat: /opt/test/a.txt: 权限不够
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><strong>Q:</strong> <font color="purple">如何在<strong>不改变</strong> 文件a.txt的权限情况下,让所有人都可以看到文件的内容?</font></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token string">&quot;&quot;</span>&quot;
因为特殊权限suid的缘故,意味着只要执行cat命令,用户的身份就变成了root
<span class="token string">&quot;&quot;</span>&quot;
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># ll `which cat`</span>
-rwxr-xr-x. <span class="token number">1</span> root root <span class="token number">54080</span> <span class="token number">11</span>月 <span class="token number">17</span> <span class="token number">2020</span> /usr/bin/cat
<span class="token comment">## chmod 4755 `which cat`</span>
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># chmod u+s /usr/bin/cat</span>
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># ll `which cat`</span>
-rwsr-xr-x. <span class="token number">1</span> root root <span class="token number">54080</span> <span class="token number">11</span>月 <span class="token number">17</span> <span class="token number">2020</span> /usr/bin/cat
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># su - dc -c &quot;cat /opt/test/a.txt&quot;</span>
<span class="token number">123456</span>

<span class="token string">&quot;&quot;</span>&quot;
验证,登录用户必须具备对执行文件<span class="token punctuation">(</span>命令对应的文件<span class="token punctuation">)</span>有x执行权限<span class="token punctuation">..</span>不然哪怕有suid也不好使用.
逻辑上也说得过去,你连执行命令的权限都没有,如何在执行的过程中转换身份呢？
<span class="token string">&quot;&quot;</span>&quot;
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># ll `which cat`</span>
-rwsr-xr-x. <span class="token number">1</span> root root <span class="token number">54080</span> <span class="token number">11</span>月 <span class="token number">17</span> <span class="token number">2020</span> /usr/bin/cat
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># chmod o-x /usr/bin/cat</span>
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># ll `which cat`</span>
-rwsr-xr--. <span class="token number">1</span> root root <span class="token number">54080</span> <span class="token number">11</span>月 <span class="token number">17</span> <span class="token number">2020</span> /usr/bin/cat
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># su - dc -c &quot;cat /opt/test/a.txt&quot;</span>
-bash: /bin/cat: 权限不够

<span class="token string">&quot;&quot;</span>&quot;
这样做非常不安全,记得恢复操作<span class="token operator">!</span><span class="token operator">!</span>
<span class="token string">&quot;&quot;</span>&quot;
<span class="token comment">##  chmod u-s,o+x /usr/bin/cat</span>
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># chmod u=rwx,o=rx /usr/bin/cat</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><hr> <h2 id="sgid"><a href="#sgid" class="header-anchor">#</a> SGID</h2> <blockquote><p>用户运行命令时使用的是命令文件所属组的身份...</p></blockquote> <h3 id="普通文件"><a href="#普通文件" class="header-anchor">#</a> 普通文件</h3> <p><strong>Q:</strong> <font color="purple">如何在<strong>仅</strong> 改变文件1.txt的属组的权限的情况下,让所有人都可以看到文件的内容?</font></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token string">&quot;&quot;</span>&quot;
cat命令有SGID权限后,dc用户在使用cat命令访问1.txt文件时,所拥有的权限是root组的权限
相当于dc临时切到root组里<span class="token punctuation">..</span>
因为命令文件与普通文件的属组是一样的<span class="token punctuation">..</span>所以改变普通文件属组root组的权限即可<span class="token punctuation">..</span><span class="token punctuation">(</span>不需要考虑普通文件的属主<span class="token punctuation">)</span>
这里相当于将普通文件属组的优先级提到了属主之前<span class="token punctuation">..</span>
<span class="token string">&quot;&quot;</span>&quot;
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># ll /usr/bin/cat</span>
-rwxr-xr-x. <span class="token number">1</span> root root <span class="token number">54080</span> <span class="token number">11</span>月 <span class="token number">17</span> <span class="token number">2020</span> /usr/bin/cat
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># chmod g+s /usr/bin/cat</span>
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># ll /usr/bin/cat</span>
-rwxr-sr-x. <span class="token number">1</span> root root <span class="token number">54080</span> <span class="token number">11</span>月 <span class="token number">17</span> <span class="token number">2020</span> /usr/bin/cat
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># touch /opt/test/1.txt</span>
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># chmod 000 /opt/test/1.txt</span>
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># ll /opt/test/1.txt </span>
---------- <span class="token number">1</span> root root <span class="token number">4</span> <span class="token number">8</span>月   <span class="token number">1</span> <span class="token number">17</span>:36 /opt/test/1.txt
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># echo 123 &gt; /opt/test/1.txt </span>


<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># su - dc -c &quot;cat /opt/test/1.txt&quot;</span>
cat: /opt/test/1.txt: 权限不够
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># su - onepiece -c &quot;cat /opt/test/1.txt&quot;</span>
cat: /opt/test/1.txt: 权限不够
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># chmod g+r /opt/test/1.txt </span>
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># su - dc -c &quot;cat /opt/test/1.txt&quot;</span>
<span class="token number">123</span>
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># su - onepiece -c &quot;cat /opt/test/1.txt&quot;</span>
<span class="token number">123</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h3 id="目录文件"><a href="#目录文件" class="header-anchor">#</a> 目录文件</h3> <p>当一个用户对某一目录有写和执行权限时,该用户就可以在该目录下建立文件;<br> <strong>如果该目录同时用SGID修饰,则该用户在这个目录下建立的文件的属组与这个目录的属组一致!!!</strong></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token string">&quot;&quot;</span>&quot;
目录文件和普通文件是谁创建的,其属主和属组就是谁！
<span class="token string">&quot;&quot;</span>&quot;
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># mkdir /opt/aaa</span>
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># mkdir /opt/aaa/bbb</span>
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># touch /opt/aaa/b.txt</span>

<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># chmod o+w /opt/aaa</span>
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># ll -d /opt/aaa</span>
drwxr-xrwx <span class="token number">3</span> root root <span class="token number">30</span> <span class="token number">8</span>月   <span class="token number">2</span> <span class="token number">17</span>:53 /opt/aaa

<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># su - dc</span>
上一次登录：二 <span class="token number">8</span>月  <span class="token number">2</span> <span class="token number">17</span>:53:33 CST 2022pts/0 上
<span class="token punctuation">[</span>dc@localhost ~<span class="token punctuation">]</span>$ <span class="token function">mkdir</span> /opt/aaa/ccc
<span class="token punctuation">[</span>dc@localhost ~<span class="token punctuation">]</span>$ <span class="token function">touch</span> /opt/aaa/c.txt
<span class="token punctuation">[</span>dc@localhost ~<span class="token punctuation">]</span>$ ll /opt/aaa
总用量 <span class="token number">0</span>
drwxr-xr-x <span class="token number">2</span> root root <span class="token number">6</span> <span class="token number">8</span>月   <span class="token number">2</span> <span class="token number">17</span>:52 bbb
-rw-r--r-- <span class="token number">1</span> root root <span class="token number">0</span> <span class="token number">8</span>月   <span class="token number">2</span> <span class="token number">17</span>:53 b.txt
drwxrwxr-x <span class="token number">2</span> <span class="token function">dc</span>   <span class="token function">dc</span>   <span class="token number">6</span> <span class="token number">8</span>月   <span class="token number">2</span> <span class="token number">17</span>:55 ccc
-rw-rw-r-- <span class="token number">1</span> <span class="token function">dc</span>   <span class="token function">dc</span>   <span class="token number">0</span> <span class="token number">8</span>月   <span class="token number">2</span> <span class="token number">17</span>:55 c.txt


<span class="token string">&quot;&quot;</span>&quot;
给目录文件/opt/aaa添加特殊权限SGID,并改变其属组为group1<span class="token punctuation">(</span>不用root组,结果更具标志性,更容易观察<span class="token punctuation">)</span>
普通用户dc在/opt/aaa下创建目录文件dir2和普通文件2.txt,其属组会与/opt/aaa的属组保持一致
<span class="token string">&quot;&quot;</span>&quot;
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># groupadd group1</span>
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># chown .group1 /opt/aaa</span>
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># chmod g+s /opt/aaa</span>
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># ll -d /opt/aaa</span>
drwxr-srwx <span class="token number">4</span> root group1 <span class="token number">54</span> <span class="token number">8</span>月   <span class="token number">2</span> <span class="token number">17</span>:55 /opt/aaa

<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># mkdir /opt/aaa/dir1</span>
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># touch /opt/aaa/1.txt</span>

<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># su - dc</span>
上一次登录：二 <span class="token number">8</span>月  <span class="token number">2</span> <span class="token number">17</span>:55:30 CST 2022pts/0 上
<span class="token punctuation">[</span>dc@localhost ~<span class="token punctuation">]</span>$ <span class="token function">mkdir</span> /opt/aaa/dir2
<span class="token punctuation">[</span>dc@localhost ~<span class="token punctuation">]</span>$ <span class="token function">touch</span> /opt/aaa/2.txt

<span class="token punctuation">[</span>dc@localhost ~<span class="token punctuation">]</span>$ ll /opt/aaa
总用量 <span class="token number">0</span>
-rw-r--r-- <span class="token number">1</span> root group1 <span class="token number">0</span> <span class="token number">8</span>月   <span class="token number">2</span> <span class="token number">18</span>:03 <span class="token number">1</span>.txt		●
-rw-rw-r-- <span class="token number">1</span> <span class="token function">dc</span>   group1 <span class="token number">0</span> <span class="token number">8</span>月   <span class="token number">2</span> <span class="token number">18</span>:04 <span class="token number">2</span>.txt		●
drwxr-xr-x <span class="token number">2</span> root root   <span class="token number">6</span> <span class="token number">8</span>月   <span class="token number">2</span> <span class="token number">17</span>:52 bbb
-rw-r--r-- <span class="token number">1</span> root root   <span class="token number">0</span> <span class="token number">8</span>月   <span class="token number">2</span> <span class="token number">17</span>:53 b.txt
drwxrwxr-x <span class="token number">2</span> <span class="token function">dc</span>   <span class="token function">dc</span>     <span class="token number">6</span> <span class="token number">8</span>月   <span class="token number">2</span> <span class="token number">17</span>:55 ccc
-rw-rw-r-- <span class="token number">1</span> <span class="token function">dc</span>   <span class="token function">dc</span>     <span class="token number">0</span> <span class="token number">8</span>月   <span class="token number">2</span> <span class="token number">17</span>:55 c.txt
drwxr-sr-x <span class="token number">2</span> root group1 <span class="token number">6</span> <span class="token number">8</span>月   <span class="token number">2</span> <span class="token number">18</span>:03 dir1		●
drwxrwsr-x <span class="token number">2</span> <span class="token function">dc</span>   group1 <span class="token number">6</span> <span class="token number">8</span>月   <span class="token number">2</span> <span class="token number">18</span>:04 dir2		●
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br></div></div><hr> <h2 id="sbit-sticky"><a href="#sbit-sticky" class="header-anchor">#</a> SBIT/Sticky</h2> <blockquote><p>SBIT是 <em>the restricted deletion flag or sticky bit</em> 的简称,有时也称为Sticky 粘滞位<br> <strong>SBIT 目前只对目录有效,用来阻止非文件的属主删除文件.</strong></p></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token string">&quot;&quot;</span>&quot;
创建一个共享文件夹share
root账号依次切换到user01,user02,user03用户下,分别在共享文件夹下创建文件1.txt、2.txt、3.txt
<span class="token string">&quot;&quot;</span>&quot;
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># mkdir /opt/share</span>
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># chmod 777 /opt/share/</span>

<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># useradd user01</span>
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># useradd user02</span>
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># useradd user03</span>

<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># su - user01</span>
<span class="token punctuation">[</span>user01@localhost ~<span class="token punctuation">]</span>$ <span class="token function">touch</span> /opt/share/1.txt
<span class="token punctuation">[</span>user01@localhost ~<span class="token punctuation">]</span>$ <span class="token builtin class-name">exit</span>
登出
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># su - user02</span>
<span class="token punctuation">[</span>user02@localhost ~<span class="token punctuation">]</span>$ <span class="token function">touch</span> /opt/share/2.txt
<span class="token punctuation">[</span>user02@localhost ~<span class="token punctuation">]</span>$ <span class="token builtin class-name">exit</span>
登出
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># su - user03</span>
<span class="token punctuation">[</span>user03@localhost ~<span class="token punctuation">]</span>$ <span class="token function">touch</span> /opt/share/3.txt
<span class="token punctuation">[</span>user03@localhost ~<span class="token punctuation">]</span>$ <span class="token builtin class-name">exit</span>
登出
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># ll /opt/share/</span>
总用量 <span class="token number">0</span>
-rw-rw-r-- <span class="token number">1</span> user01 user01 <span class="token number">0</span> <span class="token number">8</span>月   <span class="token number">2</span> <span class="token number">18</span>:16 <span class="token number">1</span>.txt
-rw-rw-r-- <span class="token number">1</span> user02 user02 <span class="token number">0</span> <span class="token number">8</span>月   <span class="token number">2</span> <span class="token number">18</span>:17 <span class="token number">2</span>.txt
-rw-rw-r-- <span class="token number">1</span> user03 user03 <span class="token number">0</span> <span class="token number">8</span>月   <span class="token number">2</span> <span class="token number">18</span>:17 <span class="token number">3</span>.txt


<span class="token string">&quot;&quot;</span>&quot;
问题来啦,user01-03三个用户不仅能删除自己创建的文件,还能删除其余两个用户创建的文件
按照逻辑,本着共享的原则,user02只能删除自己上传的2.txt文件,不能删除1.txt与3.txt文件<span class="token punctuation">..</span>
<span class="token string">&quot;&quot;</span>&quot;
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># su - user02</span>
上一次登录：二 <span class="token number">8</span>月  <span class="token number">2</span> <span class="token number">18</span>:17:04 CST 2022pts/0 上
<span class="token punctuation">[</span>user02@localhost ~<span class="token punctuation">]</span>$ <span class="token function">rm</span> <span class="token parameter variable">-rf</span> /opt/share/2.txt
<span class="token punctuation">[</span>user02@localhost ~<span class="token punctuation">]</span>$ <span class="token function">rm</span> <span class="token parameter variable">-rf</span> /opt/share/1.txt
<span class="token punctuation">[</span>user02@localhost ~<span class="token punctuation">]</span>$ <span class="token function">rm</span> <span class="token parameter variable">-rf</span> /opt/share/3.txt
<span class="token punctuation">[</span>user02@localhost ~<span class="token punctuation">]</span>$ <span class="token builtin class-name">exit</span>
登出
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># ll /opt/share/</span>
总用量 <span class="token number">0</span>


<span class="token string">&quot;&quot;</span>&quot;
要想让上传者只能删除自己上传的文件,就需要用到粘滞位SBIT
<span class="token string">&quot;&quot;</span>&quot;
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># ll -d /opt/share/</span>
drwxrwxrwx <span class="token number">2</span> root root <span class="token number">6</span> <span class="token number">8</span>月   <span class="token number">2</span> <span class="token number">18</span>:23 /opt/share/
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># chmod o+t /opt/share/</span>
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># ll -d /opt/share/</span>
drwxrwxrwt <span class="token number">2</span> root root <span class="token number">6</span> <span class="token number">8</span>月   <span class="token number">2</span> <span class="token number">18</span>:23 /opt/share/

<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># su - user01 -c &quot;touch /opt/share/1.txt&quot;</span>
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># su - user02 -c &quot;touch /opt/share/2.txt&quot;</span>
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># su - user03 -c &quot;touch /opt/share/3.txt&quot;</span>
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># ll /opt/share/</span>
总用量 <span class="token number">0</span>
-rw-rw-r-- <span class="token number">1</span> user01 user01 <span class="token number">0</span> <span class="token number">8</span>月   <span class="token number">2</span> <span class="token number">18</span>:38 <span class="token number">1</span>.txt
-rw-rw-r-- <span class="token number">1</span> user02 user02 <span class="token number">0</span> <span class="token number">8</span>月   <span class="token number">2</span> <span class="token number">18</span>:39 <span class="token number">2</span>.txt
-rw-rw-r-- <span class="token number">1</span> user03 user03 <span class="token number">0</span> <span class="token number">8</span>月   <span class="token number">2</span> <span class="token number">18</span>:39 <span class="token number">3</span>.txt

<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># su - user02</span>
上一次登录：二 <span class="token number">8</span>月  <span class="token number">2</span> <span class="token number">18</span>:39:05 CST 2022pts/0 上
<span class="token punctuation">[</span>user02@localhost ~<span class="token punctuation">]</span>$ <span class="token function">rm</span> <span class="token parameter variable">-rf</span> /opt/share/1.txt
rm: 无法删除<span class="token string">&quot;/opt/share/1.txt&quot;</span><span class="token builtin class-name">:</span> 不允许的操作
<span class="token punctuation">[</span>user02@localhost ~<span class="token punctuation">]</span>$ <span class="token function">rm</span> <span class="token parameter variable">-rf</span> /opt/share/2.txt
<span class="token punctuation">[</span>user02@localhost ~<span class="token punctuation">]</span>$ <span class="token function">rm</span> <span class="token parameter variable">-rf</span> /opt/share/3.txt
rm: 无法删除<span class="token string">&quot;/opt/share/3.txt&quot;</span><span class="token builtin class-name">:</span> 不允许的操作


Ps: liunx的临时文件夹/tmp 其权限默认就是drwxrwxrwt.
		用来杜绝 a用户往里放个东西,b用户过来将其删掉 的情况<span class="token punctuation">..</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br></div></div><hr> <h2 id="特殊权限总结☆"><a href="#特殊权限总结☆" class="header-anchor">#</a> 特殊权限总结☆</h2> <blockquote><p>有些实验的具体步骤写起来太繁琐了... 直接略过!!Please believe me,我是实验过得到的结论..</p> <p>SUID --  针对属主      --      u+s      --      S+x=s<br>
SGID --  针对属组      --      g+s      --      S+x=s<br>
SBIT  --  针对其他人      --      o+s      --      T+x=t</p> <p><font color="brown">实际上特殊权限和umask都不会怎么用到,但是需要知道是什么!!遇到后不慌..Hhh</font></p></blockquote> <h3 id="没有特殊权限"><a href="#没有特殊权限" class="header-anchor">#</a> 没有特殊权限</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>【没有特殊权限】
  <span class="token string">&quot;&quot;</span>&quot;
  -rwxrw-r-- <span class="token number">1</span> egon IT <span class="token number">2351</span> <span class="token number">7</span>月  <span class="token number">18</span> <span class="token number">18</span>:12 /etc/passwd
  linux系统把文件权限分为了三类:属主、属组、其它人
  一个用户对文件的权限扫描的优先级:
    ○ 先看该用户是否是文件的属主
    ○ 在第一步失败的情况下,再看该用户是否是文件的属组
    ○ 在第二步失败的情况下,该用户属于其他人权限
  <span class="token string">&quot;&quot;</span>&quot;
  <span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span> 若当前登录用户时egon,egon所属的部门是IT部门.
  /etc/passwd的拥有者是egon,那么egon对其拥有的权限是rwx<span class="token punctuation">;</span>哪怕egon属于IT部门,文件拥有者的优先级会高一些.
  <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span> 若当前登录用户不是文件的拥有者,是lili,lili是属于IT部门的,那么lili对/etc/passwd的权限为rw-
  <span class="token operator"><span class="token file-descriptor important">3</span>&gt;</span> 若当前登录用户既不是文件的主人,也不是IT部门里的,那么对其拥有的权限为r--
  
提一嘴,默认情况下登录的普通用户对命令都有x执行权限<span class="token punctuation">..</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="suid-2"><a href="#suid-2" class="header-anchor">#</a> SUID</h3> <blockquote><p>登录用户使用命令时获得该命令属主的权限. 即以命令属主的身份去操控普通文件..<br>
一定要注意一般情况下,该属主面对不同文件时,权限是不尽相同的!!</p></blockquote> <p><strong>前置条件:</strong> 命令文件与命令操作的普通文件的属主都是用户root;属组都是root组.</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>现有三个普通用户 user1、dc、onepiece
【SUID】
    root用户不受权限压制<span class="token operator">!</span>随便折腾命令执行过程需要操作的普通文件<span class="token punctuation">..</span>
    普通文件权限是啥都不用考虑<span class="token punctuation">..</span>就是如此豪恨<span class="token punctuation">..</span><span class="token punctuation">(</span>￣▽￣<span class="token punctuation">)</span>
  <span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span>: <span class="token operator">&lt;</span>root<span class="token operator">&gt;</span>创建一个普通文件,<span class="token variable"><span class="token variable">`</span><span class="token function">chmod</span> 000 普通文件<span class="token variable">`</span></span>
  <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>: <span class="token variable"><span class="token variable">`</span><span class="token function">chmod</span> u+s 命令文件<span class="token variable">`</span></span>
  <span class="token operator"><span class="token file-descriptor important">3</span>&gt;</span>: <span class="token operator">&lt;</span>普通用户<span class="token operator">&gt;</span>可以借助root的权限在使用该命令的过程中操作一些普通文件<span class="token punctuation">..</span>
      eg:对相应命令<span class="token punctuation">(</span>这里以passwd和cat两命令举例<span class="token punctuation">)</span>进行上述步骤后,
         其它用户使用passwd命令会修改/etc/shadow文件<span class="token punctuation">;</span>其它用户使用cat命令可以访问该普通文件
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>前置条件:</strong> 命令文件的属主与命令操作的普通文件的属主 <em>不一样</em> ,且都不是是用户root...</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>举例说明: 现有三个普通用户 user1、dc、onepiece
【SUID】
    /usr/bin/cat 信息为 -rwsr-xr-x. user1 user1
    /opt/test/b.txt 信息为 ----------	<span class="token function">dc</span> <span class="token function">dc</span>
    执行<span class="token variable"><span class="token variable">`</span><span class="token function">cat</span> b.txt<span class="token variable">`</span></span>命令:
        若当前登录用户为onepiece
        <span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span> 会以user1用户的身份运行此命令,user1用户对于b.txt而言,用户角色划分为其它人<span class="token punctuation">..</span>
        <span class="token number">2</span>●<span class="token operator">&gt;</span> so,只有当root用户执行<span class="token variable"><span class="token variable">`</span><span class="token function">chmod</span> <span class="token assign-left variable">a</span><span class="token operator">=</span>-,o<span class="token operator">=</span>r b.txt<span class="token variable">`</span></span>命令后,<span class="token variable"><span class="token variable">`</span><span class="token function">cat</span> b.txt<span class="token variable">`</span></span>才会成功<span class="token punctuation">..</span>
        Ps: 那如果root用户执行<span class="token variable"><span class="token variable">`</span>gpasswd <span class="token parameter variable">-a</span> user1 <span class="token function">dc</span><span class="token variable">`</span></span>将user1用户添加到dc组<span class="token punctuation">;</span>
            root用户再执行<span class="token variable"><span class="token variable">`</span><span class="token function">chmod</span> <span class="token assign-left variable">a</span><span class="token operator">=</span>-,g<span class="token operator">=</span>r b.txt<span class="token variable">`</span></span>命令,<span class="token variable"><span class="token variable">`</span><span class="token function">cat</span> b.txt<span class="token variable">`</span></span>依旧不会成功<span class="token punctuation">..</span>
            证明该身份user1不是b.txt的主人dc,就会直接被归为b.txt其他人一栏<span class="token punctuation">;</span>
            不会检索文件的组,哪怕user1是b.txt属组dc组的成员. 
        若当前登录用户为dc,用户dc肯定是组dc的成员
          实验结果证明运行<span class="token variable"><span class="token variable">`</span><span class="token function">cat</span> b.txt<span class="token variable">`</span></span>时,相当于将b.txt文件的属主临时改为了user1<span class="token punctuation">..</span>
          还是会以dc用户的身份运行此命令<span class="token punctuation">..</span> （<span class="token operator">!</span><span class="token operator">!</span><span class="token operator">!</span><span class="token operator">!</span><span class="token operator">!</span><span class="token operator">!</span>特别注意<span class="token operator">!</span><span class="token operator">!</span><span class="token operator">!</span><span class="token operator">!</span><span class="token operator">!</span><span class="token operator">!</span>）
          ●也就是说,只有当root用户执行<span class="token variable"><span class="token variable">`</span><span class="token function">chmod</span> <span class="token assign-left variable">a</span><span class="token operator">=</span>-,g<span class="token operator">=</span>r b.txt<span class="token variable">`</span></span>命令后,<span class="token variable"><span class="token variable">`</span><span class="token function">cat</span> b.txt<span class="token variable">`</span></span>会成功<span class="token punctuation">..</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p><strong>前置条件:</strong> 命令文件的属主与命令操作的普通文件的属主 <em>一样</em> ,但都不是用户root...</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>举例说明: 现有三个普通用户 dc、onepiece
【SUID】
    /usr/bin/cat 信息为 -rwsr-xr-x. <span class="token function">dc</span> root
    /opt/test/b.txt 信息为 ----------	<span class="token function">dc</span> <span class="token function">dc</span>
    无论当前登录用户是dc还是onepiece,都会以dc用户的身份执行<span class="token variable"><span class="token variable">`</span><span class="token function">cat</span> b.txt<span class="token variable">`</span></span>命令
    ●意味着只有当root用户执行<span class="token variable"><span class="token variable">`</span><span class="token function">chmod</span> <span class="token assign-left variable">a</span><span class="token operator">=</span>-,u<span class="token operator">=</span>r b.txt<span class="token variable">`</span></span>命令后,不管登录用户是谁,<span class="token variable"><span class="token variable">`</span><span class="token function">cat</span> b.txt<span class="token variable">`</span></span>都会成功<span class="token punctuation">..</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="sgid、sbit"><a href="#sgid、sbit" class="header-anchor">#</a> SGID、SBIT</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>【SGID针对普通文件】
    前提:这里实验环境 -- 命令文件与命令操作的普通文件的属主都是用户root<span class="token punctuation">;</span>属组都是root组.<span class="token punctuation">(</span>其它情况没有验证<span class="token punctuation">)</span> 
    作用于普通文件时,会以命令所属组的权限去操控普通文件<span class="token punctuation">..</span>与SUID类似<span class="token punctuation">..</span>
    root组的权限可不等同于root用户的权限<span class="token punctuation">..</span>所以要改变下root组针对目标普通文件的权限<span class="token operator">!</span>
  <span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span>: <span class="token operator">&lt;</span>root<span class="token operator">&gt;</span>创建一个普通文件,<span class="token variable"><span class="token variable">`</span><span class="token function">chmod</span> 000 普通文件<span class="token variable">`</span></span>
  <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>: <span class="token variable"><span class="token variable">`</span><span class="token function">chmod</span> g+s 命令文件<span class="token variable">`</span></span>
  <span class="token operator"><span class="token file-descriptor important">3</span>&gt;</span>: <span class="token operator">&lt;</span>普通用户<span class="token operator">&gt;</span>只能用该普通文件的属组root组的权限操作该普通文件<span class="token punctuation">..</span>
  <span class="token operator"><span class="token file-descriptor important">4</span>&gt;</span>: <span class="token variable"><span class="token variable">`</span><span class="token function">chmod</span> g+r 普通文件<span class="token variable">`</span></span>
  举例说明:
    /usr/bin/cat -rwxr-sr-x. root root
    /opt/test/1.txt ---------- root root
    root用户改变root组针对1.txt的权限: <span class="token variable"><span class="token variable">`</span><span class="token function">chmod</span> g+r /opt/test/1.txt<span class="token variable">`</span></span> ----r-----
    所有用户在运行cat命令时都拥有root组权限:  <span class="token variable"><span class="token variable">`</span><span class="token function">cat</span> /opt/test/1.txt<span class="token variable">`</span></span> 成功.

【SGID针对目录文件】 完成属组的继承<span class="token punctuation">..</span>
    root用户: <span class="token variable"><span class="token variable">`</span><span class="token function">chmod</span> g+s /opt/aaa<span class="token variable">`</span></span>  drwxr-srwx
    所有用户在目录文件/opt/aaa下创建的文件夹或文件的属组都会与/opt/aaa的属组保持一致
		
		
【SBIT】
    权限信息中最后一位t表明该目录被设置了SBIT权限.
    SBIT对目录的作用是:
       当用户在该目录下创建新文件或目录时,仅有自己和root才有权力删除,主要作用于一个共享的文件夹
    root用户: <span class="token variable"><span class="token variable">`</span><span class="token function">chmod</span> o+t /opt/share<span class="token variable">`</span></span>  drwxrwxrwt
    其它用户在共享文件夹/opt/share里只能删除自己创建的文件
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><hr> <h2 id="umask"><a href="#umask" class="header-anchor">#</a> umask</h2> <blockquote><p><strong>新建的文件、目录文件的默认权限是由umask决定的</strong></p></blockquote> <p><font color="gray">Ps: 联想一下,netmask掩码与ip地址进行与运算; umask也需要搭配使用..</font></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token string">&quot;&quot;</span>&quot;
root用户: 创建文件默认权限644<span class="token punctuation">;</span>创建文件夹默认权限755
<span class="token string">&quot;&quot;</span>&quot;
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># touch a.txt</span>
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># mkdir aaa</span>
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># ll</span>
总用量 <span class="token number">0</span>
drwxr-xr-x <span class="token number">2</span> root root <span class="token number">6</span> <span class="token number">8</span>月   <span class="token number">2</span> <span class="token number">20</span>:06 aaa
-rw-r--r-- <span class="token number">1</span> root root <span class="token number">0</span> <span class="token number">8</span>月   <span class="token number">2</span> <span class="token number">20</span>:05 a.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="umask规则"><a href="#umask规则" class="header-anchor">#</a> umask规则</h3> <p>规则如下:<br>
1&gt; uid&gt;199并且属主与数组相等的用户下 --- umask: 0002;<br>
     除1之外的其他用户,比如root用户 -- umask: <strong>0022</strong><br>
2&gt; umask有四位,<strong>第一位与特殊权限有关</strong>.. 举例: 给a.txt (<em>-rw-r--r--</em>)文件加上suid、sgid、sticky..(<em>-rwSr-Sr-T</em>)<br> <code>chmod u+s,g+s,o+t a.txt</code><br> <code>chmod 7644 a.txt</code> <font color="brown"><strong>u、suid -- 4 ; g、sgid -- 2 ; o、sbit -- 1.</strong></font><br>
2&gt; linux中<strong>文件默认权限为666</strong>、<strong>目录权限默认为777</strong>, 会与umask后三位进行运算后得到最后的默认值..<br>
     △ <strong>文件权限计算方法</strong>: 偶数位直接相减, 奇数位相减后加1<br>
          即umask位数上的值为偶数,直接被减; 若umask位数上的值为奇数,被减后加一;<br>
          eg: umask 0325; 创建文件 (6-3+1 6-2 6-5+1) = 442<br>
     △ <strong>目录权限计算方法</strong>：直接相减即可<br>
          eg: umask 0325; 创建目录 (7-3 7-2 7-5) = 452</p> <h3 id="临时-永久设置"><a href="#临时-永久设置" class="header-anchor">#</a> 临时/永久设置</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token string">&quot;&quot;</span>&quot;
临时修改umask值
<span class="token string">&quot;&quot;</span>&quot;
<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">umask</span> 000<span class="token variable">`</span></span>

<span class="token string">&quot;&quot;</span>&quot;
永久修改umask值 -- 即修改对应的文件
Ps: 没必要动它<span class="token punctuation">..</span> Hhh
<span class="token string">&quot;&quot;</span>&quot;
<span class="token comment">## 或者vim /etc/bashrc 内容是一样的</span>
<span class="token punctuation">[</span>root@localhost opt<span class="token punctuation">]</span><span class="token comment"># vim /etc/profile  </span>
<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token environment constant">$UID</span> <span class="token parameter variable">-gt</span> <span class="token number">199</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">`</span><span class="token function">id</span> <span class="token parameter variable">-gn</span><span class="token variable">`</span></span>&quot;</span> <span class="token operator">=</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">`</span><span class="token function">id</span> <span class="token parameter variable">-un</span><span class="token variable">`</span></span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
   <span class="token builtin class-name">umask</span> 002    // uid大于等于199的默认umask值,表示一些系统用户和所有普通用户
<span class="token keyword">else</span>
   <span class="token builtin class-name">umask</span> 022    // uid小于199的默认umask值,包含root用户
<span class="token keyword">fi</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><hr></div></div> <!----> <div class="page-edit"><!----> <!----> <!----></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/15d340/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">权限管理之用户与组</div></a> <a href="/pages/7ba656/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">权限管理之ACL</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/15d340/" class="prev">权限管理之用户与组</a></span> <span class="next"><a href="/pages/7ba656/">权限管理之ACL</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/8sk2b3/"><div>
            搜索相关
            <!----></div></a> <span class="date">03-22</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/2kn2p2/"><div>
            CURD
            <!----></div></a> <span class="date">03-20</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/1kn1m1/"><div>
            自动生成
            <!----></div></a> <span class="date">03-15</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="https://github.com/OnePieceDC" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://www.cnblogs.com/DC0307/" title="博客园" target="_blank" class="iconfont icon-bokeyuan"></a><a href="https://music.163.com/#/song?id=1854188649" title="听音乐" target="_blank" class="iconfont icon-erji"></a><a href="https://www.jianshu.com/u/5310eb537315" title="简书" target="_blank" class="iconfont icon-jianshu"></a><a href="mailto:1415806497@qq.com" title="QQ" target="_blank" class="iconfont icon-youjian"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2023-2024
    <span>DC | One Piece</span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <div class="body-bg" style="background:url() center center / cover no-repeat;opacity:0.5;"></div> <!----> <!----></div><div class="global-ui"><!----><div id="goTop" class="hide-cat" data-v-8ccb5928></div><div></div><canvas id="vuepress-canvas-cursor"></canvas><div></div><div></div></div></div>
    <script src="/assets/js/app.ac54adc6.js" defer></script><script src="/assets/js/4.7ddc74e3.js" defer></script><script src="/assets/js/1.a0c4ff1b.js" defer></script><script src="/assets/js/3.8b03321d.js" defer></script><script src="/assets/js/164.5d8b2cb7.js" defer></script><script src="/assets/js/104.cae2d944.js" defer></script><script src="/assets/js/184.46eabf07.js" defer></script>
  </body>
</html>
