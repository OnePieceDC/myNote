<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>饶头训练 | DC&#39;s blog</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="/fonts/iconfont.css">
    <meta name="description" content="人类终将毁灭,世界属于三体!">
    <meta name="keywords" content="DC的个人博客.">
    
    <link rel="preload" href="/assets/css/0.styles.66b92039.css" as="style"><link rel="preload" href="/assets/js/app.ac54adc6.js" as="script"><link rel="preload" href="/assets/js/4.7ddc74e3.js" as="script"><link rel="preload" href="/assets/js/1.a0c4ff1b.js" as="script"><link rel="preload" href="/assets/js/3.8b03321d.js" as="script"><link rel="preload" href="/assets/js/219.628ee193.js" as="script"><link rel="preload" href="/assets/js/104.cae2d944.js" as="script"><link rel="preload" href="/assets/js/184.46eabf07.js" as="script"><link rel="prefetch" href="/assets/js/10.a91ae011.js"><link rel="prefetch" href="/assets/js/100.2e8ea472.js"><link rel="prefetch" href="/assets/js/101.46f57a02.js"><link rel="prefetch" href="/assets/js/102.f51bcd80.js"><link rel="prefetch" href="/assets/js/103.3f003e0e.js"><link rel="prefetch" href="/assets/js/105.6c6ebc28.js"><link rel="prefetch" href="/assets/js/106.47dc8889.js"><link rel="prefetch" href="/assets/js/107.6b5602b4.js"><link rel="prefetch" href="/assets/js/108.46f0c21d.js"><link rel="prefetch" href="/assets/js/109.0f1168a5.js"><link rel="prefetch" href="/assets/js/11.e6a94228.js"><link rel="prefetch" href="/assets/js/110.6a961498.js"><link rel="prefetch" href="/assets/js/111.c6f27c88.js"><link rel="prefetch" href="/assets/js/112.9ee3d3bb.js"><link rel="prefetch" href="/assets/js/113.82b72aa0.js"><link rel="prefetch" href="/assets/js/114.7487460e.js"><link rel="prefetch" href="/assets/js/115.cd079d0a.js"><link rel="prefetch" href="/assets/js/116.b6b829eb.js"><link rel="prefetch" href="/assets/js/117.89d9336c.js"><link rel="prefetch" href="/assets/js/118.467c4437.js"><link rel="prefetch" href="/assets/js/119.c4b2ac40.js"><link rel="prefetch" href="/assets/js/12.9d3501e4.js"><link rel="prefetch" href="/assets/js/120.5ff31c09.js"><link rel="prefetch" href="/assets/js/121.2e59c3a5.js"><link rel="prefetch" href="/assets/js/122.a66096cf.js"><link rel="prefetch" href="/assets/js/123.4885ba5f.js"><link rel="prefetch" href="/assets/js/124.cacc66be.js"><link rel="prefetch" href="/assets/js/125.dc5b30fe.js"><link rel="prefetch" href="/assets/js/126.4e21eb5e.js"><link rel="prefetch" href="/assets/js/127.cb36a9bf.js"><link rel="prefetch" href="/assets/js/128.ce38358e.js"><link rel="prefetch" href="/assets/js/129.e5f414eb.js"><link rel="prefetch" href="/assets/js/13.ca017a68.js"><link rel="prefetch" href="/assets/js/130.17b597f0.js"><link rel="prefetch" href="/assets/js/131.e1ded2dc.js"><link rel="prefetch" href="/assets/js/132.aae1c627.js"><link rel="prefetch" href="/assets/js/133.73cecdb3.js"><link rel="prefetch" href="/assets/js/134.80cf38a0.js"><link rel="prefetch" href="/assets/js/135.735ed588.js"><link rel="prefetch" href="/assets/js/136.91f8db08.js"><link rel="prefetch" href="/assets/js/137.d6fb8bda.js"><link rel="prefetch" href="/assets/js/138.75cafe73.js"><link rel="prefetch" href="/assets/js/139.b01bf0db.js"><link rel="prefetch" href="/assets/js/14.ee2605b5.js"><link rel="prefetch" href="/assets/js/140.ff0a7911.js"><link rel="prefetch" href="/assets/js/141.c69e7f54.js"><link rel="prefetch" href="/assets/js/142.997b03ac.js"><link rel="prefetch" href="/assets/js/143.e40faea8.js"><link rel="prefetch" href="/assets/js/144.369f23e5.js"><link rel="prefetch" href="/assets/js/145.1268424d.js"><link rel="prefetch" href="/assets/js/146.94c65c4a.js"><link rel="prefetch" href="/assets/js/147.05fe6a36.js"><link rel="prefetch" href="/assets/js/148.327cc29d.js"><link rel="prefetch" href="/assets/js/149.90068676.js"><link rel="prefetch" href="/assets/js/15.42e0a0e4.js"><link rel="prefetch" href="/assets/js/150.b4b780bb.js"><link rel="prefetch" href="/assets/js/151.b4611012.js"><link rel="prefetch" href="/assets/js/152.4d2c8246.js"><link rel="prefetch" href="/assets/js/153.f32dfa58.js"><link rel="prefetch" href="/assets/js/154.b79a78fb.js"><link rel="prefetch" href="/assets/js/155.6ad2865c.js"><link rel="prefetch" href="/assets/js/156.fd49a1af.js"><link rel="prefetch" href="/assets/js/157.55113800.js"><link rel="prefetch" href="/assets/js/158.af321bc9.js"><link rel="prefetch" href="/assets/js/159.37d9c659.js"><link rel="prefetch" href="/assets/js/16.007f45b3.js"><link rel="prefetch" href="/assets/js/160.7a3b5a9a.js"><link rel="prefetch" href="/assets/js/161.fc1fbea8.js"><link rel="prefetch" href="/assets/js/162.2f8d3d1c.js"><link rel="prefetch" href="/assets/js/163.aa889940.js"><link rel="prefetch" href="/assets/js/164.5d8b2cb7.js"><link rel="prefetch" href="/assets/js/165.44d4a9b5.js"><link rel="prefetch" href="/assets/js/166.c1b4c4d4.js"><link rel="prefetch" href="/assets/js/167.0c39929e.js"><link rel="prefetch" href="/assets/js/168.fede035a.js"><link rel="prefetch" href="/assets/js/169.ff940d50.js"><link rel="prefetch" href="/assets/js/17.7395c644.js"><link rel="prefetch" href="/assets/js/170.b6fcb3bf.js"><link rel="prefetch" href="/assets/js/171.2b927a7c.js"><link rel="prefetch" href="/assets/js/172.b07a90a1.js"><link rel="prefetch" href="/assets/js/173.367352bf.js"><link rel="prefetch" href="/assets/js/174.4ea4e20f.js"><link rel="prefetch" href="/assets/js/175.d9679b61.js"><link rel="prefetch" href="/assets/js/176.f7804143.js"><link rel="prefetch" href="/assets/js/177.c5d1e680.js"><link rel="prefetch" href="/assets/js/178.808293fa.js"><link rel="prefetch" href="/assets/js/179.2acf6b3c.js"><link rel="prefetch" href="/assets/js/18.46f9153d.js"><link rel="prefetch" href="/assets/js/180.ddf3ecf7.js"><link rel="prefetch" href="/assets/js/181.4da0855c.js"><link rel="prefetch" href="/assets/js/182.591d135a.js"><link rel="prefetch" href="/assets/js/183.9d08f9fe.js"><link rel="prefetch" href="/assets/js/185.ee1c8428.js"><link rel="prefetch" href="/assets/js/186.c7b19133.js"><link rel="prefetch" href="/assets/js/187.52945990.js"><link rel="prefetch" href="/assets/js/188.a1d395c5.js"><link rel="prefetch" href="/assets/js/189.5b66165e.js"><link rel="prefetch" href="/assets/js/19.2db19edb.js"><link rel="prefetch" href="/assets/js/190.265a75de.js"><link rel="prefetch" href="/assets/js/191.b4c65143.js"><link rel="prefetch" href="/assets/js/192.cc4d4115.js"><link rel="prefetch" href="/assets/js/193.fa02ecc5.js"><link rel="prefetch" href="/assets/js/194.b0c9ad53.js"><link rel="prefetch" href="/assets/js/195.eda8cd34.js"><link rel="prefetch" href="/assets/js/196.cbae4dc6.js"><link rel="prefetch" href="/assets/js/197.693b1b85.js"><link rel="prefetch" href="/assets/js/198.8213665b.js"><link rel="prefetch" href="/assets/js/199.ddf0036d.js"><link rel="prefetch" href="/assets/js/2.4c15b693.js"><link rel="prefetch" href="/assets/js/20.6742e8ae.js"><link rel="prefetch" href="/assets/js/200.340df508.js"><link rel="prefetch" href="/assets/js/201.7431c15b.js"><link rel="prefetch" href="/assets/js/202.217b2b38.js"><link rel="prefetch" href="/assets/js/203.06c6a93d.js"><link rel="prefetch" href="/assets/js/204.a068a898.js"><link rel="prefetch" href="/assets/js/205.9361d3f5.js"><link rel="prefetch" href="/assets/js/206.886beca0.js"><link rel="prefetch" href="/assets/js/207.2278bda8.js"><link rel="prefetch" href="/assets/js/208.db0acc0d.js"><link rel="prefetch" href="/assets/js/209.0e05b204.js"><link rel="prefetch" href="/assets/js/21.fd552a4e.js"><link rel="prefetch" href="/assets/js/210.4c730041.js"><link rel="prefetch" href="/assets/js/211.417dbee1.js"><link rel="prefetch" href="/assets/js/212.eef4f4a3.js"><link rel="prefetch" href="/assets/js/213.ab742b0b.js"><link rel="prefetch" href="/assets/js/214.a57228de.js"><link rel="prefetch" href="/assets/js/215.37f52459.js"><link rel="prefetch" href="/assets/js/216.2f110f92.js"><link rel="prefetch" href="/assets/js/217.09654311.js"><link rel="prefetch" href="/assets/js/218.a7568950.js"><link rel="prefetch" href="/assets/js/22.465a76d2.js"><link rel="prefetch" href="/assets/js/220.c5df9186.js"><link rel="prefetch" href="/assets/js/221.101ddb09.js"><link rel="prefetch" href="/assets/js/222.db210e3c.js"><link rel="prefetch" href="/assets/js/223.429cbf14.js"><link rel="prefetch" href="/assets/js/224.aa002868.js"><link rel="prefetch" href="/assets/js/225.79a40017.js"><link rel="prefetch" href="/assets/js/226.3e08228b.js"><link rel="prefetch" href="/assets/js/227.a09dd4b4.js"><link rel="prefetch" href="/assets/js/228.f930c492.js"><link rel="prefetch" href="/assets/js/229.f639a9e4.js"><link rel="prefetch" href="/assets/js/23.df6831af.js"><link rel="prefetch" href="/assets/js/230.e8ac7aad.js"><link rel="prefetch" href="/assets/js/231.99501214.js"><link rel="prefetch" href="/assets/js/232.e2932792.js"><link rel="prefetch" href="/assets/js/233.43dfa689.js"><link rel="prefetch" href="/assets/js/234.7951f9c4.js"><link rel="prefetch" href="/assets/js/235.1dc96b6c.js"><link rel="prefetch" href="/assets/js/236.40b8d4e4.js"><link rel="prefetch" href="/assets/js/237.75a692de.js"><link rel="prefetch" href="/assets/js/238.cc9d9ac1.js"><link rel="prefetch" href="/assets/js/239.4616a566.js"><link rel="prefetch" href="/assets/js/24.b68dc734.js"><link rel="prefetch" href="/assets/js/240.dd825147.js"><link rel="prefetch" href="/assets/js/241.85e3219b.js"><link rel="prefetch" href="/assets/js/242.bf4123c4.js"><link rel="prefetch" href="/assets/js/243.ce68f4f0.js"><link rel="prefetch" href="/assets/js/244.e2598d4d.js"><link rel="prefetch" href="/assets/js/245.2c696827.js"><link rel="prefetch" href="/assets/js/246.2c44a497.js"><link rel="prefetch" href="/assets/js/247.02405fce.js"><link rel="prefetch" href="/assets/js/248.6727bdf6.js"><link rel="prefetch" href="/assets/js/249.4901f575.js"><link rel="prefetch" href="/assets/js/25.d639c65c.js"><link rel="prefetch" href="/assets/js/250.c922c9ea.js"><link rel="prefetch" href="/assets/js/251.b1350ead.js"><link rel="prefetch" href="/assets/js/252.8295c5ea.js"><link rel="prefetch" href="/assets/js/253.b0a9ba20.js"><link rel="prefetch" href="/assets/js/254.d208b848.js"><link rel="prefetch" href="/assets/js/255.2cfb6ad3.js"><link rel="prefetch" href="/assets/js/256.e7687a81.js"><link rel="prefetch" href="/assets/js/257.db329d54.js"><link rel="prefetch" href="/assets/js/258.be75b1f9.js"><link rel="prefetch" href="/assets/js/259.67500f7e.js"><link rel="prefetch" href="/assets/js/26.9db429a9.js"><link rel="prefetch" href="/assets/js/260.73609cfa.js"><link rel="prefetch" href="/assets/js/261.22fc7c08.js"><link rel="prefetch" href="/assets/js/262.2c620ccd.js"><link rel="prefetch" href="/assets/js/263.e0ce1454.js"><link rel="prefetch" href="/assets/js/264.7fe82318.js"><link rel="prefetch" href="/assets/js/265.537d06c5.js"><link rel="prefetch" href="/assets/js/266.901695a7.js"><link rel="prefetch" href="/assets/js/267.8eb24590.js"><link rel="prefetch" href="/assets/js/268.a21e44dc.js"><link rel="prefetch" href="/assets/js/269.33e6ce5d.js"><link rel="prefetch" href="/assets/js/27.2296e284.js"><link rel="prefetch" href="/assets/js/270.31507ac3.js"><link rel="prefetch" href="/assets/js/271.b9406b42.js"><link rel="prefetch" href="/assets/js/272.0acaba6f.js"><link rel="prefetch" href="/assets/js/273.c2e359b0.js"><link rel="prefetch" href="/assets/js/274.a80428a6.js"><link rel="prefetch" href="/assets/js/28.7e4f4dc1.js"><link rel="prefetch" href="/assets/js/29.ba75f79a.js"><link rel="prefetch" href="/assets/js/30.16cd3622.js"><link rel="prefetch" href="/assets/js/31.54ed5bc1.js"><link rel="prefetch" href="/assets/js/32.b2fbba6a.js"><link rel="prefetch" href="/assets/js/33.f7ff0107.js"><link rel="prefetch" href="/assets/js/34.4b2cea7d.js"><link rel="prefetch" href="/assets/js/35.1159e74c.js"><link rel="prefetch" href="/assets/js/36.0b6296f3.js"><link rel="prefetch" href="/assets/js/37.fc67879e.js"><link rel="prefetch" href="/assets/js/38.637afaf8.js"><link rel="prefetch" href="/assets/js/39.748a78f3.js"><link rel="prefetch" href="/assets/js/40.4fede9bb.js"><link rel="prefetch" href="/assets/js/41.c7f0b087.js"><link rel="prefetch" href="/assets/js/42.5b1a487d.js"><link rel="prefetch" href="/assets/js/43.59275b93.js"><link rel="prefetch" href="/assets/js/44.b18a4c94.js"><link rel="prefetch" href="/assets/js/45.bc8f7cb3.js"><link rel="prefetch" href="/assets/js/46.6a4ec89f.js"><link rel="prefetch" href="/assets/js/47.e1e129e6.js"><link rel="prefetch" href="/assets/js/48.c284ce23.js"><link rel="prefetch" href="/assets/js/49.17e5dd65.js"><link rel="prefetch" href="/assets/js/5.e3d12916.js"><link rel="prefetch" href="/assets/js/50.34c3ac45.js"><link rel="prefetch" href="/assets/js/51.035f7031.js"><link rel="prefetch" href="/assets/js/52.e9ef227a.js"><link rel="prefetch" href="/assets/js/53.ecbb032d.js"><link rel="prefetch" href="/assets/js/54.e9af4cfe.js"><link rel="prefetch" href="/assets/js/55.7e71402b.js"><link rel="prefetch" href="/assets/js/56.511071fe.js"><link rel="prefetch" href="/assets/js/57.13b7fe79.js"><link rel="prefetch" href="/assets/js/58.e51f8b0e.js"><link rel="prefetch" href="/assets/js/59.a1b8bdb7.js"><link rel="prefetch" href="/assets/js/6.5fc3f358.js"><link rel="prefetch" href="/assets/js/60.fd7e1c08.js"><link rel="prefetch" href="/assets/js/61.0daf2361.js"><link rel="prefetch" href="/assets/js/62.04632944.js"><link rel="prefetch" href="/assets/js/63.f0dd5615.js"><link rel="prefetch" href="/assets/js/64.89a4b562.js"><link rel="prefetch" href="/assets/js/65.6764ff0c.js"><link rel="prefetch" href="/assets/js/66.049bdee1.js"><link rel="prefetch" href="/assets/js/67.b0d4ec16.js"><link rel="prefetch" href="/assets/js/68.46d97067.js"><link rel="prefetch" href="/assets/js/69.f540f0da.js"><link rel="prefetch" href="/assets/js/7.ce17dd73.js"><link rel="prefetch" href="/assets/js/70.17d8f857.js"><link rel="prefetch" href="/assets/js/71.b2a166a0.js"><link rel="prefetch" href="/assets/js/72.1c17a875.js"><link rel="prefetch" href="/assets/js/73.dac8984b.js"><link rel="prefetch" href="/assets/js/74.5bbc33ac.js"><link rel="prefetch" href="/assets/js/75.483644c7.js"><link rel="prefetch" href="/assets/js/76.de5461ab.js"><link rel="prefetch" href="/assets/js/77.7fa90702.js"><link rel="prefetch" href="/assets/js/78.f41853b8.js"><link rel="prefetch" href="/assets/js/79.598b50e6.js"><link rel="prefetch" href="/assets/js/80.61d2d23a.js"><link rel="prefetch" href="/assets/js/81.d310c6e4.js"><link rel="prefetch" href="/assets/js/82.22aa814c.js"><link rel="prefetch" href="/assets/js/83.f493eba4.js"><link rel="prefetch" href="/assets/js/84.3a32a1eb.js"><link rel="prefetch" href="/assets/js/85.2f47134e.js"><link rel="prefetch" href="/assets/js/86.74e65a77.js"><link rel="prefetch" href="/assets/js/87.e87bff96.js"><link rel="prefetch" href="/assets/js/88.aabc97af.js"><link rel="prefetch" href="/assets/js/89.b0945d87.js"><link rel="prefetch" href="/assets/js/90.630f62d3.js"><link rel="prefetch" href="/assets/js/91.ed816647.js"><link rel="prefetch" href="/assets/js/92.19065457.js"><link rel="prefetch" href="/assets/js/93.a0fe1919.js"><link rel="prefetch" href="/assets/js/94.51e48580.js"><link rel="prefetch" href="/assets/js/95.e591bede.js"><link rel="prefetch" href="/assets/js/96.1723f1d6.js"><link rel="prefetch" href="/assets/js/97.02bbb7d4.js"><link rel="prefetch" href="/assets/js/98.a3625ba6.js"><link rel="prefetch" href="/assets/js/99.1accbf48.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.5959bfd2.js">
    <link rel="stylesheet" href="/assets/css/0.styles.66b92039.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu have-body-img"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/nav-logo.png" alt="DC's blog" class="logo"> <span class="site-name can-hide">DC's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="IT必备" class="dropdown-title"><a href="/IT/" class="link-title">IT必备</a> <span class="title" style="display:none;">IT必备</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/IT/basis/" class="nav-link">计算机基础</a></li><li class="dropdown-item"><!----> <a href="/IT/linux/" class="nav-link">linux基础</a></li><li class="dropdown-item"><!----> <a href="/IT/mysql/" class="nav-link">mysql</a></li><li class="dropdown-item"><!----> <a href="/IT/git/" class="nav-link">git</a></li><li class="dropdown-item"><!----> <a href="/IT/structure/" class="nav-link">数据结构与算法</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Python" class="dropdown-title"><a href="/python/" class="link-title">Python</a> <span class="title" style="display:none;">Python</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/python/basis/" class="nav-link">opp</a></li><li class="dropdown-item"><!----> <a href="/python/oop/" class="nav-link">oop</a></li><li class="dropdown-item"><!----> <a href="/python/Network_concurrency/" class="nav-link">网络并发编程</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/front_end/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front_end/html/" class="nav-link">html</a></li><li class="dropdown-item"><!----> <a href="/front_end/css/" class="nav-link">css</a></li><li class="dropdown-item"><!----> <a href="/front_end/js/" class="nav-link">javascript</a></li><li class="dropdown-item"><!----> <a href="/front_end/jquery/" class="nav-link">jquery</a></li><li class="dropdown-item"><!----> <a href="/front_end/ui/" class="nav-link">UI</a></li><li class="dropdown-item"><!----> <a href="/front_end/vue/" class="nav-link">vue</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><a href="/python_web/" class="link-title">后端</a> <span class="title" style="display:none;">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/python_web/django/" class="nav-link">Django</a></li><li class="dropdown-item"><!----> <a href="/python_web/drf/" class="nav-link">drf</a></li><li class="dropdown-item"><!----> <a href="/python_web/drf_re/" class="nav-link">drf_re</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="实战" class="dropdown-title"><a href="/project/" class="link-title">实战</a> <span class="title" style="display:none;">实战</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>前后端不分离</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/project/bbs/" class="nav-link">BBS</a></li><li class="dropdown-subitem"><a href="/project/order/" class="nav-link">订单系统</a></li><li class="dropdown-subitem"><a href="/project/crm/" class="nav-link">CRM</a></li></ul></li><li class="dropdown-item"><h4>前后端分离</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/project/supply/" class="nav-link">供应链系统</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><a href="/other/" class="link-title">其他</a> <span class="title" style="display:none;">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/other/essays/" class="nav-link">杂文</a></li><li class="dropdown-item"><h4>关于我</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/about/" class="nav-link">me</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><!----> <span class="title" style="display:;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/OnePieceDC/" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="/img/avatar.gif"> <div class="blogger-info"><h3>DC</h3> <span>愿我一生欢喜,不为世俗所及.</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="IT必备" class="dropdown-title"><a href="/IT/" class="link-title">IT必备</a> <span class="title" style="display:none;">IT必备</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/IT/basis/" class="nav-link">计算机基础</a></li><li class="dropdown-item"><!----> <a href="/IT/linux/" class="nav-link">linux基础</a></li><li class="dropdown-item"><!----> <a href="/IT/mysql/" class="nav-link">mysql</a></li><li class="dropdown-item"><!----> <a href="/IT/git/" class="nav-link">git</a></li><li class="dropdown-item"><!----> <a href="/IT/structure/" class="nav-link">数据结构与算法</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Python" class="dropdown-title"><a href="/python/" class="link-title">Python</a> <span class="title" style="display:none;">Python</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/python/basis/" class="nav-link">opp</a></li><li class="dropdown-item"><!----> <a href="/python/oop/" class="nav-link">oop</a></li><li class="dropdown-item"><!----> <a href="/python/Network_concurrency/" class="nav-link">网络并发编程</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/front_end/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front_end/html/" class="nav-link">html</a></li><li class="dropdown-item"><!----> <a href="/front_end/css/" class="nav-link">css</a></li><li class="dropdown-item"><!----> <a href="/front_end/js/" class="nav-link">javascript</a></li><li class="dropdown-item"><!----> <a href="/front_end/jquery/" class="nav-link">jquery</a></li><li class="dropdown-item"><!----> <a href="/front_end/ui/" class="nav-link">UI</a></li><li class="dropdown-item"><!----> <a href="/front_end/vue/" class="nav-link">vue</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><a href="/python_web/" class="link-title">后端</a> <span class="title" style="display:none;">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/python_web/django/" class="nav-link">Django</a></li><li class="dropdown-item"><!----> <a href="/python_web/drf/" class="nav-link">drf</a></li><li class="dropdown-item"><!----> <a href="/python_web/drf_re/" class="nav-link">drf_re</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="实战" class="dropdown-title"><a href="/project/" class="link-title">实战</a> <span class="title" style="display:none;">实战</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>前后端不分离</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/project/bbs/" class="nav-link">BBS</a></li><li class="dropdown-subitem"><a href="/project/order/" class="nav-link">订单系统</a></li><li class="dropdown-subitem"><a href="/project/crm/" class="nav-link">CRM</a></li></ul></li><li class="dropdown-item"><h4>前后端分离</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/project/supply/" class="nav-link">供应链系统</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><a href="/other/" class="link-title">其他</a> <span class="title" style="display:none;">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/other/essays/" class="nav-link">杂文</a></li><li class="dropdown-item"><h4>关于我</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/about/" class="nav-link">me</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><!----> <span class="title" style="display:;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/OnePieceDC/" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>python面向过程</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/7db416/" class="sidebar-link">Python语言介绍</a></li><li><a href="/pages/3beb21/" class="sidebar-link">基本运算符和流程控制</a></li><li><a href="/pages/e8386b/" class="sidebar-link">数据类型之序列</a></li><li><a href="/pages/49737b/" class="sidebar-link">数据类型之哈希</a></li><li><a href="/pages/17fb72/" class="sidebar-link">函数基础</a></li><li><a href="/pages/bd8ead/" class="sidebar-link">函数高级</a></li><li><a href="/pages/1654ca/" class="sidebar-link">函数进阶</a></li><li><a href="/pages/3134ef/" class="sidebar-link">文件处理</a></li><li><a href="/pages/41e853/" class="sidebar-link">必用模块</a></li><li><a href="/pages/fe6035/" class="sidebar-link">常用模块</a></li><li><a href="/pages/9cb17f/" class="sidebar-link">模块导入与包</a></li><li><a href="/pages/d4c919/" class="sidebar-link">开胃小菜</a></li><li><a href="/pages/d74f40/" aria-current="page" class="active sidebar-link">饶头训练</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/d74f40/#数据构建与解析" class="sidebar-link">数据构建与解析</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/d74f40/#筛选数据" class="sidebar-link">筛选数据</a></li><li class="sidebar-sub-header level3"><a href="/pages/d74f40/#元组元素命名" class="sidebar-link">元组元素命名</a></li><li class="sidebar-sub-header level3"><a href="/pages/d74f40/#字典排序" class="sidebar-link">字典排序</a></li><li class="sidebar-sub-header level3"><a href="/pages/d74f40/#元素频度" class="sidebar-link">元素频度</a></li><li class="sidebar-sub-header level3"><a href="/pages/d74f40/#字典公共键" class="sidebar-link">字典公共键</a></li><li class="sidebar-sub-header level3"><a href="/pages/d74f40/#字典无序" class="sidebar-link">字典无序</a></li><li class="sidebar-sub-header level3"><a href="/pages/d74f40/#可迭代对象切片" class="sidebar-link">可迭代对象切片</a></li><li class="sidebar-sub-header level3"><a href="/pages/d74f40/#历史记录功能" class="sidebar-link">历史记录功能</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/d74f40/#字符串处理" class="sidebar-link">字符串处理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/d74f40/#拆分字符串" class="sidebar-link">拆分字符串</a></li><li class="sidebar-sub-header level3"><a href="/pages/d74f40/#调整文本格式" class="sidebar-link">调整文本格式</a></li><li class="sidebar-sub-header level3"><a href="/pages/d74f40/#拼接字符串" class="sidebar-link">拼接字符串</a></li><li class="sidebar-sub-header level3"><a href="/pages/d74f40/#字符串对齐" class="sidebar-link">字符串对齐</a></li><li class="sidebar-sub-header level3"><a href="/pages/d74f40/#去除字符" class="sidebar-link">去除字符</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/d74f40/#迭代与反迭代" class="sidebar-link">迭代与反迭代</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/d74f40/#抓取城市气温" class="sidebar-link">抓取城市气温</a></li><li class="sidebar-sub-header level3"><a href="/pages/d74f40/#查找素数" class="sidebar-link">查找素数</a></li><li class="sidebar-sub-header level3"><a href="/pages/d74f40/#浮点数发生器" class="sidebar-link">浮点数发生器</a></li><li class="sidebar-sub-header level3"><a href="/pages/d74f40/#并行与串行" class="sidebar-link">并行与串行</a></li></ul></li></ul></li><li><a href="/pages/a6e50e/" class="sidebar-link">小项目之ATM_shopping</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>python面向对象</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>网络并发编程</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-91157402><div class="articleInfo" data-v-91157402><ul class="breadcrumbs" data-v-91157402><li data-v-91157402><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-91157402></a></li> <li data-v-91157402><a href="/categories/?category=python_Need" title="分类" data-v-91157402>python_Need</a></li><li data-v-91157402><a href="/categories/?category=python%E9%9D%A2%E5%90%91%E8%BF%87%E7%A8%8B" title="分类" data-v-91157402>python面向过程</a></li></ul> <div class="info" data-v-91157402><div title="作者" class="author iconfont icon-touxiang" data-v-91157402><a href="https://github.com/OnePieceDC" target="_blank" title="作者" class="beLink" data-v-91157402>DC</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-91157402><a href="javascript:;" data-v-91157402>2023-09-08</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">饶头训练<!----></h1> <!----> <div class="theme-vdoing-content content__default"><div class="language- line-numbers-mode"><pre class="language-text"><code>列表、字典、集合解析
sorted的key参数
from itertools import islice
from collections import namedtuple
from collections import Counter
from collections import OrderedDict
from collections import deque
from collections import Iterable, Iterator ,Generator

from functools import reduce
re.split()
re.sub()
my_str.join()
my_str.maketrans()  my_str.translate()

反迭代协议 __reversed__
from decimal import Decimal
from itertools import chain
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h2 id="数据构建与解析"><a href="#数据构建与解析" class="header-anchor">#</a> 数据构建与解析</h2> <h3 id="筛选数据"><a href="#筛选数据" class="header-anchor">#</a> 筛选数据</h3> <blockquote><p><font color="lighblue">列表、字典、集合生成式 </font><br>
过滤列表中的负数<br>
取出字典中的值大于90的键值对<br>
取出集合中能被3整除的数</p></blockquote> <p>△方案一: 列表解析、字典解析、集合解析<br>
△方案二: filter</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> random <span class="token keyword">import</span> randint

data_list <span class="token operator">=</span> <span class="token punctuation">[</span>randint<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
data_dict <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string-interpolation"><span class="token string">f'student</span><span class="token interpolation"><span class="token punctuation">{</span>i<span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">:</span> randint<span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
data_set <span class="token operator">=</span> <span class="token punctuation">{</span>randint<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span> <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">}</span>

<span class="token comment"># -- 列表</span>
<span class="token punctuation">[</span>x <span class="token keyword">for</span> x <span class="token keyword">in</span> data_list <span class="token keyword">if</span> x <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">]</span>
<span class="token builtin">filter</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> x <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">,</span> data_list<span class="token punctuation">)</span>
<span class="token comment"># -- 字典</span>
<span class="token punctuation">{</span>k<span class="token punctuation">:</span> v <span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token keyword">in</span> data_dict<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">if</span> v <span class="token operator">&gt;</span> <span class="token number">90</span><span class="token punctuation">}</span>
<span class="token builtin">filter</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> x<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&gt;</span> <span class="token number">90</span><span class="token punctuation">,</span> data_dict<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># -- 集合</span>
<span class="token punctuation">{</span>x <span class="token keyword">for</span> x <span class="token keyword">in</span> data_set <span class="token keyword">if</span> x <span class="token operator">%</span> <span class="token number">3</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">}</span>
<span class="token builtin">filter</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> x <span class="token operator">%</span> <span class="token number">3</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">,</span> data_set<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="元组元素命名"><a href="#元组元素命名" class="header-anchor">#</a> 元组元素命名</h3> <blockquote><p><font color="lighblue">如何 <strong>为元组中的每个元素命名</strong> ,提高程序的可读性？</font><br>
对于格式固定的数据, 我们通常可以使用元祖来存储<br>
比如某个学生信息系统, 其中每个学生的格式都是确定的(名字、年龄、性别、邮箱)<br>
('Jim',16,'male',<code>jim8721@gmail.com</code>)</p> <p>1&gt; 使用元祖的 <strong>优点</strong> : 节省空间!!! 存储相同的数据, 使用元祖比使用字典开销会小很多！<br>
2&gt; 使用元祖的 <strong>缺点</strong> : 访问的时候, 我们需要使用索引(index)访问, 大量索引降低程序可读性.<br>
                                   因为它不知道元组中每个字段的含义.</p></blockquote> <p>使用 <code>collections.namedtuple</code> 替代内置tuple<br> <font color="gray">(还可以定义一系列数值常量或枚举类型来解决..但不推荐 略)</font></p> <p><font color="brown">使用标准库collections下的一个命名元祖namedtuple: 即为元祖的每个字段起名字 </font><br>
它是一个类的工厂, 可以创建出一种元祖的子类, 它其中的每个字段是有名字的<br>
     第一个参数: 为命名元祖起个名字<br>
     第二个参数: 可以传入一个列表, 包含了命名元祖中每个字段的名字<br>
     return: 返回一个类, 元祖的子类</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>In <span class="token punctuation">[</span><span class="token number">27</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token keyword">from</span> collections <span class="token keyword">import</span> namedtuple
<span class="token comment"># -- namedtuple()可以看作是一个类; student0是namedtuple()()的实例化, </span>
In <span class="token punctuation">[</span><span class="token number">28</span><span class="token punctuation">]</span><span class="token punctuation">:</span> student0 <span class="token operator">=</span> namedtuple<span class="token punctuation">(</span><span class="token string">'Stu0'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">,</span><span class="token string">'age'</span><span class="token punctuation">,</span><span class="token string">'sex'</span><span class="token punctuation">,</span><span class="token string">'email'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token string">'xiaoming'</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">:</span> <span class="token number">16</span><span class="token punctuation">,</span><span class="token string">'man'</span><span class="token punctuation">,</span><span class="token string">'123456@qq.com'</span><span class="token punctuation">)</span>

In <span class="token punctuation">[</span><span class="token number">29</span><span class="token punctuation">]</span><span class="token punctuation">:</span> student0
Out<span class="token punctuation">[</span><span class="token number">29</span><span class="token punctuation">]</span><span class="token punctuation">:</span> Stu0<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'xiaoming'</span><span class="token punctuation">,</span> age<span class="token operator">=</span><span class="token number">16</span><span class="token punctuation">,</span> sex<span class="token operator">=</span><span class="token string">'man'</span><span class="token punctuation">,</span> email<span class="token operator">=</span><span class="token string">'123456@qq.com'</span><span class="token punctuation">)</span>

In <span class="token punctuation">[</span><span class="token number">30</span><span class="token punctuation">]</span><span class="token punctuation">:</span> student0<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
Out<span class="token punctuation">[</span><span class="token number">30</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token string">'xiaoming'</span>

In <span class="token punctuation">[</span><span class="token number">38</span><span class="token punctuation">]</span><span class="token punctuation">:</span> student0<span class="token punctuation">.</span>name
Out<span class="token punctuation">[</span><span class="token number">38</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token string">'xiaoming'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="字典排序"><a href="#字典排序" class="header-anchor">#</a> 字典排序</h3> <blockquote><p><font color="lighblue">根据字典中值的大小对字典中的项进行排序,并加上排名</font><br>
{'c': (1, 95), 'd': (2, 91)}</p></blockquote> <p><font color="brown">传递sorted函数的 <code>key</code> 参数.</font></p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> random <span class="token keyword">import</span> randint

data <span class="token operator">=</span> <span class="token punctuation">{</span>i<span class="token punctuation">:</span> randint<span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token string">'abcdefg'</span><span class="token punctuation">}</span>

temp <span class="token operator">=</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> key<span class="token operator">=</span><span class="token keyword">lambda</span> item<span class="token punctuation">:</span> item<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> reverse<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
<span class="token comment"># -- 等同于 {items[0]: (index, items[1]) for index, items in enumerate(temp, 1)}</span>
res <span class="token operator">=</span> <span class="token punctuation">{</span>k<span class="token punctuation">:</span> <span class="token punctuation">(</span>index<span class="token punctuation">,</span> v<span class="token punctuation">)</span> <span class="token keyword">for</span> index<span class="token punctuation">,</span> <span class="token punctuation">(</span>k<span class="token punctuation">,</span> v<span class="token punctuation">)</span> <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>temp<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>

<span class="token comment"># -- 在原字典上,加上排名</span>
<span class="token keyword">for</span> index<span class="token punctuation">,</span> <span class="token punctuation">(</span>k<span class="token punctuation">,</span> v<span class="token punctuation">)</span> <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>temp<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    data<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>index<span class="token punctuation">,</span> v<span class="token punctuation">)</span>
    
<span class="token triple-quoted-string string">&quot;&quot;&quot;
Ps: sorted(zip(data.values(), data.keys()))
&quot;&quot;&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="元素频度"><a href="#元素频度" class="header-anchor">#</a> 元素频度</h3> <blockquote><p><font color="lighblue">统计序列中元素的频度并排序</font><br>
1.某随机序列[12,5,6,4,6,5,5,7]中, 找到出现次数最高的3个元素, 它们出现的次数是多少？<br>
2.对于某英文文章的单词, 进行词频统计, 找到出现次数最高的10个单词, 它们出现次数是多少？</p></blockquote> <p>△方案一: 将序列转换为字典 <code>{元素:频度}</code> ,根据字典中的值排序<br>
△方案二: <font color="brown">使用标准库 <code>collections</code> 中的 <code>Counter对象</code></font><br> <font color="gray">Ps: 方案一,若列表很大只找前三个,对整个列表排序很浪费, 这时候可以使用堆 <code>import heapq</code></font></p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;
★ --方案一
&quot;&quot;&quot;</span>
<span class="token keyword">from</span> random <span class="token keyword">import</span> randint

data <span class="token operator">=</span> <span class="token punctuation">[</span>randint<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span> <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token comment"># -- 对data数据去重后作为字典的键,每个键的值都默认为0</span>
d <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">.</span>fromkeys<span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token comment"># -- 注意一点 字典的键是唯一的 所以要达到预定效果就不能对d进行循环.</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> data<span class="token punctuation">:</span>
    d<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token number">1</span>

<span class="token builtin">sorted</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> key<span class="token operator">=</span><span class="token keyword">lambda</span> item<span class="token punctuation">:</span> item<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> reverse<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">]</span>
<span class="token comment"># -- 改变键值顺序,通过元祖进行比较 好别扭</span>
<span class="token comment"># sorted([(v, k) for k, v in d.items()], reverse=True)[:3]</span>
<span class="token builtin">sorted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span> k<span class="token punctuation">)</span> <span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token keyword">in</span> d<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> reverse<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">]</span>


<span class="token triple-quoted-string string">&quot;&quot;&quot;
★ --方案二
&quot;&quot;&quot;</span>
<span class="token keyword">from</span> collections <span class="token keyword">import</span> Counter
<span class="token keyword">from</span> random <span class="token keyword">import</span> randint

data <span class="token operator">=</span> <span class="token punctuation">[</span>randint<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span> <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token comment"># -- Counter就相当于一个频度字典</span>
<span class="token comment"># -- 类似于这样 =&gt; Counter({7: 2,0: 1,10: 1,4: 1,16: 2,...,9: 2}</span>
c <span class="token operator">=</span> Counter<span class="token punctuation">(</span>data<span class="token punctuation">)</span>
<span class="token comment"># -- 取出频度最高的前3个数字</span>
res <span class="token operator">=</span> c<span class="token punctuation">.</span>most_common<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>  <span class="token comment"># -- [(0, 6), (20, 3), (4, 3)]</span>


<span class="token triple-quoted-string string">&quot;&quot;&quot;
★ --文本词频统计
&quot;&quot;&quot;</span>
<span class="token keyword">import</span> re
<span class="token keyword">from</span> collections <span class="token keyword">import</span> Counter
<span class="token comment"># -- 读取文件</span>
txt <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'example.txt'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># -- 使用正则将词全部切分出来,可以得到一个词的列表</span>
word_list <span class="token operator">=</span> re<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'\W+'</span><span class="token punctuation">,</span> txt<span class="token punctuation">)</span>
c2 <span class="token operator">=</span> Counter<span class="token punctuation">(</span>word_list<span class="token punctuation">)</span>
<span class="token comment"># -- 取出文本中出现频度前10的单词</span>
c2<span class="token punctuation">.</span>most_common<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br></div></div><h3 id="字典公共键"><a href="#字典公共键" class="header-anchor">#</a> 字典公共键</h3> <blockquote><p><font color="lighblue">快速找到多个字典中的公共键</font><br>
实际案例:<br>
     西班牙足球甲级联赛, 每轮球员进球统计:<br>
     第一轮: {'苏亚雷斯': 1, '梅西': 2, '本泽马'：1,...}<br>
     第二轮: {'苏亚雷斯': 2, 'C罗': 2, '格里兹曼': 2,…}<br>
     第三轮: {'苏亚雷斯': 1, '托雷斯': 2, '贝尔': 1,…}<br>
     …… .... ....<br>
     统计出前N轮, 每场比赛都有进球的球员</p></blockquote> <p>△方案一: 可以使用循环<br>
△方案二: <code>map</code>(得到T or F)+<code>all</code>+<code>列表推导式</code><br>
△方案三: 对于大量的字典, 我们通常利用集合的 <code>交集</code>操作获取字典的公共键</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> random <span class="token keyword">import</span> randint<span class="token punctuation">,</span> sample

<span class="token comment"># -- 假设每轮有3~6人进球,每个人进球的数目1~4个</span>
d1 <span class="token operator">=</span> <span class="token punctuation">{</span>k<span class="token punctuation">:</span> randint<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token keyword">for</span> k <span class="token keyword">in</span> sample<span class="token punctuation">(</span><span class="token string">'abcdefgh'</span><span class="token punctuation">,</span> randint<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
d2 <span class="token operator">=</span> <span class="token punctuation">{</span>k<span class="token punctuation">:</span> randint<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token keyword">for</span> k <span class="token keyword">in</span> sample<span class="token punctuation">(</span><span class="token string">'abcdefgh'</span><span class="token punctuation">,</span> randint<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
d3 <span class="token operator">=</span> <span class="token punctuation">{</span>k<span class="token punctuation">:</span> randint<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token keyword">for</span> k <span class="token keyword">in</span> sample<span class="token punctuation">(</span><span class="token string">'abcdefgh'</span><span class="token punctuation">,</span> randint<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>


<span class="token triple-quoted-string string">&quot;&quot;&quot;
★ --方法一:用for循环 看d1字典中的项是否在其余两个字典中
    缺点: 面对实际问题,我们并不知道一共会有多少轮
&quot;&quot;&quot;</span>
<span class="token punctuation">[</span>k <span class="token keyword">for</span> k <span class="token keyword">in</span> d1 <span class="token keyword">if</span> k <span class="token keyword">in</span> d2 <span class="token keyword">and</span> k <span class="token keyword">in</span> d3<span class="token punctuation">]</span>


<span class="token triple-quoted-string string">&quot;&quot;&quot;
★ --方法二:map+all
    直接对字典循环,循环打印出的是字典的键
    可以通过 'd' in {'d': 2, 'a': 2} 这种方式判断字典中是否有这个键
    `all([True,1]) =&gt;  True`; `all([True,0]) =&gt; False`
&quot;&quot;&quot;</span>
<span class="token comment"># -- [k for k in d_list[0] if all(map(lambda item:k in item,d_list[1:]))]</span>
d_list <span class="token operator">=</span> <span class="token punctuation">[</span>d1<span class="token punctuation">,</span> d2<span class="token punctuation">,</span> d3<span class="token punctuation">]</span>
my_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">for</span> k <span class="token keyword">in</span> d_list<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
    <span class="token comment"># -- all()函数用来判断可迭代参数iterable中的所有元素是否都为TRUE,如果是返回TRUE,否则返回False</span>
    <span class="token keyword">if</span> <span class="token builtin">all</span><span class="token punctuation">(</span><span class="token builtin">map</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> item<span class="token punctuation">:</span> k <span class="token keyword">in</span> item<span class="token punctuation">,</span> d_list<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        my_list<span class="token punctuation">.</span>append<span class="token punctuation">(</span>k<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>my_list<span class="token punctuation">)</span>  <span class="token comment"># -- ['e', 'h', 'g']</span>


<span class="token triple-quoted-string string">&quot;&quot;&quot;
★ --方法三:map+reduce
    Step1:使用字典的keys()方法,得到一个字典keys的集合
    Step2:使用map函数,得到每个字典keys的集合
    Step3:使用reduce函数,取所有字典的keys集合的交集
    Ps: `d1.keys()` 等同于 `dict.keys(d1)`

    In [16]: list(map(dict.keys,d_list))
    Out[16]:
    [dict_keys(['f', 'b', 'h', 'g', 'a', 'c']),
     dict_keys(['g', 'f', 'a']),
     dict_keys(['f', 'h', 'g', 'c', 'a', 'e'])]
&quot;&quot;&quot;</span>
<span class="token keyword">from</span> functools <span class="token keyword">import</span> <span class="token builtin">reduce</span>

d_list <span class="token operator">=</span> <span class="token punctuation">[</span>d1<span class="token punctuation">,</span> d2<span class="token punctuation">,</span> d3<span class="token punctuation">]</span>
res <span class="token operator">=</span> <span class="token builtin">reduce</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> a<span class="token punctuation">,</span> b<span class="token punctuation">:</span> a <span class="token operator">&amp;</span> b<span class="token punctuation">,</span> <span class="token builtin">map</span><span class="token punctuation">(</span><span class="token builtin">dict</span><span class="token punctuation">.</span>keys<span class="token punctuation">,</span> d_list<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>  <span class="token comment"># -- {'h', 'g', 'e'}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br></div></div><h3 id="字典无序"><a href="#字典无序" class="header-anchor">#</a> 字典无序</h3> <blockquote><p>解决python3.6以前字典无序的问题</p></blockquote> <p>使用标准库<code>collections</code>中的<code>OrderedDict</code>. 以OrderedDict替代内置字典Dict. 用法与字典一样!!</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> collections <span class="token keyword">import</span> OrderedDict
<span class="token keyword">from</span> random <span class="token keyword">import</span> shuffle

players <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token string">'abcdefgh'</span><span class="token punctuation">)</span>
shuffle<span class="token punctuation">(</span>players<span class="token punctuation">)</span>  <span class="token comment"># 打乱players -- ['f', 'e', 'g', 'd', 'b', 'c', 'h', 'a']</span>

od <span class="token operator">=</span> OrderedDict<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> i<span class="token punctuation">,</span> p <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>players<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    od<span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">=</span> i

<span class="token comment"># -- 写一个接口,根据名字查询排名</span>
<span class="token keyword">def</span> <span class="token function">query_by_name</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> d<span class="token punctuation">[</span>name<span class="token punctuation">]</span>

query_by_name<span class="token punctuation">(</span>od<span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">)</span>  <span class="token comment"># 6</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="可迭代对象切片"><a href="#可迭代对象切片" class="header-anchor">#</a> 可迭代对象切片</h3> <blockquote><p>提一嘴, 切片的实质是重载了 <code>__getitem__</code> 方法</p></blockquote> <p><font color="blue">使用标准库 <code>itertools</code> 中的 <code>islice</code>.</font><br> <strong>注意哦,</strong> 使用islice对字典切片,切的是key值..  <font color="red">islice返回的是一个迭代器 </font></p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> itertools <span class="token keyword">import</span> islice
<span class="token keyword">from</span> collections <span class="token keyword">import</span> Iterable<span class="token punctuation">,</span> Iterator <span class="token punctuation">,</span>Generator
<span class="token comment"># -- islice(iterable,start,stop[,step]) </span>

<span class="token triple-quoted-string string">&quot;&quot;&quot;
★ --islice返回的是一个迭代器
&quot;&quot;&quot;</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">:</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># [3, 4, 5]</span>
train <span class="token operator">=</span> islice<span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span>
<span class="token comment"># -- &lt;class 'itertools.islice'&gt; [3, 4, 5]</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">type</span><span class="token punctuation">(</span>train<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">list</span><span class="token punctuation">(</span>train<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># -- False True True</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">isinstance</span><span class="token punctuation">(</span>train<span class="token punctuation">,</span>Generator<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token builtin">isinstance</span><span class="token punctuation">(</span>train<span class="token punctuation">,</span>Iterable<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token builtin">isinstance</span><span class="token punctuation">(</span>train<span class="token punctuation">,</span>Iterator<span class="token punctuation">)</span><span class="token punctuation">)</span>


<span class="token triple-quoted-string string">&quot;&quot;&quot;
★ --使用islice对字典切片,切的是key值
&quot;&quot;&quot;</span>
my_dict <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">.</span>fromkeys<span class="token punctuation">(</span><span class="token punctuation">[</span>i <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token string">'abcde'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>my_dict<span class="token punctuation">)</span>  <span class="token comment"># -- {'a': 0, 'b': 0, 'c': 0, 'd': 0, 'e': 0}</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">(</span>islice<span class="token punctuation">(</span>my_dict<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># -- ['a', 'b', 'c']</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">(</span>islice<span class="token punctuation">(</span>my_dict<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># -- ['b', 'c']</span>


<span class="token triple-quoted-string string">&quot;&quot;&quot;
★ --使用islice对文件切片
&quot;&quot;&quot;</span>
<span class="token comment"># -- 这个日志文件一共有70行</span>
f <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'/var/log/wifi.log'</span><span class="token punctuation">)</span>
<span class="token comment"># -- 若通过`f.readlines()[10:20]`获取到行的列表,再对此进行切片,可行</span>
<span class="token comment">#    但readlines()会先将文件所有内容读取到内存中,如果日志文件很大,就很不友好.</span>
f<span class="token punctuation">.</span>readlines<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">:</span><span class="token number">20</span><span class="token punctuation">]</span>
<span class="token comment"># -- islice在这里实际上读了20行 前10行扔掉</span>
<span class="token keyword">for</span> line <span class="token keyword">in</span> islice<span class="token punctuation">(</span>f<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><h3 id="历史记录功能"><a href="#历史记录功能" class="header-anchor">#</a> 历史记录功能</h3> <blockquote><p>需求: 制作一个简单的猜数字的小游戏, 添加历史记录功能, 显示用户猜过的数字..</p></blockquote> <p>1&gt; 使用标准库 <code>collections</code> 中的 <code>deque</code> ,它是一个双端队列.<br> <font color="gray">双端队列, 左右两端都可以进行出队和入队操作的队列; </font><br> <font color="gray">(通常历史记录是有限度的,不能无限存储),使用容量为n的队列存储历史记录</font><br>
2&gt; 使用<code>pickle</code>模块将历史记录存到硬盘,以便下次启动使用<br> <font color="gray"> 因为这个队列是在内存当中的,程序退出后,历史记录就消失了.</font></p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> collections <span class="token keyword">import</span> deque
<span class="token comment"># -- 第一个参数: 对队列进行初始化</span>
<span class="token comment">#    第二个参数: 队列的容量,不传默认队列无限大</span>
q <span class="token operator">=</span> deque<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>
<span class="token comment"># -- 入队操作有两个方法   q.append右端入队;q.appendleft左端入队</span>
<span class="token comment"># -- 出队操作有两个方法   q.pop右端出队;q.popleft左端出队</span>
q<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
q<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
q<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
q<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>
q<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>q<span class="token punctuation">)</span> <span class="token comment"># deque([1, 2, 3, 4, 5], maxlen=5)</span>
q<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span>
<span class="token comment"># -- 容量满了,会将1自动弹出去</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>q<span class="token punctuation">)</span> <span class="token comment"># deque([2, 3, 4, 5, 6], maxlen=5)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><strong>猜数字实现:</strong></p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> random <span class="token keyword">import</span> randint
<span class="token keyword">from</span> collections <span class="token keyword">import</span> deque


<span class="token keyword">def</span> <span class="token function">guess</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> k<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># n是系统随机数,k是用户猜的数字</span>
    <span class="token keyword">if</span> n <span class="token operator">==</span> k<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'猜对了,这个数字是%d.'</span> <span class="token operator">%</span> k<span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token boolean">True</span>
    <span class="token keyword">if</span> n <span class="token operator">&lt;</span> k<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'猜大了,比%d小.'</span> <span class="token operator">%</span> k<span class="token punctuation">)</span>
    <span class="token keyword">elif</span> n <span class="token operator">&gt;</span> k<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'猜小了,比%d大.'</span> <span class="token operator">%</span> k<span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token boolean">False</span>


<span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    n <span class="token operator">=</span> randint<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
    i <span class="token operator">=</span> <span class="token number">1</span>
    hq <span class="token operator">=</span> deque<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>

    <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
        line <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'[%d] 请输入一个数字：'</span> <span class="token operator">%</span> i<span class="token punctuation">)</span>
        <span class="token comment"># -- isdigit()判断输入的是否是数字</span>
        <span class="token keyword">if</span> line<span class="token punctuation">.</span>isdigit<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            k <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span>
            hq<span class="token punctuation">.</span>append<span class="token punctuation">(</span>k<span class="token punctuation">)</span>
            i <span class="token operator">+=</span> <span class="token number">1</span>
            <span class="token comment"># -- 猜对了guess()返回True,程序退出;猜错了,继续猜.</span>
            <span class="token keyword">if</span> guess<span class="token punctuation">(</span>n<span class="token punctuation">,</span> k<span class="token punctuation">)</span><span class="token punctuation">:</span>
                <span class="token keyword">break</span>
        <span class="token keyword">elif</span> line <span class="token operator">==</span> <span class="token string">'quit'</span><span class="token punctuation">:</span>
            <span class="token keyword">break</span>
        <span class="token comment"># -- 添加一个查询历史记录的接口</span>
        <span class="token keyword">elif</span> line <span class="token operator">==</span> <span class="token string">'h?'</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">(</span>hq<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    main<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><p><strong>永久存储</strong></p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># -- 使用pickle模块将历史记录存到硬盘,以便下次启动使用</span>
<span class="token keyword">import</span> pickle
<span class="token comment"># -- dump()可以将一个python对象导入到文件中去</span>
<span class="token comment">#    第一个参数:python对象</span>
<span class="token comment">#    第二个参数:文件对象</span>
<span class="token comment">#    注意存取操作都必须是二进制</span>
pickle<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>q<span class="token punctuation">,</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'save.pkl'</span><span class="token punctuation">,</span> <span class="token string">'wb'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># -- 取出</span>
q2 <span class="token operator">=</span> pickle<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'save.pkl'</span><span class="token punctuation">,</span> <span class="token string">'rb'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>q<span class="token punctuation">)</span>  <span class="token comment"># -- q: deque([2, 3, 4, 5, 6], maxlen=5)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>q2<span class="token punctuation">)</span> <span class="token comment"># -- q2: deque([2, 3, 4, 5, 6], maxlen=5)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><hr> <h2 id="字符串处理"><a href="#字符串处理" class="header-anchor">#</a> 字符串处理</h2> <h3 id="拆分字符串"><a href="#拆分字符串" class="header-anchor">#</a> 拆分字符串</h3> <blockquote><p>有这样一字符串, 'ab;cd|efg|hi,jkl|mn\topq;rst,uvw\txyz', 如何根据分隔符 ; , | \t 进行拆分？</p></blockquote> <p>△方案一: 连续使用<code>str.split()</code>方法,每次只能处理一种分隔号, 需降维处理<br>
             map()+str.split()<br>
             sum()+str.split()<br>
             reduce()+map()+sum()+str.split()<br>
△方案二: <font color="brown">使用正则表达式的 <code>re.split()</code> 方法 </font><br> <font color="gray">PS: 处理一个分隔符的时候使用方法一(一个的时候,方法二会比一慢);多个分隔符的时候使用方法二</font></p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;
★  --方案一
   说实话,有点复杂啦,但推导后加深了我对map、reduce、sum这些高阶函数的理解!!!这1个半小时没白花!
&quot;&quot;&quot;</span>
▲ 理论验证  <span class="token builtin">map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token builtin">str</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token builtin">str</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s <span class="token operator">=</span> <span class="token string">'ab;cd|efg|hi,jkl|mn\topq;rst,uvw\txyz'</span>
<span class="token comment"># -- [['ab'], ['cd', 'efg', 'hi,jkl', 'mn\topq'], ['rst,uvw\txyz']]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> temp <span class="token operator">=</span> <span class="token punctuation">[</span>i<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'|'</span><span class="token punctuation">)</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> s<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">';'</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> t <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token comment"># -- list(map(lambda x: t.extend(x),temp))</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">map</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>extend<span class="token punctuation">,</span>temp<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">]</span>  <span class="token comment"># -- 注意,t.extend的返回值为None</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> t
<span class="token punctuation">[</span><span class="token string">'ab'</span><span class="token punctuation">,</span> <span class="token string">'cd'</span><span class="token punctuation">,</span> <span class="token string">'efg'</span><span class="token punctuation">,</span> <span class="token string">'hi,jkl'</span><span class="token punctuation">,</span> <span class="token string">'mn\topq'</span><span class="token punctuation">,</span> <span class="token string">'rst,uvw\txyz'</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">sum</span><span class="token punctuation">(</span>temp<span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment"># -- 相当于 []+['ab', 'cd']+['efg'] ==&gt; ['ab', 'cd', 'efg'] </span>
<span class="token punctuation">[</span><span class="token string">'ab'</span><span class="token punctuation">,</span> <span class="token string">'cd'</span><span class="token punctuation">,</span> <span class="token string">'efg'</span><span class="token punctuation">,</span> <span class="token string">'hi,jkl'</span><span class="token punctuation">,</span> <span class="token string">'mn\topq'</span><span class="token punctuation">,</span> <span class="token string">'rst,uvw\txyz'</span><span class="token punctuation">]</span>

<span class="token comment"># -- 说实话,效率战且不谈,挺难一眼看出逻辑的</span>
<span class="token comment"># -- 这里注意个细节,`res = [s]`,首先将字符串放进了一个列表里</span>
<span class="token comment">#    是为了后面map()映射函数,作用的是列表里的整个字符串,而不是字符串里的每一个字符</span>
s <span class="token operator">=</span> <span class="token string">'ab;cd|efg|hi,jkl|mn\topq;rst,uvw\txyz'</span>
<span class="token keyword">def</span> <span class="token function">my_split</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> seps<span class="token punctuation">)</span><span class="token punctuation">:</span>
    res <span class="token operator">=</span> <span class="token punctuation">[</span>s<span class="token punctuation">]</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;
    for循环可以改写为:
    for sep in seps:
        res = sum(map(lambda ss: ss.split(sep), res), [])
    &quot;&quot;&quot;</span>
    <span class="token keyword">for</span> sep <span class="token keyword">in</span> seps<span class="token punctuation">:</span>
        t <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
				<span class="token comment"># 举个例子: res=['ab,cd;efg'] map取到里面的元素'ab,cd;efg'赋值给ss </span>
        <span class="token comment">#          'ab,cd;efg'.split(',')得到结果['ab','cd;efg']</span>
        <span class="token comment">#          t.extend(['ab','cd;efg']) 并将t赋值给res</span>
        <span class="token comment">#          同理,['ab','cd;efg']经过map加工,会依次执行</span>
        <span class="token comment">#          t.extend('ab'.split(';')) t.extend('cd;efg'.split(';'))</span>
        <span class="token comment">#          再将t赋值给res,以此类推</span>
        <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">map</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> ss<span class="token punctuation">:</span> t<span class="token punctuation">.</span>extend<span class="token punctuation">(</span>ss<span class="token punctuation">.</span>split<span class="token punctuation">(</span>sep<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">)</span>
        res <span class="token operator">=</span> t
    <span class="token keyword">return</span> res
<span class="token keyword">print</span><span class="token punctuation">(</span>my_split<span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token string">',;|\t'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>


▲ 理论验证  <span class="token builtin">reduce</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token builtin">map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token builtin">str</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token punctuation">)</span>
纯粹复杂化了!一点都不Effective  ╮<span class="token punctuation">(</span>￣▽￣<span class="token string">&quot;&quot;</span><span class="token punctuation">)</span>╭ 客官<span class="token punctuation">,</span>图个乐吧

<span class="token comment"># -- reduce函数, 将字符串放进列表作为其匿名func的data参数的初始值, sep参数先得到值',' </span>
<span class="token comment"># -- [使用map函数取元素进行分割,分割会生成列表,再使用sum函数取列表元素操作..] </span>
<span class="token comment">#    &lt;保证是在对元素级别进行操作&gt; 因为map是迭代器,所以会一边map一边sum</span>
<span class="token comment"># -- 将得到的结果再给匿名func的参数data, sep参数获得新的值';'</span>
<span class="token keyword">from</span> functools <span class="token keyword">import</span> <span class="token builtin">reduce</span>
<span class="token comment"># 举个例子:data的初始值为['ab,cd;efg'] 将其用map进行加工 </span>
<span class="token comment">#         map是一个迭代器,取data中的元素'ab,cd;efg'开始分割,</span>
<span class="token comment">#         注意此元素是不可变对象,对其加工不会对原data造成任何影响!!!!</span>
<span class="token comment">#         split返回的是一个列表['ab','cd;efg'],sum函数对其进行操作 []+['ab','cd;efg']</span>
<span class="token comment">#         将结果扔/赋值给reduce的data,此时data为['ab','cd;efg']</span>
<span class="token comment">#         同样的用map对其进行加工,一边加工一边sum,即依次执行</span>
<span class="token comment">#         []+['ab'] ['ab']+['cd','efg'] 将最后结果['ab','cd',efg']扔给reduce的data</span>
<span class="token builtin">reduce</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> data<span class="token punctuation">,</span> sep<span class="token punctuation">:</span> <span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token builtin">map</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> ss<span class="token punctuation">:</span> ss<span class="token punctuation">.</span>split<span class="token punctuation">(</span>sep<span class="token punctuation">)</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">',;|\t'</span><span class="token punctuation">,</span><span class="token punctuation">[</span>s<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br></div></div><div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;
★  --方案二
&quot;&quot;&quot;</span>
<span class="token keyword">import</span> re
s <span class="token operator">=</span> <span class="token string">'ab;cd|efg|hi,jkl|mn\topq;rst,uvw\txyz'</span>

<span class="token comment"># + 代表一个或者多个</span>
res <span class="token operator">=</span> re<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'[;,|\t]+'</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span>
<span class="token comment"># ['ab', 'cd', 'efg', 'hi', 'jkl', 'mn', 'opq', 'rst', 'uvw', 'xyz']</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><hr> <h3 id="调整文本格式"><a href="#调整文本格式" class="header-anchor">#</a> 调整文本格式</h3> <blockquote><p>某log日志文件. 其中的日期格式为'yyyy-mm-dd'<br>
我们想把其中的日期改为美国日期的格式 'mm/dd/yyyy'<br>
比如:  '2016-05-23' ---&gt; '05/23/2016', 应如何处理？</p></blockquote> <p>使用正则表达式<code>re.sub()</code> 方法做字符串替换,利用正则表达式的捕获组,捕获每个部分内容,<br>
再替换字符串中调整各个捕获组的顺序</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># -- 1.txt</span>
<span class="token number">2021</span><span class="token operator">-</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">14</span> <span class="token number">17</span><span class="token punctuation">:</span><span class="token number">56</span><span class="token punctuation">:</span><span class="token number">11</span> good good study <span class="token number">2021</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">09</span> day day up
<span class="token number">2021</span><span class="token operator">-</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">14</span> <span class="token number">17</span><span class="token punctuation">:</span><span class="token number">56</span><span class="token punctuation">:</span><span class="token number">11</span> believe yourself 
    
<span class="token keyword">import</span> re
<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'1.txt'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
    log <span class="token operator">=</span> f<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># -- 使用正则表达式的组()括起我们要提取的三个部分</span>
<span class="token comment">#    捕获组\2 \3 \1 需要转译</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>re<span class="token punctuation">.</span>sub<span class="token punctuation">(</span><span class="token string">'(\d{4})-(\d{2})-(\d{2})'</span><span class="token punctuation">,</span> <span class="token string">r'\2/\3/\1'</span><span class="token punctuation">,</span> log<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># -- 可以给组命名</span>
re<span class="token punctuation">.</span>sub<span class="token punctuation">(</span><span class="token string">'(?P&lt;y&gt;\d{4})-(?P&lt;m&gt;\d{2})-(?P&lt;d&gt;\d{2})'</span><span class="token punctuation">,</span> <span class="token string">r'\g&lt;m&gt;/\g&lt;d&gt;/\g&lt;y&gt;'</span><span class="token punctuation">,</span> log<span class="token punctuation">)</span>

<span class="token triple-quoted-string string">&quot;&quot;&quot;结果如下:
10/14/2021 17:56:11 good good study 09/09/2021 day day up
10/14/2021 17:56:11 believe yourself 
&quot;&quot;&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="拼接字符串"><a href="#拼接字符串" class="header-anchor">#</a> 拼接字符串</h3> <blockquote><p>在程序中我们将各个参数按次序收集到列表中:<br>
['&lt;0112&gt;','&lt;32&gt;','&lt;1024x768&gt;','&lt;60&gt;','&lt;1&gt;','&lt;100.0&gt;','&lt;500.0&gt;']<br>
最终我们要把各个参数拼接成一个数据报进行发送.<br>
&quot;&lt;0112&gt;&lt;32&gt;&lt;1024x768&gt;&lt;60&gt;&lt;1&gt;&lt;100.0&gt;&lt;500.0&gt;&quot;</p></blockquote> <p>△方案一: 迭代列表,连续使用'+'操作依次拼接每一个字符串 reduce也能办到<br>
    缺点: 过程中创建了大量的字符串,空间时间上有很大浪费<br>
△方案二: <font color="brown">使用<code>str.join()</code>方法</font>, 更加快速的拼接列表中所有的字符串 ✔!!!<br>
    它会一次性的创建内存,一次性的拷贝</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;
★  --方案一
     缺点:过程中创建了大量的字符串,空间时间上有很大浪费
&quot;&quot;&quot;</span>
▲ 理论验证 
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s1 <span class="token operator">=</span> <span class="token string">'abcdef'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s2 <span class="token operator">=</span> <span class="token string">'12345'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s1<span class="token operator">+</span>s2
<span class="token string">'abcdef12345'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">str</span><span class="token punctuation">.</span>__add__
<span class="token operator">&lt;</span>slot wrapper <span class="token string">'__add__'</span> of <span class="token string">'str'</span> objects<span class="token operator">&gt;</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s1<span class="token punctuation">.</span>__add__<span class="token punctuation">(</span>s2<span class="token punctuation">)</span>
<span class="token string">'abcdef12345'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">str</span><span class="token punctuation">.</span>__add__<span class="token punctuation">(</span>s1<span class="token punctuation">,</span>s2<span class="token punctuation">)</span>
<span class="token string">'abcdef12345'</span>

my_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'&lt;0112&gt;'</span><span class="token punctuation">,</span> <span class="token string">'&lt;32&gt;'</span><span class="token punctuation">,</span> <span class="token string">'&lt;1024x768&gt;'</span><span class="token punctuation">,</span> <span class="token string">'&lt;60&gt;'</span><span class="token punctuation">,</span> <span class="token string">'&lt;1&gt;'</span><span class="token punctuation">,</span> <span class="token string">'&lt;100.0&gt;'</span><span class="token punctuation">,</span> <span class="token string">'&lt;500.0&gt;'</span><span class="token punctuation">]</span>
result <span class="token operator">=</span> <span class="token string">&quot;&quot;</span>
<span class="token keyword">for</span> item <span class="token keyword">in</span> my_list<span class="token punctuation">:</span>
    result <span class="token operator">+=</span> item

<span class="token comment"># &lt;0112&gt;&lt;32&gt;&lt;1024x768&gt;&lt;60&gt;&lt;1&gt;&lt;100.0&gt;&lt;500.0&gt;</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>

<span class="token comment"># -- 简写</span>
<span class="token keyword">from</span> functools <span class="token keyword">import</span> <span class="token builtin">reduce</span>
<span class="token comment"># &lt;0112&gt;&lt;32&gt;&lt;1024x768&gt;&lt;60&gt;&lt;1&gt;&lt;100.0&gt;&lt;500.0&gt;</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">reduce</span><span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">.</span>__add__<span class="token punctuation">,</span> my_list<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token triple-quoted-string string">&quot;&quot;&quot;
★  --方案二
&quot;&quot;&quot;</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token string">''</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'&lt;0112&gt;'</span><span class="token punctuation">,</span><span class="token string">'&lt;32&gt;'</span><span class="token punctuation">,</span><span class="token string">'&lt;1024x768&gt;'</span><span class="token punctuation">,</span><span class="token string">'&lt;60&gt;'</span><span class="token punctuation">,</span><span class="token string">'&lt;1&gt;'</span><span class="token punctuation">,</span><span class="token string">'&lt;100.0&gt;'</span><span class="token punctuation">,</span><span class="token string">'&lt;500.0&gt;'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token string">'&lt;0112&gt;&lt;32&gt;&lt;1024x768&gt;&lt;60&gt;&lt;1&gt;&lt;100.0&gt;&lt;500.0&gt;'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h3 id="字符串对齐"><a href="#字符串对齐" class="header-anchor">#</a> 字符串对齐</h3> <blockquote><p>某个字典存储了一系列属性值<br>
{<br>
     &quot;lodDist&quot;:100.0,<br>
     &quot;SmallCull&quot;:0.04,<br>
     &quot;DistCull&quot;:500.0,<br>
     &quot;trilinear&quot;:40,<br>
     &quot;farclip&quot;:477,<br>
}<br>
在程序中，我们想以工整的格式将其内容输出, 如何处理？<br>
SmallCull:0.04,<br>
farclip  :477,<br>
lodDist  :100.0,<br>
DistCull :500.0,<br>
trilinear:40,</p></blockquote> <p>首先<code>max + map</code>算出len(key)的最大值 便于对齐.<br>
△方案一: 使用字符串的<code>str.ljust()</code>, <code>str.rjust()</code>, <code>str.center()</code>进行左,右,居中对齐<br>
△方案二: 使用<code>format()</code>方法,传递类似'&lt;20','&gt;20','^20'参数完成同样任务</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>d <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;lodDist&quot;</span><span class="token punctuation">:</span> <span class="token number">100.0</span><span class="token punctuation">,</span>
    <span class="token string">&quot;SmallCull&quot;</span><span class="token punctuation">:</span> <span class="token number">0.04</span><span class="token punctuation">,</span>
    <span class="token string">&quot;DistCull&quot;</span><span class="token punctuation">:</span> <span class="token number">500.0</span><span class="token punctuation">,</span>
    <span class="token string">&quot;trilinear&quot;</span><span class="token punctuation">:</span> <span class="token number">40</span><span class="token punctuation">,</span>
    <span class="token string">&quot;farclip&quot;</span><span class="token punctuation">:</span> <span class="token number">477</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

w <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span><span class="token builtin">map</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">,</span> d<span class="token punctuation">.</span>keys<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token keyword">in</span> d<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>k<span class="token punctuation">.</span>ljust<span class="token punctuation">(</span>w<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">':'</span><span class="token punctuation">,</span> v<span class="token punctuation">)</span>

<span class="token triple-quoted-string string">'''
lodDist   : 100.0
SmallCull : 0.04
DistCull  : 500.0
trilinear : 40
farclip   : 477
'''</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="去除字符"><a href="#去除字符" class="header-anchor">#</a> 去除字符</h3> <blockquote><p>1.过滤掉用户输入中前后多余的空白字符
2.过滤某windows下编辑文本中的'\r'(window下的换行符是\r\n;linux下只需要一个\n)
'hello world\r\n'</p></blockquote> <p>△方法一: 字符串<code>strip()</code>, <code>lstrip()</code>, <code>rstrip()</code>方法去掉字符串两端多种字符<br>
△方法二: 删除单个固定位置的字符,可以使用切片然后拼接的方式<br>
△方法三: 字符串中的替换方法replace()方法或正则表达式的re.sub()替换方法,替换成空字符串<br>
△方法四: 字符串的 <strong>translate()</strong> 方法-它可以将一种字符映射到另外一种字符上,达到同时删除多种不同字符</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s3 <span class="token operator">=</span> <span class="token string">'    abc  xyz    '</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s3<span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span>
<span class="token string">'abcxyz'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s3 <span class="token operator">=</span> <span class="token string">'  \t  abc  \t  xyz  \n  '</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s3<span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">'\t'</span><span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span>
<span class="token string">'abcxyz'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">import</span> re
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> re<span class="token punctuation">.</span>sub<span class="token punctuation">(</span><span class="token string">'[ \t\n]+'</span><span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">,</span>s3<span class="token punctuation">)</span>
<span class="token string">'abcxyz'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> re<span class="token punctuation">.</span>sub<span class="token punctuation">(</span><span class="token string">'\s+'</span><span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">,</span>s3<span class="token punctuation">)</span>
<span class="token string">'abcxyz'</span>

<span class="token triple-quoted-string string">&quot;&quot;&quot;
★  --
translate() 允许传入一个映射表,根据映射表做替换
映射表的形式可以是一个字典 {unicode值:unicode值或字符串}

maketrans() 方便我们做映射表
&quot;&quot;&quot;</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s <span class="token operator">=</span> <span class="token string">'abc1234xyz'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">.</span>translate<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token builtin">ord</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token string">'X'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token string">'Xbc1234xyz'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">.</span>translate<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token builtin">ord</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token string">'X'</span><span class="token punctuation">,</span><span class="token builtin">ord</span><span class="token punctuation">(</span><span class="token string">'b'</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token string">'Y'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token string">'XYc1234xyz'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">.</span>maketrans<span class="token punctuation">(</span><span class="token string">'abcxyz'</span><span class="token punctuation">,</span><span class="token string">'XYZABC'</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span><span class="token number">97</span><span class="token punctuation">:</span> <span class="token number">88</span><span class="token punctuation">,</span> <span class="token number">98</span><span class="token punctuation">:</span> <span class="token number">89</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">:</span> <span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">120</span><span class="token punctuation">:</span> <span class="token number">65</span><span class="token punctuation">,</span> <span class="token number">121</span><span class="token punctuation">:</span> <span class="token number">66</span><span class="token punctuation">,</span> <span class="token number">122</span><span class="token punctuation">:</span> <span class="token number">67</span><span class="token punctuation">}</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">.</span>translate<span class="token punctuation">(</span>s<span class="token punctuation">.</span>maketrans<span class="token punctuation">(</span><span class="token string">'abcxyz'</span><span class="token punctuation">,</span><span class="token string">'XYZABC'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token string">'XYZ1234ABC'</span>
<span class="token comment"># -- 只要键值对的值为none就可以删除掉它!!!</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">.</span>translate<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token builtin">ord</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token boolean">None</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token string">'bc1234xyz'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><hr> <h2 id="迭代与反迭代"><a href="#迭代与反迭代" class="header-anchor">#</a> 迭代与反迭代</h2> <h3 id="抓取城市气温"><a href="#抓取城市气温" class="header-anchor">#</a> 抓取城市气温</h3> <blockquote><p>某软件要求, 从网络抓取各个城市气温信息, 并依次显示:<br>
北京: 15~20<br>
天津: 17~22<br>
长春: 12~18<br>
...  ... ...<br>
如果依次抓取所有城市气温再显示, 显示第一个城市气温时, 有很高的延时, 并且浪费存储空间.<br>
我们期望以&quot;用时访问&quot;的策略, 能把所有城市气温封装到一个对象里, 可用for语句进行迭代.</p></blockquote> <p>△方案一: 实现一个迭代器对象 , <code>__next__</code> 方法每次返回一个城市的信息<br>
△方案二: 实现一个可迭代对象 , <code>__iter__</code> 方法返回一个生成器对象</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># -- 可迭代对象和迭代器对象的基类. 我们可以不用继承它们.自己用魔法方法构建.</span>
<span class="token keyword">from</span> collections <span class="token keyword">import</span> Iterable<span class="token punctuation">,</span> Iterator 
<span class="token triple-quoted-string string">&quot;&quot;&quot;
★  --方案一
&quot;&quot;&quot;</span>
<span class="token keyword">import</span> requests

<span class="token keyword">class</span> <span class="token class-name">WeaterIterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> citys<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>citys <span class="token operator">=</span> citys
        <span class="token comment"># 用于手工维护整个迭代器的状态</span>
        self<span class="token punctuation">.</span>index <span class="token operator">=</span> <span class="token number">0</span>

    <span class="token keyword">def</span> <span class="token function">__iter__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self

    <span class="token keyword">def</span> <span class="token function">__next__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>index <span class="token operator">==</span> <span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>citys<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">raise</span> StopIteration
        city <span class="token operator">=</span> self<span class="token punctuation">.</span>citys<span class="token punctuation">[</span>self<span class="token punctuation">.</span>index<span class="token punctuation">]</span>
        self<span class="token punctuation">.</span>index <span class="token operator">+=</span> <span class="token number">1</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>get_weather<span class="token punctuation">(</span>city<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">get_weather</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> city<span class="token punctuation">)</span><span class="token punctuation">:</span>
        url <span class="token operator">=</span> <span class="token string">&quot;http://www.jcznedu.com:5000/weather/now/?city=&quot;</span> <span class="token operator">+</span> city
        r <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">)</span>
        <span class="token comment"># -- r.json()返回结果的json对象</span>
        data <span class="token operator">=</span> r<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">&quot;data&quot;</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">&quot;now&quot;</span><span class="token punctuation">]</span>
        <span class="token comment"># -- 城市、温度、湿度</span>
        <span class="token keyword">return</span> city<span class="token punctuation">,</span> data<span class="token punctuation">[</span><span class="token string">'temperature'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> data<span class="token punctuation">[</span><span class="token string">'humidity'</span><span class="token punctuation">]</span>

<span class="token keyword">def</span> <span class="token function">show</span><span class="token punctuation">(</span>w<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">for</span> x <span class="token keyword">in</span> w<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">&quot;__main__&quot;</span><span class="token punctuation">:</span>
    w <span class="token operator">=</span> WeaterIterator<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'北京'</span><span class="token punctuation">,</span> <span class="token string">'上海'</span><span class="token punctuation">,</span> <span class="token string">'广州'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>w<span class="token punctuation">.</span>__next__<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>w<span class="token punctuation">.</span>__iter__<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    show<span class="token punctuation">(</span>w<span class="token punctuation">)</span>

<span class="token comment"># ('北京', 28.3, 39.0)</span>
<span class="token comment"># &lt;__main__.WeaterIterator object at 0x7f9e9ce8eaf0&gt;</span>
<span class="token comment"># ('上海', 20.2, 99.0)</span>
<span class="token comment"># ('广州', 33.0, 53.0)</span>


<span class="token triple-quoted-string string">&quot;&quot;&quot;
★  --方案二
&quot;&quot;&quot;</span>
<span class="token keyword">import</span> requests

<span class="token keyword">class</span> <span class="token class-name">Weater</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> citys<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>citys <span class="token operator">=</span> citys

    <span class="token keyword">def</span> <span class="token function">__iter__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">for</span> city <span class="token keyword">in</span> self<span class="token punctuation">.</span>citys<span class="token punctuation">:</span>
            <span class="token keyword">yield</span> self<span class="token punctuation">.</span>get_weather<span class="token punctuation">(</span>city<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">get_weather</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> city<span class="token punctuation">)</span><span class="token punctuation">:</span>
        url <span class="token operator">=</span> <span class="token string">&quot;http://www.jcznedu.com:5000/weather/now/?city=&quot;</span> <span class="token operator">+</span> city
        r <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">)</span>
        data <span class="token operator">=</span> r<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">&quot;data&quot;</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">&quot;now&quot;</span><span class="token punctuation">]</span>
        <span class="token keyword">return</span> city<span class="token punctuation">,</span> data<span class="token punctuation">[</span><span class="token string">'temperature'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> data<span class="token punctuation">[</span><span class="token string">'humidity'</span><span class="token punctuation">]</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">&quot;__main__&quot;</span><span class="token punctuation">:</span>
    w <span class="token operator">=</span> Weater<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'北京'</span><span class="token punctuation">,</span> <span class="token string">'上海'</span><span class="token punctuation">,</span> <span class="token string">'广州'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token comment"># -- for循环的时候,会调用w对象重写的__iter__方法,里面有yield关键字</span>
    <span class="token comment">#    w.__iter__()得到一个迭代器 for循环再不断__next__取值</span>
    <span class="token comment">#    print(w.__iter__().__next__())</span>
    <span class="token comment"># print(type(w.__iter__()))  # &lt;class 'generator'&gt;</span>
    <span class="token keyword">for</span> x <span class="token keyword">in</span> w<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
<span class="token comment"># ('北京', 28.5, 39.0)</span>
<span class="token comment"># ('上海', 20.2, 100.0)</span>
<span class="token comment"># ('广州', 33.1, 51.0)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br></div></div><h3 id="查找素数"><a href="#查找素数" class="header-anchor">#</a> 查找素数</h3> <blockquote><p>实现一个可迭代对象的类,它能迭代出给定范围内所有素数:<br>
     质数即素数.指在大于1的自然数中,只能被1和自身整除的自然数</p> <p>pn = PrimeNumbers(1,30)<br>
print([k for k in pn])<br>
输出结果:<br>
[2,3,5,7,11,13,17,19,23,29]</p></blockquote> <p>△方案一: for循环得到迭代器对象<br>
△方案二: for循环得到生成器对象</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;
★  --方案一
&quot;&quot;&quot;</span>
<span class="token keyword">class</span> <span class="token class-name">PrimeNumbers</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>a <span class="token operator">=</span> a
        self<span class="token punctuation">.</span>b <span class="token operator">=</span> b

    <span class="token keyword">def</span> <span class="token function">__iter__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self

    <span class="token keyword">def</span> <span class="token function">__next__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>a <span class="token operator">&lt;</span> self<span class="token punctuation">.</span>b <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> self<span class="token punctuation">.</span>is_prime<span class="token punctuation">(</span>self<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">:</span>
                index <span class="token operator">=</span> self<span class="token punctuation">.</span>a
                self<span class="token punctuation">.</span>a <span class="token operator">+=</span> <span class="token number">1</span>
                <span class="token keyword">return</span> index
            self<span class="token punctuation">.</span>a <span class="token operator">+=</span> <span class="token number">1</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token keyword">raise</span> StopIteration

    <span class="token keyword">def</span> <span class="token function">is_prime</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> k<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># -- 5%2 5%3 5%4 都有余数,证明5就是质数</span>
        <span class="token keyword">return</span> <span class="token boolean">False</span> <span class="token keyword">if</span> k <span class="token operator">&lt;</span> <span class="token number">2</span> <span class="token keyword">else</span> <span class="token builtin">all</span><span class="token punctuation">(</span><span class="token builtin">map</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> k <span class="token operator">%</span> x<span class="token punctuation">,</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> k <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

pn <span class="token operator">=</span> PrimeNumbers<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> n <span class="token keyword">in</span> pn<span class="token punctuation">:</span>
    <span class="token keyword">if</span> n <span class="token operator">!=</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> end<span class="token operator">=</span><span class="token string">' '</span><span class="token punctuation">)</span>

        
<span class="token triple-quoted-string string">&quot;&quot;&quot;
★  --方案二
&quot;&quot;&quot;</span>
<span class="token keyword">from</span> inspect <span class="token keyword">import</span> isgenerator

<span class="token keyword">class</span> <span class="token class-name">PrimeNumbers</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>a <span class="token operator">=</span> a
        self<span class="token punctuation">.</span>b <span class="token operator">=</span> b

    <span class="token keyword">def</span> <span class="token function">__iter__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">for</span> k <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>a<span class="token punctuation">,</span> self<span class="token punctuation">.</span>b <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> self<span class="token punctuation">.</span>is_prime<span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">:</span>
                <span class="token keyword">yield</span> k

    <span class="token keyword">def</span> <span class="token function">is_prime</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> k<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># -- 不会有浪费, all碰到一个假就会返回False</span>
        <span class="token keyword">return</span> <span class="token boolean">False</span> <span class="token keyword">if</span> k <span class="token operator">&lt;</span> <span class="token number">2</span> <span class="token keyword">else</span> <span class="token builtin">all</span><span class="token punctuation">(</span><span class="token builtin">map</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> k <span class="token operator">%</span> x<span class="token punctuation">,</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> k <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

pn <span class="token operator">=</span> PrimeNumbers<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span>
<span class="token comment"># -- 这里它变成了生成器 `yield k` k是next()函数的返回值.</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>isgenerator<span class="token punctuation">(</span><span class="token builtin">iter</span><span class="token punctuation">(</span>pn<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># True</span>

<span class="token keyword">for</span> n <span class="token keyword">in</span> pn<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> end<span class="token operator">=</span><span class="token string">' '</span><span class="token punctuation">)</span>  <span class="token comment"># -- 2 3 5 7 11 13 17 19 23 29</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br></div></div><h3 id="浮点数发生器"><a href="#浮点数发生器" class="header-anchor">#</a> 浮点数发生器</h3> <blockquote><p>实现一个连续浮点数发生器FloatRange(和range类似),<br>
根据给定的范围(start,end)和步进值(step)产生一系列连续浮点数,<br>
如迭代FloatRange(3.0,4.0,0.2) 可产生序列:</p> <p>正向: 3.0 -&gt; 3.2 -&gt; 3.4 -&gt; 3.6 -&gt; 3.8 -&gt; 4.0<br>
反向: 4.0 -&gt; 3.8 -&gt; 3.6 -&gt; 3.4 -&gt; 3.2 -&gt; 3.0</p></blockquote> <p>解决方案: <font color="blue">实现反向迭代协议的 <code>__reversed__</code> 方法</font>,它返回一个反向迭代器.</p> <p><font color="red">reversed()方法的本质是序列的底层实现了<code>__reversed__</code> 方法</font></p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">reversed</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
<span class="token operator">&lt;</span>list_reverseiterator <span class="token builtin">object</span> at <span class="token number">0x7ff5b973f2b0</span><span class="token operator">&gt;</span>  <span class="token comment"># -- 得到一个反向迭代器</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">reversed</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">.</span>__next__<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token number">3</span>

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">iter</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
<span class="token operator">&lt;</span>list_iterator <span class="token builtin">object</span> at <span class="token number">0x7ff5b97a4700</span><span class="token operator">&gt;</span>  <span class="token comment"># -- 得到一个正向迭代器</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><font color="red">浮点数的误差</font></p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">from</span> decimal <span class="token keyword">import</span> Decimal
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> Decimal<span class="token punctuation">(</span><span class="token string">'0.1'</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">3</span>
Decimal<span class="token punctuation">(</span><span class="token string">'0.3'</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token number">0.1</span><span class="token operator">*</span><span class="token number">3</span>
<span class="token number">0.30000000000000004</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> Decimal<span class="token punctuation">(</span><span class="token string">'0.2'</span><span class="token punctuation">)</span><span class="token operator">+</span>Decimal<span class="token punctuation">(</span><span class="token string">'0.3'</span><span class="token punctuation">)</span>  <span class="token comment"># -- 有些浮点数存在误差,为了避免,先把浮点数转换为字符串</span>
Decimal<span class="token punctuation">(</span><span class="token string">'0.5'</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">float</span><span class="token punctuation">(</span>Decimal<span class="token punctuation">(</span><span class="token string">'0.2'</span><span class="token punctuation">)</span><span class="token operator">+</span>Decimal<span class="token punctuation">(</span><span class="token string">'0.3'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token number">0.5</span>
<span class="token comment"># -- 2.675保留两位小数四舍五入结果是2.67而不是2.68,因为2.675在内部的存储值是2.647999999..</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">round</span><span class="token punctuation">(</span><span class="token number">2.675</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token number">2.67</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><strong>连续浮点数发生器代码如下:</strong></p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> decimal <span class="token keyword">import</span> Decimal  <span class="token comment"># -- py标准库中专门处理十进制浮点数的库</span>

<span class="token keyword">class</span> <span class="token class-name">FloatRange</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> step<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># -- 使用实例属性维护传入的这几个参数</span>
        self<span class="token punctuation">.</span>a <span class="token operator">=</span> Decimal<span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>b <span class="token operator">=</span> Decimal<span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>step <span class="token operator">=</span> Decimal<span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span>step<span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">__iter__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        t <span class="token operator">=</span> self<span class="token punctuation">.</span>a
        <span class="token keyword">while</span> t <span class="token operator">&lt;=</span> self<span class="token punctuation">.</span>b<span class="token punctuation">:</span>
            <span class="token keyword">yield</span> <span class="token builtin">float</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span>
            t <span class="token operator">+=</span> self<span class="token punctuation">.</span>step

    <span class="token keyword">def</span> <span class="token function">__reversed__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        t <span class="token operator">=</span> self<span class="token punctuation">.</span>b
        <span class="token keyword">while</span> t <span class="token operator">&gt;=</span> self<span class="token punctuation">.</span>a<span class="token punctuation">:</span>
            <span class="token keyword">yield</span> <span class="token builtin">float</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span>
            t <span class="token operator">-=</span> self<span class="token punctuation">.</span>step

fr <span class="token operator">=</span> FloatRange<span class="token punctuation">(</span><span class="token number">3.0</span><span class="token punctuation">,</span> <span class="token number">4.0</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> x <span class="token keyword">in</span> fr<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'-'</span> <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">)</span>

<span class="token keyword">for</span> x <span class="token keyword">in</span> <span class="token builtin">reversed</span><span class="token punctuation">(</span>fr<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
    
<span class="token triple-quoted-string string">&quot;&quot;&quot;
3.0
3.2
3.4
3.6
3.8
4.0
----------
4.0
3.8
3.6
3.4
3.2
3.0
&quot;&quot;&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br></div></div><h3 id="并行与串行"><a href="#并行与串行" class="header-anchor">#</a> 并行与串行</h3> <blockquote><p>在for语句中迭代多个可迭代对象</p> <p><strong>(并行)</strong> 某班学生期末考试成绩,语文、数学、英语分别存储在三个列表中<br>
     同时迭代三个列表,计算每个学生的总分.<br> <strong>(串行)</strong> 某年级有4个班,某次考试每班英语成绩分别存储在4个列表中<br>
     依次迭代每个列表统计全学年成绩高于90分人数.</p></blockquote> <p><strong>并行:</strong> 使用内置函数zip,它能将多个迭代对象合并,每次迭代返回一个元祖.<br> <strong>串行:</strong> <font color="blue">使用标准库中的<code>itertools.chain</code></font> ,它能将多个可迭代对象连接.</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;
★  --并行
&quot;&quot;&quot;</span>
▲ 数据准备
<span class="token keyword">from</span> random <span class="token keyword">import</span> randint

chinese <span class="token operator">=</span> <span class="token punctuation">[</span>randint<span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
math <span class="token operator">=</span> <span class="token punctuation">[</span>randint<span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
english <span class="token operator">=</span> <span class="token punctuation">[</span>randint<span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">]</span>

▲ 四种方式皆可
t1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">for</span> s1<span class="token punctuation">,</span> s2<span class="token punctuation">,</span> s3 <span class="token keyword">in</span> <span class="token builtin">zip</span><span class="token punctuation">(</span>chinese<span class="token punctuation">,</span> math<span class="token punctuation">,</span> english<span class="token punctuation">)</span><span class="token punctuation">:</span>
    t1<span class="token punctuation">.</span>append<span class="token punctuation">(</span>s1 <span class="token operator">+</span> s2 <span class="token operator">+</span> s3<span class="token punctuation">)</span>
    
t2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token builtin">sum</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token keyword">for</span> s <span class="token keyword">in</span> <span class="token builtin">zip</span><span class="token punctuation">(</span>chinese<span class="token punctuation">,</span> math<span class="token punctuation">,</span> english<span class="token punctuation">)</span><span class="token punctuation">]</span>
t3 <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">map</span><span class="token punctuation">(</span><span class="token builtin">sum</span><span class="token punctuation">,</span> <span class="token builtin">zip</span><span class="token punctuation">(</span>chinese<span class="token punctuation">,</span> math<span class="token punctuation">,</span> english<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
t4 <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">map</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> s1<span class="token punctuation">,</span> s2<span class="token punctuation">,</span> s3<span class="token punctuation">:</span> s1 <span class="token operator">+</span> s2 <span class="token operator">+</span> s3<span class="token punctuation">,</span> chinese<span class="token punctuation">,</span> math<span class="token punctuation">,</span> english<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># -- Ps: map实现zip函数的效果</span>
<span class="token comment">#    list(map(lambda *args: args, chinese, math, english))</span>
<span class="token comment">#    list(zip(chinese, math, english))</span>


<span class="token triple-quoted-string string">&quot;&quot;&quot;
★  --串行
&quot;&quot;&quot;</span>
<span class="token keyword">from</span> itertools <span class="token keyword">import</span> chain
<span class="token keyword">from</span> random <span class="token keyword">import</span> randint

<span class="token keyword">for</span> x <span class="token keyword">in</span> chain<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>end<span class="token operator">=</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span>  <span class="token comment"># -- 1 2 3 4 5 6 7</span>

c1 <span class="token operator">=</span> <span class="token punctuation">[</span>randint<span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
c2 <span class="token operator">=</span> <span class="token punctuation">[</span>randint<span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
c3 <span class="token operator">=</span> <span class="token punctuation">[</span>randint<span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">]</span>

<span class="token builtin">len</span><span class="token punctuation">(</span><span class="token punctuation">[</span>x <span class="token keyword">for</span> x <span class="token keyword">in</span> chain<span class="token punctuation">(</span>c1<span class="token punctuation">,</span> c2<span class="token punctuation">,</span> c3<span class="token punctuation">)</span> <span class="token keyword">if</span> x <span class="token operator">&gt;</span> <span class="token number">90</span><span class="token punctuation">]</span><span class="token punctuation">)</span>


<span class="token triple-quoted-string string">&quot;&quot;&quot;
★  --体验下*拆包与chain的作用
     OS:说实话,这种技巧.. -_- 无语子.
&quot;&quot;&quot;</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">from</span> itertools <span class="token keyword">import</span> chain
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">from</span> functools <span class="token keyword">import</span> <span class="token builtin">reduce</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s <span class="token operator">=</span> <span class="token string">'abc;123|xyz;678|fweuow\tjzka'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">';'</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token string">'abc'</span><span class="token punctuation">,</span> <span class="token string">'123|xyz'</span><span class="token punctuation">,</span> <span class="token string">'678|fweuow\tjzka'</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">map</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> ss<span class="token punctuation">:</span>ss<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'|'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>s<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">';'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'abc'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'123'</span><span class="token punctuation">,</span> <span class="token string">'xyz'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'678'</span><span class="token punctuation">,</span> <span class="token string">'fweuow\tjzka'</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">list</span><span class="token punctuation">(</span>chain<span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'abc'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'123'</span><span class="token punctuation">,</span> <span class="token string">'xyz'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'678'</span><span class="token punctuation">,</span> <span class="token string">'fweuow\tjzka'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token string">'abc'</span><span class="token punctuation">,</span> <span class="token string">'123'</span><span class="token punctuation">,</span> <span class="token string">'xyz'</span><span class="token punctuation">,</span> <span class="token string">'678'</span><span class="token punctuation">,</span> <span class="token string">'fweuow\tjzka'</span><span class="token punctuation">]</span>
<span class="token comment"># -- reduce(lambda data, sep: sum(map(lambda ss: ss.split(sep), data), []), ',;|\t',[s])</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">reduce</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> it_s<span class="token punctuation">,</span>sep<span class="token punctuation">:</span>chain<span class="token punctuation">(</span><span class="token operator">*</span><span class="token builtin">map</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> ss<span class="token punctuation">:</span>ss<span class="token punctuation">.</span>split<span class="token punctuation">(</span>sep<span class="token punctuation">)</span><span class="token punctuation">,</span>it_s<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">';|\t'</span><span class="token punctuation">,</span><span class="token punctuation">[</span>s<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token string">'abc'</span><span class="token punctuation">,</span> <span class="token string">'123'</span><span class="token punctuation">,</span> <span class="token string">'xyz'</span><span class="token punctuation">,</span> <span class="token string">'678'</span><span class="token punctuation">,</span> <span class="token string">'fweuow'</span><span class="token punctuation">,</span> <span class="token string">'jzka'</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br></div></div><hr></div></div> <!----> <div class="page-edit"><!----> <!----> <!----></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/d4c919/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">开胃小菜</div></a> <a href="/pages/a6e50e/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">小项目之ATM_shopping</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/d4c919/" class="prev">开胃小菜</a></span> <span class="next"><a href="/pages/a6e50e/">小项目之ATM_shopping</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/8sk2b3/"><div>
            搜索相关
            <!----></div></a> <span class="date">03-22</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/2kn2p2/"><div>
            CURD
            <!----></div></a> <span class="date">03-20</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/1kn1m1/"><div>
            自动生成
            <!----></div></a> <span class="date">03-15</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="https://github.com/OnePieceDC" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://www.cnblogs.com/DC0307/" title="博客园" target="_blank" class="iconfont icon-bokeyuan"></a><a href="https://music.163.com/#/song?id=1854188649" title="听音乐" target="_blank" class="iconfont icon-erji"></a><a href="https://www.jianshu.com/u/5310eb537315" title="简书" target="_blank" class="iconfont icon-jianshu"></a><a href="mailto:1415806497@qq.com" title="QQ" target="_blank" class="iconfont icon-youjian"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2023-2024
    <span>DC | One Piece</span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <div class="body-bg" style="background:url() center center / cover no-repeat;opacity:0.5;"></div> <!----> <!----></div><div class="global-ui"><!----><div id="goTop" class="hide-cat" data-v-8ccb5928></div><div></div><canvas id="vuepress-canvas-cursor"></canvas><div></div><div></div></div></div>
    <script src="/assets/js/app.ac54adc6.js" defer></script><script src="/assets/js/4.7ddc74e3.js" defer></script><script src="/assets/js/1.a0c4ff1b.js" defer></script><script src="/assets/js/3.8b03321d.js" defer></script><script src="/assets/js/219.628ee193.js" defer></script><script src="/assets/js/104.cae2d944.js" defer></script><script src="/assets/js/184.46eabf07.js" defer></script>
  </body>
</html>
