<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>函数基础 | DC&#39;s blog</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="/fonts/iconfont.css">
    <meta name="description" content="人类终将毁灭,世界属于三体!">
    <meta name="keywords" content="DC的个人博客.">
    
    <link rel="preload" href="/assets/css/0.styles.66b92039.css" as="style"><link rel="preload" href="/assets/js/app.ac54adc6.js" as="script"><link rel="preload" href="/assets/js/4.7ddc74e3.js" as="script"><link rel="preload" href="/assets/js/1.a0c4ff1b.js" as="script"><link rel="preload" href="/assets/js/3.8b03321d.js" as="script"><link rel="preload" href="/assets/js/124.cacc66be.js" as="script"><link rel="preload" href="/assets/js/104.cae2d944.js" as="script"><link rel="preload" href="/assets/js/184.46eabf07.js" as="script"><link rel="prefetch" href="/assets/js/10.a91ae011.js"><link rel="prefetch" href="/assets/js/100.2e8ea472.js"><link rel="prefetch" href="/assets/js/101.46f57a02.js"><link rel="prefetch" href="/assets/js/102.f51bcd80.js"><link rel="prefetch" href="/assets/js/103.3f003e0e.js"><link rel="prefetch" href="/assets/js/105.6c6ebc28.js"><link rel="prefetch" href="/assets/js/106.47dc8889.js"><link rel="prefetch" href="/assets/js/107.6b5602b4.js"><link rel="prefetch" href="/assets/js/108.46f0c21d.js"><link rel="prefetch" href="/assets/js/109.0f1168a5.js"><link rel="prefetch" href="/assets/js/11.e6a94228.js"><link rel="prefetch" href="/assets/js/110.6a961498.js"><link rel="prefetch" href="/assets/js/111.c6f27c88.js"><link rel="prefetch" href="/assets/js/112.9ee3d3bb.js"><link rel="prefetch" href="/assets/js/113.82b72aa0.js"><link rel="prefetch" href="/assets/js/114.7487460e.js"><link rel="prefetch" href="/assets/js/115.cd079d0a.js"><link rel="prefetch" href="/assets/js/116.b6b829eb.js"><link rel="prefetch" href="/assets/js/117.89d9336c.js"><link rel="prefetch" href="/assets/js/118.467c4437.js"><link rel="prefetch" href="/assets/js/119.c4b2ac40.js"><link rel="prefetch" href="/assets/js/12.9d3501e4.js"><link rel="prefetch" href="/assets/js/120.5ff31c09.js"><link rel="prefetch" href="/assets/js/121.2e59c3a5.js"><link rel="prefetch" href="/assets/js/122.a66096cf.js"><link rel="prefetch" href="/assets/js/123.4885ba5f.js"><link rel="prefetch" href="/assets/js/125.dc5b30fe.js"><link rel="prefetch" href="/assets/js/126.4e21eb5e.js"><link rel="prefetch" href="/assets/js/127.cb36a9bf.js"><link rel="prefetch" href="/assets/js/128.ce38358e.js"><link rel="prefetch" href="/assets/js/129.e5f414eb.js"><link rel="prefetch" href="/assets/js/13.ca017a68.js"><link rel="prefetch" href="/assets/js/130.17b597f0.js"><link rel="prefetch" href="/assets/js/131.e1ded2dc.js"><link rel="prefetch" href="/assets/js/132.aae1c627.js"><link rel="prefetch" href="/assets/js/133.73cecdb3.js"><link rel="prefetch" href="/assets/js/134.80cf38a0.js"><link rel="prefetch" href="/assets/js/135.735ed588.js"><link rel="prefetch" href="/assets/js/136.91f8db08.js"><link rel="prefetch" href="/assets/js/137.d6fb8bda.js"><link rel="prefetch" href="/assets/js/138.75cafe73.js"><link rel="prefetch" href="/assets/js/139.b01bf0db.js"><link rel="prefetch" href="/assets/js/14.ee2605b5.js"><link rel="prefetch" href="/assets/js/140.ff0a7911.js"><link rel="prefetch" href="/assets/js/141.c69e7f54.js"><link rel="prefetch" href="/assets/js/142.997b03ac.js"><link rel="prefetch" href="/assets/js/143.e40faea8.js"><link rel="prefetch" href="/assets/js/144.369f23e5.js"><link rel="prefetch" href="/assets/js/145.1268424d.js"><link rel="prefetch" href="/assets/js/146.94c65c4a.js"><link rel="prefetch" href="/assets/js/147.05fe6a36.js"><link rel="prefetch" href="/assets/js/148.327cc29d.js"><link rel="prefetch" href="/assets/js/149.90068676.js"><link rel="prefetch" href="/assets/js/15.42e0a0e4.js"><link rel="prefetch" href="/assets/js/150.b4b780bb.js"><link rel="prefetch" href="/assets/js/151.b4611012.js"><link rel="prefetch" href="/assets/js/152.4d2c8246.js"><link rel="prefetch" href="/assets/js/153.f32dfa58.js"><link rel="prefetch" href="/assets/js/154.b79a78fb.js"><link rel="prefetch" href="/assets/js/155.6ad2865c.js"><link rel="prefetch" href="/assets/js/156.fd49a1af.js"><link rel="prefetch" href="/assets/js/157.55113800.js"><link rel="prefetch" href="/assets/js/158.af321bc9.js"><link rel="prefetch" href="/assets/js/159.37d9c659.js"><link rel="prefetch" href="/assets/js/16.007f45b3.js"><link rel="prefetch" href="/assets/js/160.7a3b5a9a.js"><link rel="prefetch" href="/assets/js/161.fc1fbea8.js"><link rel="prefetch" href="/assets/js/162.2f8d3d1c.js"><link rel="prefetch" href="/assets/js/163.aa889940.js"><link rel="prefetch" href="/assets/js/164.5d8b2cb7.js"><link rel="prefetch" href="/assets/js/165.44d4a9b5.js"><link rel="prefetch" href="/assets/js/166.c1b4c4d4.js"><link rel="prefetch" href="/assets/js/167.0c39929e.js"><link rel="prefetch" href="/assets/js/168.fede035a.js"><link rel="prefetch" href="/assets/js/169.ff940d50.js"><link rel="prefetch" href="/assets/js/17.7395c644.js"><link rel="prefetch" href="/assets/js/170.b6fcb3bf.js"><link rel="prefetch" href="/assets/js/171.2b927a7c.js"><link rel="prefetch" href="/assets/js/172.b07a90a1.js"><link rel="prefetch" href="/assets/js/173.367352bf.js"><link rel="prefetch" href="/assets/js/174.4ea4e20f.js"><link rel="prefetch" href="/assets/js/175.d9679b61.js"><link rel="prefetch" href="/assets/js/176.f7804143.js"><link rel="prefetch" href="/assets/js/177.c5d1e680.js"><link rel="prefetch" href="/assets/js/178.808293fa.js"><link rel="prefetch" href="/assets/js/179.2acf6b3c.js"><link rel="prefetch" href="/assets/js/18.46f9153d.js"><link rel="prefetch" href="/assets/js/180.ddf3ecf7.js"><link rel="prefetch" href="/assets/js/181.4da0855c.js"><link rel="prefetch" href="/assets/js/182.591d135a.js"><link rel="prefetch" href="/assets/js/183.9d08f9fe.js"><link rel="prefetch" href="/assets/js/185.ee1c8428.js"><link rel="prefetch" href="/assets/js/186.c7b19133.js"><link rel="prefetch" href="/assets/js/187.52945990.js"><link rel="prefetch" href="/assets/js/188.a1d395c5.js"><link rel="prefetch" href="/assets/js/189.5b66165e.js"><link rel="prefetch" href="/assets/js/19.2db19edb.js"><link rel="prefetch" href="/assets/js/190.265a75de.js"><link rel="prefetch" href="/assets/js/191.b4c65143.js"><link rel="prefetch" href="/assets/js/192.cc4d4115.js"><link rel="prefetch" href="/assets/js/193.fa02ecc5.js"><link rel="prefetch" href="/assets/js/194.b0c9ad53.js"><link rel="prefetch" href="/assets/js/195.eda8cd34.js"><link rel="prefetch" href="/assets/js/196.cbae4dc6.js"><link rel="prefetch" href="/assets/js/197.693b1b85.js"><link rel="prefetch" href="/assets/js/198.8213665b.js"><link rel="prefetch" href="/assets/js/199.ddf0036d.js"><link rel="prefetch" href="/assets/js/2.4c15b693.js"><link rel="prefetch" href="/assets/js/20.6742e8ae.js"><link rel="prefetch" href="/assets/js/200.340df508.js"><link rel="prefetch" href="/assets/js/201.7431c15b.js"><link rel="prefetch" href="/assets/js/202.217b2b38.js"><link rel="prefetch" href="/assets/js/203.06c6a93d.js"><link rel="prefetch" href="/assets/js/204.a068a898.js"><link rel="prefetch" href="/assets/js/205.9361d3f5.js"><link rel="prefetch" href="/assets/js/206.886beca0.js"><link rel="prefetch" href="/assets/js/207.2278bda8.js"><link rel="prefetch" href="/assets/js/208.db0acc0d.js"><link rel="prefetch" href="/assets/js/209.0e05b204.js"><link rel="prefetch" href="/assets/js/21.fd552a4e.js"><link rel="prefetch" href="/assets/js/210.4c730041.js"><link rel="prefetch" href="/assets/js/211.417dbee1.js"><link rel="prefetch" href="/assets/js/212.eef4f4a3.js"><link rel="prefetch" href="/assets/js/213.ab742b0b.js"><link rel="prefetch" href="/assets/js/214.a57228de.js"><link rel="prefetch" href="/assets/js/215.37f52459.js"><link rel="prefetch" href="/assets/js/216.2f110f92.js"><link rel="prefetch" href="/assets/js/217.09654311.js"><link rel="prefetch" href="/assets/js/218.a7568950.js"><link rel="prefetch" href="/assets/js/219.628ee193.js"><link rel="prefetch" href="/assets/js/22.465a76d2.js"><link rel="prefetch" href="/assets/js/220.c5df9186.js"><link rel="prefetch" href="/assets/js/221.101ddb09.js"><link rel="prefetch" href="/assets/js/222.db210e3c.js"><link rel="prefetch" href="/assets/js/223.429cbf14.js"><link rel="prefetch" href="/assets/js/224.aa002868.js"><link rel="prefetch" href="/assets/js/225.79a40017.js"><link rel="prefetch" href="/assets/js/226.3e08228b.js"><link rel="prefetch" href="/assets/js/227.a09dd4b4.js"><link rel="prefetch" href="/assets/js/228.f930c492.js"><link rel="prefetch" href="/assets/js/229.f639a9e4.js"><link rel="prefetch" href="/assets/js/23.df6831af.js"><link rel="prefetch" href="/assets/js/230.e8ac7aad.js"><link rel="prefetch" href="/assets/js/231.99501214.js"><link rel="prefetch" href="/assets/js/232.e2932792.js"><link rel="prefetch" href="/assets/js/233.43dfa689.js"><link rel="prefetch" href="/assets/js/234.7951f9c4.js"><link rel="prefetch" href="/assets/js/235.1dc96b6c.js"><link rel="prefetch" href="/assets/js/236.40b8d4e4.js"><link rel="prefetch" href="/assets/js/237.75a692de.js"><link rel="prefetch" href="/assets/js/238.cc9d9ac1.js"><link rel="prefetch" href="/assets/js/239.4616a566.js"><link rel="prefetch" href="/assets/js/24.b68dc734.js"><link rel="prefetch" href="/assets/js/240.dd825147.js"><link rel="prefetch" href="/assets/js/241.85e3219b.js"><link rel="prefetch" href="/assets/js/242.bf4123c4.js"><link rel="prefetch" href="/assets/js/243.ce68f4f0.js"><link rel="prefetch" href="/assets/js/244.e2598d4d.js"><link rel="prefetch" href="/assets/js/245.2c696827.js"><link rel="prefetch" href="/assets/js/246.2c44a497.js"><link rel="prefetch" href="/assets/js/247.02405fce.js"><link rel="prefetch" href="/assets/js/248.6727bdf6.js"><link rel="prefetch" href="/assets/js/249.4901f575.js"><link rel="prefetch" href="/assets/js/25.d639c65c.js"><link rel="prefetch" href="/assets/js/250.c922c9ea.js"><link rel="prefetch" href="/assets/js/251.b1350ead.js"><link rel="prefetch" href="/assets/js/252.8295c5ea.js"><link rel="prefetch" href="/assets/js/253.b0a9ba20.js"><link rel="prefetch" href="/assets/js/254.d208b848.js"><link rel="prefetch" href="/assets/js/255.2cfb6ad3.js"><link rel="prefetch" href="/assets/js/256.e7687a81.js"><link rel="prefetch" href="/assets/js/257.db329d54.js"><link rel="prefetch" href="/assets/js/258.be75b1f9.js"><link rel="prefetch" href="/assets/js/259.67500f7e.js"><link rel="prefetch" href="/assets/js/26.9db429a9.js"><link rel="prefetch" href="/assets/js/260.73609cfa.js"><link rel="prefetch" href="/assets/js/261.22fc7c08.js"><link rel="prefetch" href="/assets/js/262.2c620ccd.js"><link rel="prefetch" href="/assets/js/263.e0ce1454.js"><link rel="prefetch" href="/assets/js/264.7fe82318.js"><link rel="prefetch" href="/assets/js/265.537d06c5.js"><link rel="prefetch" href="/assets/js/266.901695a7.js"><link rel="prefetch" href="/assets/js/267.8eb24590.js"><link rel="prefetch" href="/assets/js/268.a21e44dc.js"><link rel="prefetch" href="/assets/js/269.33e6ce5d.js"><link rel="prefetch" href="/assets/js/27.2296e284.js"><link rel="prefetch" href="/assets/js/270.31507ac3.js"><link rel="prefetch" href="/assets/js/271.b9406b42.js"><link rel="prefetch" href="/assets/js/272.0acaba6f.js"><link rel="prefetch" href="/assets/js/273.c2e359b0.js"><link rel="prefetch" href="/assets/js/274.a80428a6.js"><link rel="prefetch" href="/assets/js/28.7e4f4dc1.js"><link rel="prefetch" href="/assets/js/29.ba75f79a.js"><link rel="prefetch" href="/assets/js/30.16cd3622.js"><link rel="prefetch" href="/assets/js/31.54ed5bc1.js"><link rel="prefetch" href="/assets/js/32.b2fbba6a.js"><link rel="prefetch" href="/assets/js/33.f7ff0107.js"><link rel="prefetch" href="/assets/js/34.4b2cea7d.js"><link rel="prefetch" href="/assets/js/35.1159e74c.js"><link rel="prefetch" href="/assets/js/36.0b6296f3.js"><link rel="prefetch" href="/assets/js/37.fc67879e.js"><link rel="prefetch" href="/assets/js/38.637afaf8.js"><link rel="prefetch" href="/assets/js/39.748a78f3.js"><link rel="prefetch" href="/assets/js/40.4fede9bb.js"><link rel="prefetch" href="/assets/js/41.c7f0b087.js"><link rel="prefetch" href="/assets/js/42.5b1a487d.js"><link rel="prefetch" href="/assets/js/43.59275b93.js"><link rel="prefetch" href="/assets/js/44.b18a4c94.js"><link rel="prefetch" href="/assets/js/45.bc8f7cb3.js"><link rel="prefetch" href="/assets/js/46.6a4ec89f.js"><link rel="prefetch" href="/assets/js/47.e1e129e6.js"><link rel="prefetch" href="/assets/js/48.c284ce23.js"><link rel="prefetch" href="/assets/js/49.17e5dd65.js"><link rel="prefetch" href="/assets/js/5.e3d12916.js"><link rel="prefetch" href="/assets/js/50.34c3ac45.js"><link rel="prefetch" href="/assets/js/51.035f7031.js"><link rel="prefetch" href="/assets/js/52.e9ef227a.js"><link rel="prefetch" href="/assets/js/53.ecbb032d.js"><link rel="prefetch" href="/assets/js/54.e9af4cfe.js"><link rel="prefetch" href="/assets/js/55.7e71402b.js"><link rel="prefetch" href="/assets/js/56.511071fe.js"><link rel="prefetch" href="/assets/js/57.13b7fe79.js"><link rel="prefetch" href="/assets/js/58.e51f8b0e.js"><link rel="prefetch" href="/assets/js/59.a1b8bdb7.js"><link rel="prefetch" href="/assets/js/6.5fc3f358.js"><link rel="prefetch" href="/assets/js/60.fd7e1c08.js"><link rel="prefetch" href="/assets/js/61.0daf2361.js"><link rel="prefetch" href="/assets/js/62.04632944.js"><link rel="prefetch" href="/assets/js/63.f0dd5615.js"><link rel="prefetch" href="/assets/js/64.89a4b562.js"><link rel="prefetch" href="/assets/js/65.6764ff0c.js"><link rel="prefetch" href="/assets/js/66.049bdee1.js"><link rel="prefetch" href="/assets/js/67.b0d4ec16.js"><link rel="prefetch" href="/assets/js/68.46d97067.js"><link rel="prefetch" href="/assets/js/69.f540f0da.js"><link rel="prefetch" href="/assets/js/7.ce17dd73.js"><link rel="prefetch" href="/assets/js/70.17d8f857.js"><link rel="prefetch" href="/assets/js/71.b2a166a0.js"><link rel="prefetch" href="/assets/js/72.1c17a875.js"><link rel="prefetch" href="/assets/js/73.dac8984b.js"><link rel="prefetch" href="/assets/js/74.5bbc33ac.js"><link rel="prefetch" href="/assets/js/75.483644c7.js"><link rel="prefetch" href="/assets/js/76.de5461ab.js"><link rel="prefetch" href="/assets/js/77.7fa90702.js"><link rel="prefetch" href="/assets/js/78.f41853b8.js"><link rel="prefetch" href="/assets/js/79.598b50e6.js"><link rel="prefetch" href="/assets/js/80.61d2d23a.js"><link rel="prefetch" href="/assets/js/81.d310c6e4.js"><link rel="prefetch" href="/assets/js/82.22aa814c.js"><link rel="prefetch" href="/assets/js/83.f493eba4.js"><link rel="prefetch" href="/assets/js/84.3a32a1eb.js"><link rel="prefetch" href="/assets/js/85.2f47134e.js"><link rel="prefetch" href="/assets/js/86.74e65a77.js"><link rel="prefetch" href="/assets/js/87.e87bff96.js"><link rel="prefetch" href="/assets/js/88.aabc97af.js"><link rel="prefetch" href="/assets/js/89.b0945d87.js"><link rel="prefetch" href="/assets/js/90.630f62d3.js"><link rel="prefetch" href="/assets/js/91.ed816647.js"><link rel="prefetch" href="/assets/js/92.19065457.js"><link rel="prefetch" href="/assets/js/93.a0fe1919.js"><link rel="prefetch" href="/assets/js/94.51e48580.js"><link rel="prefetch" href="/assets/js/95.e591bede.js"><link rel="prefetch" href="/assets/js/96.1723f1d6.js"><link rel="prefetch" href="/assets/js/97.02bbb7d4.js"><link rel="prefetch" href="/assets/js/98.a3625ba6.js"><link rel="prefetch" href="/assets/js/99.1accbf48.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.5959bfd2.js">
    <link rel="stylesheet" href="/assets/css/0.styles.66b92039.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu have-body-img"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/nav-logo.png" alt="DC's blog" class="logo"> <span class="site-name can-hide">DC's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="IT必备" class="dropdown-title"><a href="/IT/" class="link-title">IT必备</a> <span class="title" style="display:none;">IT必备</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/IT/basis/" class="nav-link">计算机基础</a></li><li class="dropdown-item"><!----> <a href="/IT/linux/" class="nav-link">linux基础</a></li><li class="dropdown-item"><!----> <a href="/IT/mysql/" class="nav-link">mysql</a></li><li class="dropdown-item"><!----> <a href="/IT/git/" class="nav-link">git</a></li><li class="dropdown-item"><!----> <a href="/IT/structure/" class="nav-link">数据结构与算法</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Python" class="dropdown-title"><a href="/python/" class="link-title">Python</a> <span class="title" style="display:none;">Python</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/python/basis/" class="nav-link">opp</a></li><li class="dropdown-item"><!----> <a href="/python/oop/" class="nav-link">oop</a></li><li class="dropdown-item"><!----> <a href="/python/Network_concurrency/" class="nav-link">网络并发编程</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/front_end/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front_end/html/" class="nav-link">html</a></li><li class="dropdown-item"><!----> <a href="/front_end/css/" class="nav-link">css</a></li><li class="dropdown-item"><!----> <a href="/front_end/js/" class="nav-link">javascript</a></li><li class="dropdown-item"><!----> <a href="/front_end/jquery/" class="nav-link">jquery</a></li><li class="dropdown-item"><!----> <a href="/front_end/ui/" class="nav-link">UI</a></li><li class="dropdown-item"><!----> <a href="/front_end/vue/" class="nav-link">vue</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><a href="/python_web/" class="link-title">后端</a> <span class="title" style="display:none;">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/python_web/django/" class="nav-link">Django</a></li><li class="dropdown-item"><!----> <a href="/python_web/drf/" class="nav-link">drf</a></li><li class="dropdown-item"><!----> <a href="/python_web/drf_re/" class="nav-link">drf_re</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="实战" class="dropdown-title"><a href="/project/" class="link-title">实战</a> <span class="title" style="display:none;">实战</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>前后端不分离</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/project/bbs/" class="nav-link">BBS</a></li><li class="dropdown-subitem"><a href="/project/order/" class="nav-link">订单系统</a></li><li class="dropdown-subitem"><a href="/project/crm/" class="nav-link">CRM</a></li></ul></li><li class="dropdown-item"><h4>前后端分离</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/project/supply/" class="nav-link">供应链系统</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><a href="/other/" class="link-title">其他</a> <span class="title" style="display:none;">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/other/essays/" class="nav-link">杂文</a></li><li class="dropdown-item"><h4>关于我</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/about/" class="nav-link">me</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><!----> <span class="title" style="display:;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/OnePieceDC/" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="/img/avatar.gif"> <div class="blogger-info"><h3>DC</h3> <span>愿我一生欢喜,不为世俗所及.</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="IT必备" class="dropdown-title"><a href="/IT/" class="link-title">IT必备</a> <span class="title" style="display:none;">IT必备</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/IT/basis/" class="nav-link">计算机基础</a></li><li class="dropdown-item"><!----> <a href="/IT/linux/" class="nav-link">linux基础</a></li><li class="dropdown-item"><!----> <a href="/IT/mysql/" class="nav-link">mysql</a></li><li class="dropdown-item"><!----> <a href="/IT/git/" class="nav-link">git</a></li><li class="dropdown-item"><!----> <a href="/IT/structure/" class="nav-link">数据结构与算法</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Python" class="dropdown-title"><a href="/python/" class="link-title">Python</a> <span class="title" style="display:none;">Python</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/python/basis/" class="nav-link">opp</a></li><li class="dropdown-item"><!----> <a href="/python/oop/" class="nav-link">oop</a></li><li class="dropdown-item"><!----> <a href="/python/Network_concurrency/" class="nav-link">网络并发编程</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/front_end/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front_end/html/" class="nav-link">html</a></li><li class="dropdown-item"><!----> <a href="/front_end/css/" class="nav-link">css</a></li><li class="dropdown-item"><!----> <a href="/front_end/js/" class="nav-link">javascript</a></li><li class="dropdown-item"><!----> <a href="/front_end/jquery/" class="nav-link">jquery</a></li><li class="dropdown-item"><!----> <a href="/front_end/ui/" class="nav-link">UI</a></li><li class="dropdown-item"><!----> <a href="/front_end/vue/" class="nav-link">vue</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><a href="/python_web/" class="link-title">后端</a> <span class="title" style="display:none;">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/python_web/django/" class="nav-link">Django</a></li><li class="dropdown-item"><!----> <a href="/python_web/drf/" class="nav-link">drf</a></li><li class="dropdown-item"><!----> <a href="/python_web/drf_re/" class="nav-link">drf_re</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="实战" class="dropdown-title"><a href="/project/" class="link-title">实战</a> <span class="title" style="display:none;">实战</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>前后端不分离</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/project/bbs/" class="nav-link">BBS</a></li><li class="dropdown-subitem"><a href="/project/order/" class="nav-link">订单系统</a></li><li class="dropdown-subitem"><a href="/project/crm/" class="nav-link">CRM</a></li></ul></li><li class="dropdown-item"><h4>前后端分离</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/project/supply/" class="nav-link">供应链系统</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><a href="/other/" class="link-title">其他</a> <span class="title" style="display:none;">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/other/essays/" class="nav-link">杂文</a></li><li class="dropdown-item"><h4>关于我</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/about/" class="nav-link">me</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><!----> <span class="title" style="display:;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/OnePieceDC/" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>python面向过程</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/7db416/" class="sidebar-link">Python语言介绍</a></li><li><a href="/pages/3beb21/" class="sidebar-link">基本运算符和流程控制</a></li><li><a href="/pages/e8386b/" class="sidebar-link">数据类型之序列</a></li><li><a href="/pages/49737b/" class="sidebar-link">数据类型之哈希</a></li><li><a href="/pages/17fb72/" aria-current="page" class="active sidebar-link">函数基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/17fb72/#函数的定义调用" class="sidebar-link">函数的定义调用</a></li><li class="sidebar-sub-header level2"><a href="/pages/17fb72/#函数参数传递" class="sidebar-link">函数参数传递</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/17fb72/#赋值操作" class="sidebar-link">赋值操作</a></li><li class="sidebar-sub-header level3"><a href="/pages/17fb72/#传递不可变对象" class="sidebar-link">传递不可变对象</a></li><li class="sidebar-sub-header level3"><a href="/pages/17fb72/#传递可变对象" class="sidebar-link">传递可变对象</a></li><li class="sidebar-sub-header level3"><a href="/pages/17fb72/#unboundlocalerror" class="sidebar-link">UnboundLocalError</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/17fb72/#函数形参和实参" class="sidebar-link">函数形参和实参</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/17fb72/#定义函数时-行参" class="sidebar-link">定义函数时 -- 行参</a></li><li class="sidebar-sub-header level3"><a href="/pages/17fb72/#调用函数时-实参" class="sidebar-link">调用函数时 -- 实参</a></li><li class="sidebar-sub-header level3"><a href="/pages/17fb72/#默认形参陷阱" class="sidebar-link">默认形参陷阱</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/17fb72/#函数命名空间与作用域" class="sidebar-link">函数命名空间与作用域</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/17fb72/#函数对象" class="sidebar-link">函数对象</a></li><li class="sidebar-sub-header level5"><a href="/pages/17fb72/#函数是第一类对象" class="sidebar-link">函数是第一类对象</a></li><li class="sidebar-sub-header level5"><a href="/pages/17fb72/#函数嵌套定义" class="sidebar-link">函数嵌套定义</a></li><li class="sidebar-sub-header level5"><a href="/pages/17fb72/#打破层级限制" class="sidebar-link">打破层级限制</a></li><li class="sidebar-sub-header level3"><a href="/pages/17fb72/#命名空间scope-栈区" class="sidebar-link">命名空间scope/栈区</a></li><li class="sidebar-sub-header level5"><a href="/pages/17fb72/#命名空间概念" class="sidebar-link">命名空间概念</a></li><li class="sidebar-sub-header level5"><a href="/pages/17fb72/#命名空间分类" class="sidebar-link">命名空间分类</a></li><li class="sidebar-sub-header level5"><a href="/pages/17fb72/#命名空间与代码块的关系" class="sidebar-link">命名空间与代码块的关系</a></li><li class="sidebar-sub-header level5"><a href="/pages/17fb72/#命名空间生命周期" class="sidebar-link">命名空间生命周期</a></li><li class="sidebar-sub-header level5"><a href="/pages/17fb72/#变量加载查询顺序" class="sidebar-link">变量加载查询顺序</a></li><li class="sidebar-sub-header level3"><a href="/pages/17fb72/#作用域" class="sidebar-link">作用域</a></li><li class="sidebar-sub-header level5"><a href="/pages/17fb72/#概念" class="sidebar-link">概念</a></li><li class="sidebar-sub-header level5"><a href="/pages/17fb72/#legb" class="sidebar-link">LEGB</a></li><li class="sidebar-sub-header level5"><a href="/pages/17fb72/#globals-、locals" class="sidebar-link">globals()、locals()</a></li><li class="sidebar-sub-header level5"><a href="/pages/17fb72/#global、nonlocal" class="sidebar-link">global、nonlocal</a></li></ul></li></ul></li><li><a href="/pages/bd8ead/" class="sidebar-link">函数高级</a></li><li><a href="/pages/1654ca/" class="sidebar-link">函数进阶</a></li><li><a href="/pages/3134ef/" class="sidebar-link">文件处理</a></li><li><a href="/pages/41e853/" class="sidebar-link">必用模块</a></li><li><a href="/pages/fe6035/" class="sidebar-link">常用模块</a></li><li><a href="/pages/9cb17f/" class="sidebar-link">模块导入与包</a></li><li><a href="/pages/d4c919/" class="sidebar-link">开胃小菜</a></li><li><a href="/pages/d74f40/" class="sidebar-link">饶头训练</a></li><li><a href="/pages/a6e50e/" class="sidebar-link">小项目之ATM_shopping</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>python面向对象</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>网络并发编程</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-91157402><div class="articleInfo" data-v-91157402><ul class="breadcrumbs" data-v-91157402><li data-v-91157402><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-91157402></a></li> <li data-v-91157402><a href="/categories/?category=python_Need" title="分类" data-v-91157402>python_Need</a></li><li data-v-91157402><a href="/categories/?category=python%E9%9D%A2%E5%90%91%E8%BF%87%E7%A8%8B" title="分类" data-v-91157402>python面向过程</a></li></ul> <div class="info" data-v-91157402><div title="作者" class="author iconfont icon-touxiang" data-v-91157402><a href="https://github.com/OnePieceDC" target="_blank" title="作者" class="beLink" data-v-91157402>DC</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-91157402><a href="javascript:;" data-v-91157402>2023-11-28</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">函数基础<!----></h1> <!----> <div class="theme-vdoing-content content__default"><p><font color="red" size="5">在函数开始之前,声明下我的一个基础概念的认知错误, namescope指的是命名空间! scope指的是作用域! 我混用了..在类的学习中才认识到这个问题.. 问题不大.</font></p> <h2 id="函数的定义调用"><a href="#函数的定义调用" class="header-anchor">#</a> 函数的定义调用</h2> <blockquote><p><strong>函数的使用必须遵循先定义,后调用的原则</strong></p></blockquote> <p><font color="brown">扩展: 提高健壮性</font> -- <code>https://www.cnblogs.com/liuqingzheng/p/11012099.html</code> <font color="gray">(该篇博文的开头写错了, python是一门强类型语言!!不是弱类型.)</font><br> <font size="2">使用该方式,传递的实参或者返回的数据不是指定的类型,不会报错,指定的那些东西也不会允许,只是辅助,写来方便看的..<br>像java和go这些编译型语言,必须指定类型并且传指定的类型,不然报错.. 非常严格.</font> <font color="brown">动态一时爽, 重构火葬场.</font></p> <p>Python中的错误至少有两种:<br> <font color="blue">语法/解析错误</font>     --     语句或表达式在语法上的错误<br> <font color="blue">异常</font>     --     在执行时检测到的错误被称为异常</p> <p>函数 <strong>定义</strong> 阶段: <font color="blue">只检测函数体的语法,不执行函数体代码</font><br>
函数 <strong>调用</strong> 阶段: 执行函数体代码</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;
a.py模块下只有这些代码,运行a.py文件. 第5行会报语法错误.
第二行没报错,证明了在定义阶段函数体代码是不会执行的!!
打开注释 调用func函数,开始执行函数体代码,第二行会报UnboundLocalError的异常
&quot;&quot;&quot;</span>
<span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    a
    a <span class="token operator">=</span> b <span class="token operator">+</span> <span class="token number">1</span>
    yuasyf
 		m n p
<span class="token comment"># func()</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>函数定义的 <strong>规范</strong> 写法:</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">def</span> 函数名<span class="token punctuation">(</span>参数<span class="token number">1</span><span class="token punctuation">,</span>参数<span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
  <span class="token triple-quoted-string string">&quot;&quot;&quot;
  函数功能描述消息
  :param 参数1:描述
  :param 参数2:描述
  :return: 返回值
  &quot;&quot;&quot;</span>
  <span class="token keyword">pass</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>函数返回值</strong><br>
        函数中不写return或return不带任何返回值,都相当于在函数体最后一行添加 <code>return None</code></p> <hr> <h2 id="函数参数传递"><a href="#函数参数传递" class="header-anchor">#</a> 函数参数传递</h2> <blockquote><p>敲重点, 函数参数传递等同于直接赋值, 根据 定理1 , 函数被调用后, 函数的参数就是局部变量!!</p></blockquote> <h3 id="赋值操作"><a href="#赋值操作" class="header-anchor">#</a> 赋值操作</h3> <blockquote><p>在理清函数参数传递之前,要先记住两个重要的定理!! 非常重要! 知其然要知其所以然..</p></blockquote> <p>◎ <strong>定理1</strong>: <font color="brown">python在作用域里对变量的 <strong>赋值操作</strong> 规则: </font><br> <font color="red">若被赋值的变量在该作用域已存在,则对其绑定新的对象; 若不存在,则将此次赋值视为对这个变量的定义..</font><br>
     提一嘴哈,定理1的由来跟变量的可见性的判定有关!!</p> <p>◎ <strong>定理2</strong>: <font color="brown">python中的绑定操作(eg 赋值)都是对象引用(内存地址)的传递</font><br> <font color="purple">换个说法,一系列的绑定操作都是在传递某一对象的地址给某一变量名进行绑定!!</font></p> <p><font color="blue">引用是啥？引用就是指向. 变量名指向自身绑定对象的内存地址!! </font> <br>
​<font color="green">被赋值 = (右侧的变量/对象们)被引用</font>   --  找到引用变量绑定的对象, 进行运算后的结果/对象 传递给被赋值的变量</p> <p><strong>在这里,体会下 <font color="brown">&quot;python引用语义&quot;</font> 带来的 <font color="brown">坑</font>..</strong>	▲需求:循环去除列表中的3</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;
分析: 我们知道,A操作会根据nums列表的 &quot;下标&quot; 1、2、3..的顺序循环取值赋值给i  
    即i变量是nums[0]、nums[1]、nums[2]的引用
    当下标循环到2时,去除了nums列表中的第一个3,
    但因为remove操作,nums列表从下标为3开始的位置的数据都往前挪动了一位,最后变为了[1,2,3,3,4];
    A循环操作的下标按照顺序接着循环到3,问题来啦,此时列表中nums[2]的值为3却被跳过了..
&quot;&quot;&quot;</span>
nums <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> nums<span class="token punctuation">:</span>  <span class="token comment"># A</span>
    <span class="token keyword">if</span> i <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">:</span>
        nums<span class="token punctuation">.</span>remove<span class="token punctuation">(</span>i<span class="token punctuation">)</span>  <span class="token comment"># B</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># [1, 2, 3, 4] 4</span>

<span class="token comment"># -- 正解 进行列表的浅拷贝</span>
nums <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> nums<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> i <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">:</span>
        nums<span class="token punctuation">.</span>remove<span class="token punctuation">(</span>i<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># [1, 2, 4] 3</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="传递不可变对象"><a href="#传递不可变对象" class="header-anchor">#</a> 传递不可变对象</h3> <blockquote><p>针对不可变对象(tuple\str\bool\数字\不可变集合)</p></blockquote> <p>很多资料将其称作 <strong>函数参数 --值传递(拷贝)</strong>  别被骗了,<font color="brown">本质是传递内存地址</font>,<strong>还是引用语义</strong>,不是值语义!!<br>
仔细想哈嘛, 不可变对象变不了啊, 一变就是重新赋值, id都变了.. 有点值类型那味,但不是值类型!!</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;-- 分析
1&gt; 参数a接收到的是值的类型是数字,数字是一个不可变对象 
2&gt; So,会将接收到的值进行一份拷贝! -- 值传递(拷贝)
   根据定理1,因为func函数内不存在变量a,所以会在func函数里新定义局部变量a,并将拷贝的值赋值给局部变量a.
   ★ 注意: func函数新定义的局部变量a与全局变量a无任何瓜葛!!
&quot;&quot;&quot;</span>
<span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">:</span>		
    a <span class="token operator">=</span> a <span class="token operator">+</span> <span class="token string">'3'</span>
    <span class="token keyword">return</span> a

a <span class="token operator">=</span> <span class="token string">'5'</span>
res <span class="token operator">=</span> func<span class="token punctuation">(</span>a<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>res<span class="token punctuation">)</span>  <span class="token comment"># '5' '53'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="传递可变对象"><a href="#传递可变对象" class="header-anchor">#</a> 传递可变对象</h3> <blockquote><p><strong>函数参数 --引用传递(内存地址)</strong> 针对可变对象(list\dict\set)</p></blockquote> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;-- 初步分析
1&gt; 参数a接收到的是值的类型是列表,列表是一个不可变对象 
2&gt; So,会对接收到的值进行引用 --  引用传递(内存地址)
   根据定理1,因为func函数内不存在变量a,所以会在func函数里新定义局部变量a,将接收到的引用给局部变量a.
   ★ 注意: func函数新定义的局部变量a与全局变量a维护/指向的是同一个内存地址!!
&quot;&quot;&quot;</span>
<span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">:</span>
    a <span class="token operator">+=</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span>  <span class="token comment"># -- 列表+=操作原地改变 等同于 a.extend([4])</span>
    <span class="token keyword">return</span> a

a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>
res <span class="token operator">=</span> func<span class="token punctuation">(</span>a<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>res<span class="token punctuation">)</span>  <span class="token comment"># [1, 2, 3, 4] [1, 2, 3, 4]</span>

<span class="token comment"># --- --- ---</span>

<span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">:</span>      <span class="token comment">#	-- 根据定理1,参数传递,定义了局部变量a. 此时[1,2,3]的引用计数为2</span>
    a <span class="token operator">=</span> a <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span>   <span class="token comment"># -- 根据定理1,因为已经存在局部变量a,该赋值操作是在对局部变量a重新赋值</span>
                  <span class="token comment">#    重新赋值后,局部变量a重新绑定了一个新的对象[1,2,3,4]. 导致[1,2,3]的引用计数减1</span>
                  <span class="token comment">#    id(左边a) != id(右边a) 它俩不是同一个对象</span>
    <span class="token keyword">return</span> a

a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>
res <span class="token operator">=</span> func<span class="token punctuation">(</span>a<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>res<span class="token punctuation">)</span>  <span class="token comment"># [1, 2, 3] [1, 2, 3, 4]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h3 id="unboundlocalerror"><a href="#unboundlocalerror" class="header-anchor">#</a> UnboundLocalError</h3> <blockquote><p>官方解释: When a name is not found at all, a <code>NameError</code> exception is raised.<br>
If the name refers to a local variable that has not been bound, a <code>UnboundLocalError</code> exception is raised. <code>UnboundLocalError</code> is a subclass of <code>NameError</code>.</p></blockquote> <p>翻译成人话:<br>
        若引用了某个变量,此变量在各个作用域里都找不到,就会报错 <code>NameError</code> ;<br>
        若引用的变量是 <strong>局部变量</strong> ,但还未完成绑定,就会报错 <code>UnboundLocalError</code> ..<br> <code>UnboundLocalError</code>  是 <code>NameError</code> 的一个子类..</p> <p><strong>深度分析详见后文 “python变量的可见性” 部分的内容!!!</strong></p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;
代码第二行报错: local variable 'a' referenced before assignment
翻译过来: 局部变量'a'在赋值前被引用
分析: func()函数没有参数,即不存在函数传递过程中定义局部变量
     函数体内有对a的赋值操作,根据定理1,因为func函数内没有局部变量a,则该赋值操作是在定义局部变量a,而在赋值操作的右侧引用了还未被定义完成的局部变量a

Ps:有很长一段时间我是这样理解这个报错的.开始回溯我的理解.理解出错的地方在于(-- --)包含起来的这段文字.
(-- 解释器发现右侧的a变量在局部作用域里还未绑定好,就引用全局变量a-- ),而&quot;=&quot;左侧的a是局部变量,在一个赋值操作中,某一变量不可能既充当局部变量,又充当全局变量.. 进而产生了冲突.报错提示不是这样的,显然这样理解有偏差!!

正确的过程应该是,调用函数,函数体代码开始执行,在执行之前会扫描函数体代码,看是否有绑定操作的代码,在这个案例里,
a = a + 4,这个语句,发现它是赋值操作(绑定操作的一种),a变量在该局部命名空间(就是存放变量名与绑定对象的栈区!!)便具备可见性,到这一步a变量已经定性为一个局部变量啦..但要注意一点,可见性的变量在完成绑定后,才能被引用.
函数体代码开始真正执行,执行到a = a + 4这行代码,等式右边会先执行,发现右侧引用了还未绑定好的局部变量a.. 
为啥报错,&quot;UnboundLocalError:局部变量'a'在赋值前被引用&quot;也就得到了合理的解释.
&quot;&quot;&quot;</span>
<span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    a <span class="token operator">+=</span> <span class="token number">4</span>    <span class="token comment"># a+=[4]报错 a.extend([4])不会报错</span>
    <span class="token keyword">return</span> a

a <span class="token operator">=</span> <span class="token number">1</span>         <span class="token comment"># a=[] 当a是一个列表时</span>
res <span class="token operator">=</span> func<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>res<span class="token punctuation">)</span>

<span class="token comment"># --- --- ---</span>

<span class="token comment"># `若引用的变量是局部变量,但还未完成绑定,就会报错UnboundLocalError.`</span>
<span class="token comment"># 注意报UnboundLocalError错误的前提是该变量是局部变量!!而下方的m是全局变量!</span>
m <span class="token operator">=</span> m <span class="token operator">+</span> <span class="token number">1</span> <span class="token comment"># -- NameError: name 'a' is not defined</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><hr> <h2 id="函数形参和实参"><a href="#函数形参和实参" class="header-anchor">#</a> 函数形参和实参</h2> <blockquote><p>在上文我们知道 函数的参数传递 可看作是一个赋值操作  <code>a = ？</code>  定义的是函数的局部变量<br>
具体一点, 参数分为形参和实参:<br>
        形参 -- 本质就是变量名; 实参 -- 本质就是变量的值</p></blockquote> <h3 id="定义函数时-行参"><a href="#定义函数时-行参" class="header-anchor">#</a> 定义函数时 -- 行参</h3> <blockquote><p><strong>定义函数时</strong> <font color="brown">位置形参-默认形参-不定长位置形参-命名关键字形参-不定长关键字形参</font></p></blockquote> <table><thead><tr><th>形参</th> <th>特性</th></tr></thead> <tbody><tr><td>位置形参</td> <td>必须被传值,多一个不行少一个也不行!!</td></tr> <tr><td>默认形参</td> <td>意味着调用阶段可以不用为其赋值(可以不用指定对应的实参)!!</td></tr> <tr><td>不定长位置形参</td> <td><code>*args</code> 会将溢出的位置实参全部接收,然后以元祖的形式赋值给<code>*</code>后面的变量<code>args</code></td></tr> <tr><td>命名关键字形参</td> <td><code>*</code> (<code>*</code>或者<code>*args</code>) 后面的形参对应的实参必须按照key=value的形式进行传值</td></tr> <tr><td>不定长关键字形参</td> <td><code>**kwargs</code> 会将溢出的关键字实参全部接收,<br>然后以字典的形式赋值给<code>**</code>后面的变量<code>kwargs</code></td></tr></tbody></table> <h3 id="调用函数时-实参"><a href="#调用函数时-实参" class="header-anchor">#</a> 调用函数时 -- 实参</h3> <blockquote><p><strong>调用函数时</strong> <font color="brown">位置实参  关键字实参</font></p></blockquote> <p>1&gt; 两种实参可以混用, 但位置实参必须在关键字实参前面！且不能对一个形参重复赋值！<br>
2&gt; 实参可以拆包！<br>
     实参中带<code>*</code>,<code>*</code>会将该变量的值循环取出,打散成位置实参.<br> <font color="gray">即以后但凡碰到实参中带<code>*</code>的,它就是位置实参,应该立刻打散成位置实参来看 </font><br>
     实参中带<code>**</code>,<code>**</code>会将该变量的值循环取出,打散成关键字实参.<br> <font color="gray">即以后但凡碰到实参中带<code>**</code>的,它就是关键字实参,应该立刻打散成关键字实参去看</font></p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">func3</span><span class="token punctuation">(</span>a1<span class="token punctuation">,</span> a2<span class="token punctuation">,</span> a3<span class="token punctuation">,</span> a4<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> a5<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">,</span> a6<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment">#     11  22  33  44  20  10  (55, 66, 77)  {'a10': 123}</span>
  	<span class="token keyword">print</span><span class="token punctuation">(</span>a1<span class="token punctuation">,</span> a2<span class="token punctuation">,</span> a3<span class="token punctuation">,</span> a4<span class="token punctuation">,</span> a5<span class="token punctuation">,</span> a6<span class="token punctuation">,</span> args<span class="token punctuation">,</span> kwargs<span class="token punctuation">)</span>
    
<span class="token comment"># func3(11, *[22, 33, 44, 55, 66, 77], **{'a6': 10, 'a10': 123})</span>
func3<span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">,</span> <span class="token number">33</span><span class="token punctuation">,</span> <span class="token number">44</span><span class="token punctuation">,</span> <span class="token number">55</span><span class="token punctuation">,</span> <span class="token number">66</span><span class="token punctuation">,</span> <span class="token number">77</span><span class="token punctuation">,</span> a6<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span> a10<span class="token operator">=</span><span class="token number">123</span><span class="token punctuation">)</span>


<span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token operator">*</span>p<span class="token punctuation">)</span><span class="token punctuation">:</span>
	 <span class="token keyword">return</span> <span class="token builtin">sum</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span>  
func<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span>  <span class="token comment"># 10</span>


<span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token operator">**</span>p<span class="token punctuation">)</span><span class="token punctuation">:</span>
  	<span class="token keyword">return</span> <span class="token string">''</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token builtin">sorted</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">)</span>   
func<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>z<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span>y<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">)</span>  <span class="token comment"># 'xyz'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="默认形参陷阱"><a href="#默认形参陷阱" class="header-anchor">#</a> 默认形参陷阱</h3> <blockquote><p>记住两点:<br> <strong>除非程序结束,否则该共享空间不会被释放</strong>;  类似于全局变量 .<br> <strong>默认形参的值通常应该定义为不可变类型.</strong></p></blockquote> <p><font color="gray">egon说, &quot;默认形参的值只在定义阶段赋值一次,即默认参数的值在函数定义阶段就已经固定死了&quot;.  </font><br> <font color="brown">这意味着当函数被定义时将对表达式求值一次,相同的“预计算”值将在每次调用时被使用</font></p> <p><img src="/assets/img/default_param.7652b11a.png" alt=""></p> <p>○ one.py文件开始运行,创建全局scope, 从上往下依次执行代码<br>
     执行第1 2行代码, 实现将x、func依次压入全局scope这个栈中<br>
     执行第2行代码时, <font color="green">发现该func函数有默认参数,则会创建一个 <strong>&quot;共享空间&quot;</strong> ,将该默认参数的值存储起来</font><br>
○ 第3行代码暂时不会执行,往下执行第5行代码,调用func函数,并传递了一个不可变类型的参数.. 具体展开:<br>
     1&gt; 调用函数时,解释器就会为该函数创建一个局部scope命名空间<br>
     2&gt; 在函数真正执行之前扫描函数代码, 找绑定操作, 发现了有两个形参 ( <strong>形参是绑定操作的一种</strong> )<br>
          因为绑定操作, 变量a和b便在刚创建的scope空间中具备了可见性!!意味着a和b变量定性为局部变量..<br>
     3&gt; 函数真正执行,  变量绑定了5的内存地址,b变量绑定了共享空间中1的内存地址..<br>
           和b变量完成绑定操作后, 和b变量便可以被引用!! retuen语句中就有对 和b变量的引用.<br>
○ <strong>第5行代码执行完后,对应的局部scope空间会释放!!</strong><br>
     继续往下执行,只要是调用函数的代码就会创建新的局部scope,函数调用完就释放..<br>
     三次函数调用,不同点在于第三次调用的func函数,没有用共享空间里的值.. 但对共享空间没有影响!!</p> <p>按理来说,堆区里的数据根据gc机制,引用计数为0会释放掉, 但共享空间里的值类似于全局变量..<br> <font color="blue"><strong>除非程序结束,否则该共享空间不会被释放!!!</strong></font></p> <p>▲实验见真知: 默认参数是可变类型的数据带来的麻烦!!!</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span>a<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">555</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    a<span class="token punctuation">.</span>extend<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment"># -- 等同于 a+=[1,2,3]</span>
    
    <span class="token keyword">return</span> a<span class="token punctuation">,</span><span class="token builtin">id</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>

<span class="token comment"># -- 函数第一次调用时共享空间为[555];第二次调用时没有用共享空间;第三次调用时共享空间为[555,1,2,3];</span>
<span class="token comment">#    可以观察到,第一次id(a)和第三次id(a)是一样的..</span>
<span class="token comment">#    证明第二次调用虽然没有用共享空间会导致[555]的引用计数为0,但该共享空间没有被释放!!</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>func<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>func<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># -- 若不使用默认的[555],自己指定值,那么函数体内的a的id不是共享空间中a的id.</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>func<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 
<span class="token triple-quoted-string string">&quot;&quot;&quot;结果
([555, 1, 2, 3], 140573741203776)
([1, 2, 3], 140692741938688)
([555, 1, 2, 3, 1, 2, 3], 140573741203776)
&quot;&quot;&quot;</span>


<span class="token comment"># --- --- ---</span>
<span class="token comment"># 依照python在作用域里对变量的赋值操作规则</span>
<span class="token comment"># 注意哦,函数体内对此默认形参重新赋值,是为此变量绑定了一个新的对象!!!</span>
<span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span>a<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">555</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
  	<span class="token keyword">print</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token builtin">id</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span>
    a <span class="token operator">=</span> a <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>  <span class="token comment"># -- 局部变量a重新赋值,其id发生变化</span>
    
    <span class="token keyword">return</span> a<span class="token punctuation">,</span><span class="token builtin">id</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>

<span class="token comment"># -- 可以观察到函数第一次和第二次调用的共享空间都为[555],其id也没有发生变化!</span>
<span class="token comment">#    证明 a = a + [1, 2, 3] 该行代码虽然导致[555]的引用计数为0,但该共享空间没有被释放！</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>func<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># [555, 1, 2, 3]</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>func<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># [555, 1, 2, 3]</span>
<span class="token triple-quoted-string string">&quot;&quot;&quot;结果
[555] 140263832453056
([555, 1, 2, 3], 140263832467520)
[555] 140263832453056
([555, 1, 2, 3], 140263832428928)
&quot;&quot;&quot;</span>


<span class="token comment"># --- --- --- 正解</span>
<span class="token keyword">def</span> <span class="token function">func0</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
  	<span class="token keyword">if</span> b <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
    		b <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        
        
<span class="token comment"># --- --- --- 换个思考角度理解 默认形参陷阱 </span>
<span class="token triple-quoted-string string">&quot;&quot;&quot;
默认形参的共享空间可以简单理解成 一个全局变量
&quot;&quot;&quot;</span>
<span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span>a<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">555</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">pass</span>	func<span class="token punctuation">(</span><span class="token punctuation">)</span>	func<span class="token punctuation">(</span><span class="token punctuation">)</span>
b <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">555</span><span class="token punctuation">]</span>		<span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span>a<span class="token operator">=</span>b<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">pass</span>	func<span class="token punctuation">(</span><span class="token punctuation">)</span>	func<span class="token punctuation">(</span><span class="token punctuation">)</span>
b <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">555</span><span class="token punctuation">]</span>		<span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">pass</span>	func<span class="token punctuation">(</span>b<span class="token punctuation">)</span>	func<span class="token punctuation">(</span>b<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br></div></div><hr> <h2 id="函数命名空间与作用域"><a href="#函数命名空间与作用域" class="header-anchor">#</a> 函数命名空间与作用域</h2> <h3 id="函数对象"><a href="#函数对象" class="header-anchor">#</a> 函数对象</h3> <h5 id="函数是第一类对象"><a href="#函数是第一类对象" class="header-anchor">#</a> 函数是第一类对象</h5> <blockquote><p>函数是第一类对象,<strong>可以当作数据进行传递</strong>！<code>a = lambda x:x+1</code><br>
1&gt; 被引用;  <code>b = a</code><br>
2&gt; 当作参数传递; <code>func(a):pass</code><br>
3&gt; 返回值是函数; <code>func(*args):return a</code><br>
4&gt; 作为容器类型的元素 <code>[1,2,a,3]</code></p></blockquote> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">)</span>

dic <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">'foo'</span><span class="token punctuation">:</span> foo<span class="token punctuation">,</span>
    <span class="token string">'bar'</span><span class="token punctuation">:</span> bar<span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
    choice <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'&gt;&gt;: '</span><span class="token punctuation">)</span><span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> choice <span class="token keyword">in</span> dic<span class="token punctuation">:</span>
        dic<span class="token punctuation">[</span>choice<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h5 id="函数嵌套定义"><a href="#函数嵌套定义" class="header-anchor">#</a> 函数嵌套定义</h5> <p>需求: 将圆相关的计算(面积、周长)集中在一起.</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> math <span class="token keyword">import</span> pi

<span class="token keyword">def</span> <span class="token function">circle</span><span class="token punctuation">(</span>radius<span class="token punctuation">,</span> action<span class="token operator">=</span><span class="token string">'area'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">area</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> pi <span class="token operator">*</span> <span class="token punctuation">(</span>radius<span class="token operator">**</span><span class="token number">2</span><span class="token punctuation">)</span>
    <span class="token keyword">def</span> <span class="token function">perimeter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token number">2</span> <span class="token operator">*</span> pi <span class="token operator">*</span> radius

    <span class="token keyword">if</span> action <span class="token operator">==</span> <span class="token string">'area'</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> area<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">elif</span> action <span class="token operator">==</span> <span class="token string">'perimeter'</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> perimeter<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>circle<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">'perimeter'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment"># -- Ps: max(max(2,3),8)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h5 id="打破层级限制"><a href="#打破层级限制" class="header-anchor">#</a> 打破层级限制</h5> <blockquote><p><strong>函数对象可以将定义在函数内的函数返回到全局中使用,从而打破函数的层级限制</strong></p></blockquote> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
  	<span class="token keyword">def</span> <span class="token function">inner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    		<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'from inner'</span><span class="token punctuation">)</span>
  	<span class="token keyword">return</span> inner

f <span class="token operator">=</span> f1<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># -- 拿到inner函数的内存地址.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="命名空间scope-栈区"><a href="#命名空间scope-栈区" class="header-anchor">#</a> 命名空间scope/栈区</h3> <h5 id="命名空间概念"><a href="#命名空间概念" class="header-anchor">#</a> 命名空间概念</h5> <blockquote><p>在一个复杂的程序中,会定义成千上万个变量(函数名、类名都是变量), 为了便于追踪这些变量,让它们互不干扰,命名空间就应运而生啦!!</p></blockquote> <p><strong>命名空间 scope/namespaces:</strong> <font color="gray">这几种说法都正确</font><br>
1&gt; <font color="brown">存放名字与值绑定关系的地方</font>, 一般简说命名空间(栈区)为存放变量名的地方.<br>
2&gt; 命名空间是键值对的集合! 变量名与值是一一对应的关系..<br>
3&gt; 命名空间是变量名到对象内存地址的映射.<br> <font color="gray">eg:<code>x=1</code>  开辟一块空间,<code>1</code> 存放在内存中; <code>x:id(1)</code> 放在命名空间中</font></p> <p><font color="blue">从 <strong>变量存储</strong> 的角度, 在定义变量时, <em>变量名与值内存地址的关联关系</em> 存放于栈区 <strong>stack</strong>, <em>变量值</em> 存放于堆区 <strong>heap</strong> .</font></p> <h5 id="命名空间分类"><a href="#命名空间分类" class="header-anchor">#</a> 命名空间分类</h5> <blockquote><p>一个命名空间中不能有重名的变量名<br> <strong>各个命名空间是独立的</strong> , 没有任何关系的, 所以 <strong>不同的命名空间是可以有重名的,没有任何影响</strong></p></blockquote> <p><font color="gray">Ps: 一个套一个的名字空间中同名的变量名会形成名字空间链</font></p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">)</span> <span class="token comment"># &lt;built-in function len&gt;</span>
x<span class="token operator">=</span><span class="token number">1</span>
<span class="token keyword">if</span> <span class="token number">3</span><span class="token operator">&gt;</span><span class="token number">2</span><span class="token punctuation">:</span>
  	z<span class="token operator">=</span><span class="token number">5</span>
<span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
  	y<span class="token operator">=</span><span class="token number">2</span>
func<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># -- 内置命名空间中的对象可以通过 dir(__builtins__) 命令查看.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><table><thead><tr><th>类别</th> <th>解释</th></tr></thead> <tbody><tr><td>内置命名空间    <font color="gray">built-in names</font></td> <td>存放python解释器自带的名字	<font color="green">len</font></td></tr> <tr><td>全局命名空间    <font color="gray">global names</font></td> <td>存放模块中<strong>定义</strong>的名字(该模块中除开内置的和局部的,都是全局的)<br><font color="green">x  func  z</font></td></tr> <tr><td>局部命名空间    <font color="gray">local names</font></td> <td>存放函数调用时函数中<strong>定义</strong>的名字	<font color="green">y</font><br><font color="brown">提一嘴,严谨点说应该说是代码块里绑定操作中的名字!!</font></td></tr></tbody></table> <p><font color="green">Ps: 严谨一点, 解释器还为程序使用 <code>import</code>  语句加载的任何模块创建一个全局命名空间</font><br> <font color="gray"><strong>注意:</strong> 全局和局部命名空间的实现是字典, 但内置命名空间不是!</font></p> <h5 id="命名空间与代码块的关系"><a href="#命名空间与代码块的关系" class="header-anchor">#</a> 命名空间与代码块的关系</h5> <p><strong><font color="gray">代码块通常是指, 类、函数 中包含的代码!!</font></strong><br>
Python解释器会在 <strong>执行</strong> 函数代码块时,为其分配一个局部命名空间..</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;
0 	 不是一个代码块,是除类和函数以外的代码,归属于全局命名空间管!
1-2  是一个代码块
3-10 是一个代码块
5-10 是一个代码块
7-9  是一个代码块
(后三个代码块实现了代码块的嵌套)

代码块与命名空间
  上述的四个代码块,每个代码块在执行时,python解释器会分配一个局部命名空间(是真实的内存空间)
  注意哦,函数在调用时才会执行！
  还要特别注意,代码块可以嵌套,但命名空间是相互独立的!!
&quot;&quot;&quot;</span>
m <span class="token operator">=</span> <span class="token number">0</span>                   <span class="token comment"># 0 </span>
<span class="token keyword">def</span> <span class="token function">func0</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token comment"># 1</span>
  	<span class="token keyword">return</span> <span class="token number">1</span>            <span class="token comment"># 2</span>
<span class="token keyword">class</span> <span class="token class-name">Test</span><span class="token punctuation">:</span>             <span class="token comment"># 3</span>
    a <span class="token operator">=</span> <span class="token number">1</span>               <span class="token comment"># 4</span>
    <span class="token keyword">def</span> <span class="token function">func1</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># 5</span>
        a <span class="token operator">=</span> <span class="token number">2</span>           <span class="token comment"># 6</span>
        <span class="token keyword">def</span> <span class="token function">func2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># 7</span>
          	b <span class="token operator">=</span> <span class="token number">3</span>       <span class="token comment"># 8</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span>    <span class="token comment"># 9</span>
        <span class="token keyword">return</span> func2    <span class="token comment"># 10</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h5 id="命名空间生命周期"><a href="#命名空间生命周期" class="header-anchor">#</a> 命名空间生命周期</h5> <blockquote><p><font color="red">指的是命名空间中的 变量名!! 不是内存中的变量值的生命周期!! </font></p></blockquote> <p>内置: 在解释器启动时直接创建加载,直到解释器关闭时失效.	
全局: 在文件执行时生效,在文件执行完毕时失效.
局部: 在 <strong>文件执行过程中</strong> ,如果调用了某个函数才会 <strong>临时生效</strong> ,在 <strong>函数执行完毕后失效</strong>.</p> <p><font color="gray">局部命名空间的声明周期是自其建立开始,到它们各自的函数执行完毕终止.. 当这些命名空间的函数终止时, Python可能不会立即回收分配给这些命名空间的内存, 但是对其中对象的所有引用都将失效..</font></p> <h5 id="变量加载查询顺序"><a href="#变量加载查询顺序" class="header-anchor">#</a> 变量加载查询顺序</h5> <blockquote><p>变量加载进命名空间的顺序: 内置 --&gt; 全局 --&gt; 局部<br>
变量在命名空间里查找的顺序: 从当前位置的局部命名空间 --&gt; 全局 --&gt; 内置</p></blockquote> <p><strong>通俗点解释下:</strong><br>
        在代码从而下的执行过程中,不断有变量被加载进对应的命名空间..当遇到def语句,会先将函数名字加载进全局命名空间,但函数体代码不会执行,会暂时跳过; 函数内部的变量要等到函数调用的时候才会加载进局部命名空间...<br>
        引用的变量在命名空间里查找的顺序(作用域关系):<br>
        举个例子,函数里使用了x变量,但此变量不在该函数的局部命名空间里,就会去全局命名空间里找...<br>
当然实际情况会更复杂.后文会详细阐述作用域.</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;变量加载进命名空间
第几行代码   全局              局部
1          func	   
4          func   x:1
5          func   x:1        y:2
6          func   x:10       y:2

记住一句话,作用域关系是在函数定义阶段就固定死了,与函数的调用位置无关!!
&quot;&quot;&quot;</span>
<span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    y <span class="token operator">=</span> <span class="token number">2</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
x <span class="token operator">=</span> <span class="token number">1</span>
func<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 1</span>
x <span class="token operator">=</span> <span class="token number">10</span>
func<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 10 -- 在调用函数之前,全局命名空间里的x的值被改为10啦</span>

<span class="token comment"># ---  --- ---</span>

x <span class="token operator">=</span> <span class="token number">10</span>
a <span class="token operator">=</span> <span class="token keyword">lambda</span> y<span class="token punctuation">:</span> x <span class="token operator">+</span> y
x <span class="token operator">=</span> <span class="token number">20</span>
b <span class="token operator">=</span> <span class="token keyword">lambda</span> y<span class="token punctuation">:</span> x <span class="token operator">+</span> y
<span class="token keyword">print</span><span class="token punctuation">(</span>a<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 30</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>b<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 30</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><hr> <h3 id="作用域"><a href="#作用域" class="header-anchor">#</a> 作用域</h3> <h5 id="概念"><a href="#概念" class="header-anchor">#</a> 概念</h5> <blockquote><p>严谨点说,python解释器会给每个代码块分配命名空间,代码块中的绑定操作使得变量在命名空间具备可见性.绑定操作完成后,变量可被引用..<br>
命名空间相互独立,不同命名空间中可能具备相同的变量名,当代码块中出现变量引用时,引用哪个命名空间中的变量呢？这就需要作用域!!</p></blockquote> <p><font color="blue"><strong>(代码块中的绑定操作 -- 命名空间存储对应的变量名; 代码块中的变量引用 -- 按作用域关系进行查找! )</strong></font></p> <p><img src="/assets/img/function_scope.dcd67410.png" alt=""></p> <p><font color="gray">Ps: 代码块环境是什么? 该code block中所有scope中可见的name的集合构成block的环境..</font></p> <p><font color="red"><strong>作用域即代码块!!</strong></font> <font color="gray"><strong>scope空间里的变量作用的范围就是所对应的代码块,这些变量在该代码块中是可见的</strong></font><br> <strong><font color="red">作用域关系LEGB/函数里引用变量的搜索路径/依次从LEGB作用域对应的scope中查找!</font></strong><br> <font color="gray"><strong>从嵌套的里层往外层查找</strong></font><br> <strong>作用域关系</strong> 查找顺序LEGB,所以跟 <strong>代码块的嵌套</strong> 有关, 查的是LEGB对应的scope,所以跟 <strong>代码块的环境</strong> 有关!</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>内心OS<span class="token punctuation">:</span>感觉自己将简单的东西复杂化了<span class="token punctuation">,</span>想与专业名词一一对应上<span class="token punctuation">.</span> ╮<span class="token punctuation">(</span>￣▽￣<span class="token string">&quot;&quot;</span><span class="token punctuation">)</span>╭  当作加深印象理解吧

解释下上图<span class="token punctuation">:</span>
    该程序有三个函数<span class="token punctuation">,</span>可划分出代码块A、B、C<span class="token punctuation">,</span>这三个代码块是相互嵌套的<span class="token punctuation">.</span>
    <span class="token punctuation">(</span>代码块A包含<span class="token number">1</span><span class="token operator">-</span><span class="token number">10</span>行全部代码<span class="token punctuation">;</span>代码块B包含<span class="token number">4</span><span class="token operator">-</span><span class="token number">9</span>行代码<span class="token punctuation">;</span>代码块C包含<span class="token number">7</span><span class="token operator">-</span><span class="token number">9</span>行代码<span class="token punctuation">)</span>
    A代码块会执行红色框起来的那两部分代码<span class="token punctuation">(</span>B函数体代码是不会执行的<span class="token punctuation">)</span><span class="token punctuation">,</span>将绑定操作代码里的变量存到局部scope中!
    即A代码会依次将a b funcB m压入scope<span class="token punctuation">(</span>funcA<span class="token punctuation">)</span>这个栈中
    B代码块、C代码块的执行同理<span class="token punctuation">.</span>
 
    scope空间里的变量作用的范围就是所对应的代码块<span class="token punctuation">.</span> 代码块A的局部scope的作用范围就是代码块A<span class="token punctuation">.</span>
    作用域即代码块!!
    
    代码块引用变量的查找顺序LEGB从代码块环境的角度解释是解释得通的<span class="token punctuation">.</span>但感觉复杂化了<span class="token punctuation">.</span>
    代码块引用变量先从本地作用域<span class="token operator">/</span>里层代码块所对应的scope中查找<span class="token punctuation">;</span>
    若没有再去嵌套作用域<span class="token operator">/</span>中间层代码块所对应的scope中查找<span class="token punctuation">;</span>以此类推<span class="token punctuation">.</span>
    
    在这里<span class="token punctuation">,</span>代码块C中引用了变量m<span class="token punctuation">,</span>在scope<span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token operator">/</span>代码块C的环境中没有<span class="token punctuation">,</span>
    在scope<span class="token punctuation">(</span>B<span class="token punctuation">)</span><span class="token operator">/</span>代码块B的环境中查找 也没有<span class="token punctuation">.</span> 
		   <span class="token string">&quot;你想一下代码块B的环境=scope(B)+scope(C),scope(C)中没有是不是就剩scope(B)啦&quot;</span>
    最后在scope<span class="token punctuation">(</span>A<span class="token punctuation">)</span>里找到啦！
    
    依次从LEGB作用域对应的scope中查找!
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>提一嘴, 通常在编程语言中, 变量的作用域从代码结构 (代码块) 角度来看, 有块级、函数、类、模块、包等由小到大的级别.但是在Python中, 没有块级作用域, 也就是类似if语句块、for语句块、with上下文管理器等等是不存在作用域概念的, 他们等同于普通的语句！<br> <font color="gray"><strong>换个说法:</strong> 只有模块module,类class以及函数def、lambda才会引入新的作用域(即开辟新的命名空间), 其它的代码块(如 if/elif/else/、try/except、for/while等)是不会引入新的作用域的..</font></p> <h5 id="legb"><a href="#legb" class="header-anchor">#</a> LEGB</h5> <p>在表达式中引用变量时,Python解释器将按照如下顺序遍历各作用域,以解析该引用:<br>
局部作用域/局部命名空间里变量的作用范围     -- 当前函数的范围 <strong>L</strong>      Local<br>
内嵌作用域/内嵌命名空间里变量的作用范围     -- 函数嵌套里外围函数的范围 <strong>E</strong>      Enclosing<br>
全局作用域/全局命名空间里变量的作用范围     -- 当前py模块的范围(不包含import的py模块) <strong>G</strong>      Global<br>
内置作用域/内置命名空间里变量的作用范围     -- 包含len及str等函数的那个scope <strong>B</strong>      Built-in</p> <p>若在这些地方都找不到名称相符的变量,就会抛出NameError异常..</p> <p><font color="brown"><strong>作用域关系(函数里引用变量的搜索路径)是在函数定义阶段就固定死了,与函数的调用位置无关!!</strong></font><br> <font color="gray">作用域是scope里变量作用的范围,就是scope所在代码块. 而LEGB遵循最内作用域原则,所以定义阶段就固定死了!</font></p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    x <span class="token operator">=</span> <span class="token number">1</span> <span class="token comment"># -- 提一嘴,f1函数结束后,x变量还能被函数嵌套中的内部函数inner访问到..Why？因为x是自由变量！</span>
          <span class="token comment">#    后续的闭包部分会详细阐述!!</span>
    <span class="token keyword">def</span> <span class="token function">inner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>  <span class="token comment"># -- 作用域关系是在函数定义阶段就固定死了,与函数的调用位置无关!!</span>
    <span class="token keyword">return</span> inner
  
f <span class="token operator">=</span> f1<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    x <span class="token operator">=</span> <span class="token number">111</span>
    f<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># -- 与调用位置无关</span>
    
bar<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment"># 1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h5 id="globals-、locals"><a href="#globals-、locals" class="header-anchor">#</a> globals()、locals()</h5> <blockquote><p>python提供了两个内置函数globals()和locals(),前者返回全局命名空间的字典,后者返回局部命名空间字典..</p></blockquote> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">type</span><span class="token punctuation">(</span><span class="token builtin">globals</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token builtin">type</span><span class="token punctuation">(</span><span class="token builtin">locals</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token string">'dict'</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token string">'dict'</span><span class="token operator">&gt;</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><font color="brown"><strong>注意:</strong> <code>globals()</code>返回全局命名空间的实际引用; 随便怎么折腾都是在操作全局命名空间, 类似于 a = b</font></p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;
可以通过引用对象的变量名x,以常规的方式访问该对象..亦可以通过全局命名空间字典间接访问它
&quot;&quot;&quot;</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> x <span class="token operator">=</span> <span class="token string">'foo'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token string">'x'</span> <span class="token keyword">in</span> <span class="token builtin">globals</span><span class="token punctuation">(</span><span class="token punctuation">)</span>      <span class="token comment"># -- 注意,变量名是以字符串的形式作为键的</span>
<span class="token boolean">True</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> x
<span class="token string">'foo'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">globals</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'x'</span><span class="token punctuation">]</span>
<span class="token string">'foo'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> x <span class="token keyword">is</span> <span class="token builtin">globals</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'x'</span><span class="token punctuation">]</span>   <span class="token comment"># -- x的值与&quot;x&quot;键所对应vlaue值的内存地址相同</span>
<span class="token boolean">True</span>

<span class="token triple-quoted-string string">&quot;&quot;&quot;
可以使用globals()函数在全局命名空间中创建和修改全局变量
&quot;&quot;&quot;</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> y
NameError<span class="token punctuation">:</span> name <span class="token string">'z'</span> <span class="token keyword">is</span> <span class="token keyword">not</span> defined  <span class="token comment"># -- 全局命名空间中没有变量y</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> glo <span class="token operator">=</span> <span class="token builtin">globals</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment"># -- 注意:glo是全局命名空间的引用</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> glo <span class="token operator">=</span> <span class="token number">100</span>  <span class="token comment"># -- 创建  等同于 globals()['y'] = 100</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> y
<span class="token number">100</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> glo<span class="token punctuation">[</span><span class="token string">'y'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">123</span>  <span class="token comment"># -- 修改</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> y
<span class="token number">123</span>

<span class="token triple-quoted-string string">&quot;&quot;&quot;
globals结合format的应用
&quot;&quot;&quot;</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> x <span class="token operator">=</span> <span class="token number">1</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> y <span class="token operator">=</span> <span class="token number">2</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token string">&quot;{x},{y}&quot;</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span><span class="token operator">**</span><span class="token builtin">globals</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token string">'1,2'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><p><font color="brown"><code>locals()</code>返回的不是对局部命名空间的引用!! 那到底返回的是什么呢？</font><br>
查阅资料,很多博客说是拷贝、副本.. 云里雾里的. 自己做了实验后, 发现这样的描述都不够严谨..</p> <p><font color="brown"><strong>先说结论</strong></font>: locals()函数返回的是对局部命名空间的一个**&quot;拷贝&quot;** (<font color="gray">打了引号哦</font>) ,但此拷贝有点特殊,它具备浅拷贝的一些特点,同时当我们再次调用locals()函数时,它会 **同步更新 **&quot;拷贝&quot;的值..<br>
此&quot;拷贝&quot;添加,改变可变类型的变量是ok的,但修改不可变变量是不成功的..</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;
什么是拷贝、副本、视图？
参考链接: https://blog.csdn.net/Reborn214/article/details/124539097
    简单来说,副本、视图是python numpy数组中的专业名词,但其具备的特性跟拷贝差不多.
    numpy中引用 = python中引用; numpy中视图 = python中浅拷贝; numpy中副本 = python中深拷贝
    值得一提的是,引用一般发生在赋值操作(python赋值都是引用&quot;内存地址&quot;传递)
		
还要注意一个坑!!
id():返回对象的“标识值”.该值是一个整数,在此对象的生命周期中保证是唯一且恒定的.
     两个生命期不重叠的对象可能具有相同的id()值..
举例分析
     没有将a[:]赋值给变量进行引用,当执行完a[:]后,这个对象就释放啦.但这块内存可能并没有来得及释放.
     当我们新执行a[:]的时候,用的将会是同一个内存,并没有申请新的内存.
     这会让我们觉得两个a[:]与a[:]是同一个对象
&gt;&gt;&gt; a = [1,2,3]
&gt;&gt;&gt; id(a[:])
140417051683648
&gt;&gt;&gt; id(a[:])
140417051684544
&gt;&gt;&gt; id(a[:])
140417051684544
&gt;&gt;&gt; id(a[:]) is id(a[:])  # -- 让其处于同一生命周期,每次浅拷贝都会生成不同的对象,结果肯定为False
False
&quot;&quot;&quot;</span>
<span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># -- 验证了id()的坑.</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">id</span><span class="token punctuation">(</span><span class="token builtin">locals</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 140204424022656</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">id</span><span class="token punctuation">(</span><span class="token builtin">locals</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 140204424022656</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">id</span><span class="token punctuation">(</span><span class="token builtin">locals</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">is</span> <span class="token builtin">id</span><span class="token punctuation">(</span><span class="token builtin">locals</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># False</span>

    m <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
    n <span class="token operator">=</span> <span class="token number">66</span>
    loc <span class="token operator">=</span> <span class="token builtin">locals</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># -- loc是局部命名空间的“拷贝” loc是对此&quot;拷贝&quot;的引用!!</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>loc<span class="token punctuation">)</span>      <span class="token comment"># {'m': [1, 2, 3], 'n': 66}</span>

    <span class="token triple-quoted-string string">&quot;&quot;&quot;来,简化一下
    import copy
    scope = {'m': [1, 2, 3], 'n': 66}     # -- 指代局部命名空间
		loc = copy.copy(scope)                # -- 指代局部命名空间的浅拷贝
		loc['m'].append(4)
		scope.append(5)
		scope['n'] = 88
		scope['x'] = 20
		loc['n'] = 77
		print(scope)    # -- {'m': [1, 2, 3, 4, 5], 'n': 88, 'x': 20}
		print(loc)      # -- {'m': [1, 2, 3, 4, 5], 'n': 77}
    &quot;&quot;&quot;</span>
    loc<span class="token punctuation">[</span><span class="token string">'m'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>  <span class="token comment"># -- 试图通过&quot;拷贝&quot;过来的字典修改局部命名空间里的可变类型的变量m 成功</span>
    m<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>  <span class="token comment"># -- 在局部命令空间里修改了m变量对应的值</span>
    n <span class="token operator">=</span> <span class="token number">88</span>  <span class="token comment"># -- 在局部命令空间里修改了n变量对应的值</span>
    x <span class="token operator">=</span> <span class="token number">20</span>  <span class="token comment"># -- 在局部命名空间里添加了x变量</span>
    <span class="token comment"># -- 可以发现此&quot;拷贝&quot;,具备浅拷贝的特性</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>loc<span class="token punctuation">)</span>  <span class="token comment"># {'m': [1, 2, 3, 4, 5], 'n': 66}</span>
    loc<span class="token punctuation">[</span><span class="token string">'n'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">77</span>  <span class="token comment"># -- 试图通过&quot;拷贝&quot;过来的字典修改局部命名空间里的可变类型的变量n 失败</span>
    loc<span class="token punctuation">[</span><span class="token string">'q'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">250</span> <span class="token comment"># -- loc添加是成功的</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>loc<span class="token punctuation">)</span>  <span class="token comment"># {'m': [1, 2, 3, 4, 5], 'n': 77, 'q': 250}</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">locals</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># {'m': [1, 2, 3, 4, 5], 'n': 88, 'q': 250, 'loc': {...}, 'x': 20}</span>

    <span class="token comment"># -- 再次调用locals()后,&quot;拷贝&quot;同步更新了.</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>loc<span class="token punctuation">)</span>  <span class="token comment"># {'m': [1, 2, 3, 4, 5], 'n': 88, 'q': 250, 'loc': {...}, 'x': 20}</span>

func<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br></div></div><h5 id="global、nonlocal"><a href="#global、nonlocal" class="header-anchor">#</a> global、nonlocal</h5> <p>回顾下Python在作用域里对变量的赋值操作规则:<br> <font color="brown">若这个变量在该作用域存在(已经定义), 则对其绑定新的对象; 若不存在,则将这次赋值视为对这个变量的定义..</font></p> <p>global      -- 不管是在函数嵌套的哪一层,对x变量的赋值操作都是修改全局作用域里的那个x变量!!<br>
nonlocal      -- 如果在闭包内给x变量赋值,那么修改的其实是闭包外那个作用域里的x变量..<br> <strong>nonlocal的唯一限制在于,不能延伸到模块级别,这是为了防止它污染全局变量..</strong></p> <p><font color="gray">Ps: 提一嘴闭包,后续会详细阐述. 函数嵌套,内部函数引用外部函数的参数或变量,就构成了闭包..</font></p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;
★ --global
    在局部若想修改全局的不可变类型,需要借助global声明
    在局部若想修改全局的可变类型,不需要借助任何声明,可以直接修改
		
    若全局中没有x变量,global语句和赋值的组合(不管处于嵌套的哪一层)可以间接在局部中创建x全局变量
&quot;&quot;&quot;</span>
x <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

<span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">global</span> m  <span class="token comment"># -- 申明m变量是全局变量</span>
    m <span class="token operator">=</span> <span class="token number">10</span>
    <span class="token builtin">globals</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'n'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">20</span>  <span class="token comment"># -- n变量在全局中存在的话,此赋值操作就是在修改;通常不会这么做,完全没必要</span>
    x<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>

func<span class="token punctuation">(</span><span class="token punctuation">)</span>
func<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>     <span class="token comment"># [1,1]</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span> n<span class="token punctuation">)</span>  <span class="token comment"># 10,20</span>


<span class="token triple-quoted-string string">&quot;&quot;&quot;
★ --nonlocal 指非全局最近的那个
&quot;&quot;&quot;</span>
x <span class="token operator">=</span> <span class="token number">1</span>

<span class="token keyword">def</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>         <span class="token comment"># E f1的参数对f2而言</span>
    x <span class="token operator">=</span> <span class="token number">111</span>       <span class="token comment"># E 此处的x对f2而言</span>
    <span class="token keyword">def</span> <span class="token function">f2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>     <span class="token comment"># E f2的参数对f3而言</span>
        x <span class="token operator">=</span> <span class="token number">222</span>   <span class="token comment"># E 此处的x对f3而言</span>
        <span class="token keyword">def</span> <span class="token function">f3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">nonlocal</span> x  <span class="token comment"># -- 若f1函数嵌套里没有x 则报错找不到x变量</span>
            x <span class="token operator">=</span> <span class="token number">333</span>     <span class="token comment"># -- 改的是最近的x = 222的值</span>
        f3<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>   <span class="token comment"># 333</span>
        <span class="token comment"># {'f3': &lt;function f1.&lt;locals&gt;.f2.&lt;locals&gt;.f3 at 0x7fc60c71c9d0&gt;, 'x': 333}</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">locals</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># f2的局部作用域</span>
    f2<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>    <span class="token comment"># 111</span>
    <span class="token comment"># {'x': 111, 'f2': &lt;function f1.&lt;locals&gt;.f2 at 0x7fc60c71c790&gt;}</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">locals</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># f1的局部作用域</span>
    
f1<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>  <span class="token comment"># 1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div><hr></div></div> <!----> <div class="page-edit"><!----> <!----> <!----></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/49737b/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">数据类型之哈希</div></a> <a href="/pages/bd8ead/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">函数高级</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/49737b/" class="prev">数据类型之哈希</a></span> <span class="next"><a href="/pages/bd8ead/">函数高级</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/8sk2b3/"><div>
            搜索相关
            <!----></div></a> <span class="date">03-22</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/2kn2p2/"><div>
            CURD
            <!----></div></a> <span class="date">03-20</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/1kn1m1/"><div>
            自动生成
            <!----></div></a> <span class="date">03-15</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="https://github.com/OnePieceDC" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://www.cnblogs.com/DC0307/" title="博客园" target="_blank" class="iconfont icon-bokeyuan"></a><a href="https://music.163.com/#/song?id=1854188649" title="听音乐" target="_blank" class="iconfont icon-erji"></a><a href="https://www.jianshu.com/u/5310eb537315" title="简书" target="_blank" class="iconfont icon-jianshu"></a><a href="mailto:1415806497@qq.com" title="QQ" target="_blank" class="iconfont icon-youjian"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2023-2024
    <span>DC | One Piece</span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <div class="body-bg" style="background:url() center center / cover no-repeat;opacity:0.5;"></div> <!----> <!----></div><div class="global-ui"><!----><div id="goTop" class="hide-cat" data-v-8ccb5928></div><div></div><canvas id="vuepress-canvas-cursor"></canvas><div></div><div></div></div></div>
    <script src="/assets/js/app.ac54adc6.js" defer></script><script src="/assets/js/4.7ddc74e3.js" defer></script><script src="/assets/js/1.a0c4ff1b.js" defer></script><script src="/assets/js/3.8b03321d.js" defer></script><script src="/assets/js/124.cacc66be.js" defer></script><script src="/assets/js/104.cae2d944.js" defer></script><script src="/assets/js/184.46eabf07.js" defer></script>
  </body>
</html>
