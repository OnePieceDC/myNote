<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>计算机网络之网络层 | DC&#39;s blog</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="/fonts/iconfont.css">
    <meta name="description" content="人类终将毁灭,世界属于三体!">
    <meta name="keywords" content="DC的个人博客.">
    
    <link rel="preload" href="/assets/css/0.styles.66b92039.css" as="style"><link rel="preload" href="/assets/js/app.ac54adc6.js" as="script"><link rel="preload" href="/assets/js/4.7ddc74e3.js" as="script"><link rel="preload" href="/assets/js/1.a0c4ff1b.js" as="script"><link rel="preload" href="/assets/js/3.8b03321d.js" as="script"><link rel="preload" href="/assets/js/95.e591bede.js" as="script"><link rel="preload" href="/assets/js/104.cae2d944.js" as="script"><link rel="preload" href="/assets/js/184.46eabf07.js" as="script"><link rel="prefetch" href="/assets/js/10.a91ae011.js"><link rel="prefetch" href="/assets/js/100.2e8ea472.js"><link rel="prefetch" href="/assets/js/101.46f57a02.js"><link rel="prefetch" href="/assets/js/102.f51bcd80.js"><link rel="prefetch" href="/assets/js/103.3f003e0e.js"><link rel="prefetch" href="/assets/js/105.6c6ebc28.js"><link rel="prefetch" href="/assets/js/106.47dc8889.js"><link rel="prefetch" href="/assets/js/107.6b5602b4.js"><link rel="prefetch" href="/assets/js/108.46f0c21d.js"><link rel="prefetch" href="/assets/js/109.0f1168a5.js"><link rel="prefetch" href="/assets/js/11.e6a94228.js"><link rel="prefetch" href="/assets/js/110.6a961498.js"><link rel="prefetch" href="/assets/js/111.c6f27c88.js"><link rel="prefetch" href="/assets/js/112.9ee3d3bb.js"><link rel="prefetch" href="/assets/js/113.82b72aa0.js"><link rel="prefetch" href="/assets/js/114.7487460e.js"><link rel="prefetch" href="/assets/js/115.cd079d0a.js"><link rel="prefetch" href="/assets/js/116.b6b829eb.js"><link rel="prefetch" href="/assets/js/117.89d9336c.js"><link rel="prefetch" href="/assets/js/118.467c4437.js"><link rel="prefetch" href="/assets/js/119.c4b2ac40.js"><link rel="prefetch" href="/assets/js/12.9d3501e4.js"><link rel="prefetch" href="/assets/js/120.5ff31c09.js"><link rel="prefetch" href="/assets/js/121.2e59c3a5.js"><link rel="prefetch" href="/assets/js/122.a66096cf.js"><link rel="prefetch" href="/assets/js/123.4885ba5f.js"><link rel="prefetch" href="/assets/js/124.cacc66be.js"><link rel="prefetch" href="/assets/js/125.dc5b30fe.js"><link rel="prefetch" href="/assets/js/126.4e21eb5e.js"><link rel="prefetch" href="/assets/js/127.cb36a9bf.js"><link rel="prefetch" href="/assets/js/128.ce38358e.js"><link rel="prefetch" href="/assets/js/129.e5f414eb.js"><link rel="prefetch" href="/assets/js/13.ca017a68.js"><link rel="prefetch" href="/assets/js/130.17b597f0.js"><link rel="prefetch" href="/assets/js/131.e1ded2dc.js"><link rel="prefetch" href="/assets/js/132.aae1c627.js"><link rel="prefetch" href="/assets/js/133.73cecdb3.js"><link rel="prefetch" href="/assets/js/134.80cf38a0.js"><link rel="prefetch" href="/assets/js/135.735ed588.js"><link rel="prefetch" href="/assets/js/136.91f8db08.js"><link rel="prefetch" href="/assets/js/137.d6fb8bda.js"><link rel="prefetch" href="/assets/js/138.75cafe73.js"><link rel="prefetch" href="/assets/js/139.b01bf0db.js"><link rel="prefetch" href="/assets/js/14.ee2605b5.js"><link rel="prefetch" href="/assets/js/140.ff0a7911.js"><link rel="prefetch" href="/assets/js/141.c69e7f54.js"><link rel="prefetch" href="/assets/js/142.997b03ac.js"><link rel="prefetch" href="/assets/js/143.e40faea8.js"><link rel="prefetch" href="/assets/js/144.369f23e5.js"><link rel="prefetch" href="/assets/js/145.1268424d.js"><link rel="prefetch" href="/assets/js/146.94c65c4a.js"><link rel="prefetch" href="/assets/js/147.05fe6a36.js"><link rel="prefetch" href="/assets/js/148.327cc29d.js"><link rel="prefetch" href="/assets/js/149.90068676.js"><link rel="prefetch" href="/assets/js/15.42e0a0e4.js"><link rel="prefetch" href="/assets/js/150.b4b780bb.js"><link rel="prefetch" href="/assets/js/151.b4611012.js"><link rel="prefetch" href="/assets/js/152.4d2c8246.js"><link rel="prefetch" href="/assets/js/153.f32dfa58.js"><link rel="prefetch" href="/assets/js/154.b79a78fb.js"><link rel="prefetch" href="/assets/js/155.6ad2865c.js"><link rel="prefetch" href="/assets/js/156.fd49a1af.js"><link rel="prefetch" href="/assets/js/157.55113800.js"><link rel="prefetch" href="/assets/js/158.af321bc9.js"><link rel="prefetch" href="/assets/js/159.37d9c659.js"><link rel="prefetch" href="/assets/js/16.007f45b3.js"><link rel="prefetch" href="/assets/js/160.7a3b5a9a.js"><link rel="prefetch" href="/assets/js/161.fc1fbea8.js"><link rel="prefetch" href="/assets/js/162.2f8d3d1c.js"><link rel="prefetch" href="/assets/js/163.aa889940.js"><link rel="prefetch" href="/assets/js/164.5d8b2cb7.js"><link rel="prefetch" href="/assets/js/165.44d4a9b5.js"><link rel="prefetch" href="/assets/js/166.c1b4c4d4.js"><link rel="prefetch" href="/assets/js/167.0c39929e.js"><link rel="prefetch" href="/assets/js/168.fede035a.js"><link rel="prefetch" href="/assets/js/169.ff940d50.js"><link rel="prefetch" href="/assets/js/17.7395c644.js"><link rel="prefetch" href="/assets/js/170.b6fcb3bf.js"><link rel="prefetch" href="/assets/js/171.2b927a7c.js"><link rel="prefetch" href="/assets/js/172.b07a90a1.js"><link rel="prefetch" href="/assets/js/173.367352bf.js"><link rel="prefetch" href="/assets/js/174.4ea4e20f.js"><link rel="prefetch" href="/assets/js/175.d9679b61.js"><link rel="prefetch" href="/assets/js/176.f7804143.js"><link rel="prefetch" href="/assets/js/177.c5d1e680.js"><link rel="prefetch" href="/assets/js/178.808293fa.js"><link rel="prefetch" href="/assets/js/179.2acf6b3c.js"><link rel="prefetch" href="/assets/js/18.46f9153d.js"><link rel="prefetch" href="/assets/js/180.ddf3ecf7.js"><link rel="prefetch" href="/assets/js/181.4da0855c.js"><link rel="prefetch" href="/assets/js/182.591d135a.js"><link rel="prefetch" href="/assets/js/183.9d08f9fe.js"><link rel="prefetch" href="/assets/js/185.ee1c8428.js"><link rel="prefetch" href="/assets/js/186.c7b19133.js"><link rel="prefetch" href="/assets/js/187.52945990.js"><link rel="prefetch" href="/assets/js/188.a1d395c5.js"><link rel="prefetch" href="/assets/js/189.5b66165e.js"><link rel="prefetch" href="/assets/js/19.2db19edb.js"><link rel="prefetch" href="/assets/js/190.265a75de.js"><link rel="prefetch" href="/assets/js/191.b4c65143.js"><link rel="prefetch" href="/assets/js/192.cc4d4115.js"><link rel="prefetch" href="/assets/js/193.fa02ecc5.js"><link rel="prefetch" href="/assets/js/194.b0c9ad53.js"><link rel="prefetch" href="/assets/js/195.eda8cd34.js"><link rel="prefetch" href="/assets/js/196.cbae4dc6.js"><link rel="prefetch" href="/assets/js/197.693b1b85.js"><link rel="prefetch" href="/assets/js/198.8213665b.js"><link rel="prefetch" href="/assets/js/199.ddf0036d.js"><link rel="prefetch" href="/assets/js/2.4c15b693.js"><link rel="prefetch" href="/assets/js/20.6742e8ae.js"><link rel="prefetch" href="/assets/js/200.340df508.js"><link rel="prefetch" href="/assets/js/201.7431c15b.js"><link rel="prefetch" href="/assets/js/202.217b2b38.js"><link rel="prefetch" href="/assets/js/203.06c6a93d.js"><link rel="prefetch" href="/assets/js/204.a068a898.js"><link rel="prefetch" href="/assets/js/205.9361d3f5.js"><link rel="prefetch" href="/assets/js/206.886beca0.js"><link rel="prefetch" href="/assets/js/207.2278bda8.js"><link rel="prefetch" href="/assets/js/208.db0acc0d.js"><link rel="prefetch" href="/assets/js/209.0e05b204.js"><link rel="prefetch" href="/assets/js/21.fd552a4e.js"><link rel="prefetch" href="/assets/js/210.4c730041.js"><link rel="prefetch" href="/assets/js/211.417dbee1.js"><link rel="prefetch" href="/assets/js/212.eef4f4a3.js"><link rel="prefetch" href="/assets/js/213.ab742b0b.js"><link rel="prefetch" href="/assets/js/214.a57228de.js"><link rel="prefetch" href="/assets/js/215.37f52459.js"><link rel="prefetch" href="/assets/js/216.2f110f92.js"><link rel="prefetch" href="/assets/js/217.09654311.js"><link rel="prefetch" href="/assets/js/218.a7568950.js"><link rel="prefetch" href="/assets/js/219.628ee193.js"><link rel="prefetch" href="/assets/js/22.465a76d2.js"><link rel="prefetch" href="/assets/js/220.c5df9186.js"><link rel="prefetch" href="/assets/js/221.101ddb09.js"><link rel="prefetch" href="/assets/js/222.db210e3c.js"><link rel="prefetch" href="/assets/js/223.429cbf14.js"><link rel="prefetch" href="/assets/js/224.aa002868.js"><link rel="prefetch" href="/assets/js/225.79a40017.js"><link rel="prefetch" href="/assets/js/226.3e08228b.js"><link rel="prefetch" href="/assets/js/227.a09dd4b4.js"><link rel="prefetch" href="/assets/js/228.f930c492.js"><link rel="prefetch" href="/assets/js/229.f639a9e4.js"><link rel="prefetch" href="/assets/js/23.df6831af.js"><link rel="prefetch" href="/assets/js/230.e8ac7aad.js"><link rel="prefetch" href="/assets/js/231.99501214.js"><link rel="prefetch" href="/assets/js/232.e2932792.js"><link rel="prefetch" href="/assets/js/233.43dfa689.js"><link rel="prefetch" href="/assets/js/234.7951f9c4.js"><link rel="prefetch" href="/assets/js/235.1dc96b6c.js"><link rel="prefetch" href="/assets/js/236.40b8d4e4.js"><link rel="prefetch" href="/assets/js/237.75a692de.js"><link rel="prefetch" href="/assets/js/238.cc9d9ac1.js"><link rel="prefetch" href="/assets/js/239.4616a566.js"><link rel="prefetch" href="/assets/js/24.b68dc734.js"><link rel="prefetch" href="/assets/js/240.dd825147.js"><link rel="prefetch" href="/assets/js/241.85e3219b.js"><link rel="prefetch" href="/assets/js/242.bf4123c4.js"><link rel="prefetch" href="/assets/js/243.ce68f4f0.js"><link rel="prefetch" href="/assets/js/244.e2598d4d.js"><link rel="prefetch" href="/assets/js/245.2c696827.js"><link rel="prefetch" href="/assets/js/246.2c44a497.js"><link rel="prefetch" href="/assets/js/247.02405fce.js"><link rel="prefetch" href="/assets/js/248.6727bdf6.js"><link rel="prefetch" href="/assets/js/249.4901f575.js"><link rel="prefetch" href="/assets/js/25.d639c65c.js"><link rel="prefetch" href="/assets/js/250.c922c9ea.js"><link rel="prefetch" href="/assets/js/251.b1350ead.js"><link rel="prefetch" href="/assets/js/252.8295c5ea.js"><link rel="prefetch" href="/assets/js/253.b0a9ba20.js"><link rel="prefetch" href="/assets/js/254.d208b848.js"><link rel="prefetch" href="/assets/js/255.2cfb6ad3.js"><link rel="prefetch" href="/assets/js/256.e7687a81.js"><link rel="prefetch" href="/assets/js/257.db329d54.js"><link rel="prefetch" href="/assets/js/258.be75b1f9.js"><link rel="prefetch" href="/assets/js/259.67500f7e.js"><link rel="prefetch" href="/assets/js/26.9db429a9.js"><link rel="prefetch" href="/assets/js/260.73609cfa.js"><link rel="prefetch" href="/assets/js/261.22fc7c08.js"><link rel="prefetch" href="/assets/js/262.2c620ccd.js"><link rel="prefetch" href="/assets/js/263.e0ce1454.js"><link rel="prefetch" href="/assets/js/264.7fe82318.js"><link rel="prefetch" href="/assets/js/265.537d06c5.js"><link rel="prefetch" href="/assets/js/266.901695a7.js"><link rel="prefetch" href="/assets/js/267.8eb24590.js"><link rel="prefetch" href="/assets/js/268.a21e44dc.js"><link rel="prefetch" href="/assets/js/269.33e6ce5d.js"><link rel="prefetch" href="/assets/js/27.2296e284.js"><link rel="prefetch" href="/assets/js/270.31507ac3.js"><link rel="prefetch" href="/assets/js/271.b9406b42.js"><link rel="prefetch" href="/assets/js/272.0acaba6f.js"><link rel="prefetch" href="/assets/js/273.c2e359b0.js"><link rel="prefetch" href="/assets/js/274.a80428a6.js"><link rel="prefetch" href="/assets/js/28.7e4f4dc1.js"><link rel="prefetch" href="/assets/js/29.ba75f79a.js"><link rel="prefetch" href="/assets/js/30.16cd3622.js"><link rel="prefetch" href="/assets/js/31.54ed5bc1.js"><link rel="prefetch" href="/assets/js/32.b2fbba6a.js"><link rel="prefetch" href="/assets/js/33.f7ff0107.js"><link rel="prefetch" href="/assets/js/34.4b2cea7d.js"><link rel="prefetch" href="/assets/js/35.1159e74c.js"><link rel="prefetch" href="/assets/js/36.0b6296f3.js"><link rel="prefetch" href="/assets/js/37.fc67879e.js"><link rel="prefetch" href="/assets/js/38.637afaf8.js"><link rel="prefetch" href="/assets/js/39.748a78f3.js"><link rel="prefetch" href="/assets/js/40.4fede9bb.js"><link rel="prefetch" href="/assets/js/41.c7f0b087.js"><link rel="prefetch" href="/assets/js/42.5b1a487d.js"><link rel="prefetch" href="/assets/js/43.59275b93.js"><link rel="prefetch" href="/assets/js/44.b18a4c94.js"><link rel="prefetch" href="/assets/js/45.bc8f7cb3.js"><link rel="prefetch" href="/assets/js/46.6a4ec89f.js"><link rel="prefetch" href="/assets/js/47.e1e129e6.js"><link rel="prefetch" href="/assets/js/48.c284ce23.js"><link rel="prefetch" href="/assets/js/49.17e5dd65.js"><link rel="prefetch" href="/assets/js/5.e3d12916.js"><link rel="prefetch" href="/assets/js/50.34c3ac45.js"><link rel="prefetch" href="/assets/js/51.035f7031.js"><link rel="prefetch" href="/assets/js/52.e9ef227a.js"><link rel="prefetch" href="/assets/js/53.ecbb032d.js"><link rel="prefetch" href="/assets/js/54.e9af4cfe.js"><link rel="prefetch" href="/assets/js/55.7e71402b.js"><link rel="prefetch" href="/assets/js/56.511071fe.js"><link rel="prefetch" href="/assets/js/57.13b7fe79.js"><link rel="prefetch" href="/assets/js/58.e51f8b0e.js"><link rel="prefetch" href="/assets/js/59.a1b8bdb7.js"><link rel="prefetch" href="/assets/js/6.5fc3f358.js"><link rel="prefetch" href="/assets/js/60.fd7e1c08.js"><link rel="prefetch" href="/assets/js/61.0daf2361.js"><link rel="prefetch" href="/assets/js/62.04632944.js"><link rel="prefetch" href="/assets/js/63.f0dd5615.js"><link rel="prefetch" href="/assets/js/64.89a4b562.js"><link rel="prefetch" href="/assets/js/65.6764ff0c.js"><link rel="prefetch" href="/assets/js/66.049bdee1.js"><link rel="prefetch" href="/assets/js/67.b0d4ec16.js"><link rel="prefetch" href="/assets/js/68.46d97067.js"><link rel="prefetch" href="/assets/js/69.f540f0da.js"><link rel="prefetch" href="/assets/js/7.ce17dd73.js"><link rel="prefetch" href="/assets/js/70.17d8f857.js"><link rel="prefetch" href="/assets/js/71.b2a166a0.js"><link rel="prefetch" href="/assets/js/72.1c17a875.js"><link rel="prefetch" href="/assets/js/73.dac8984b.js"><link rel="prefetch" href="/assets/js/74.5bbc33ac.js"><link rel="prefetch" href="/assets/js/75.483644c7.js"><link rel="prefetch" href="/assets/js/76.de5461ab.js"><link rel="prefetch" href="/assets/js/77.7fa90702.js"><link rel="prefetch" href="/assets/js/78.f41853b8.js"><link rel="prefetch" href="/assets/js/79.598b50e6.js"><link rel="prefetch" href="/assets/js/80.61d2d23a.js"><link rel="prefetch" href="/assets/js/81.d310c6e4.js"><link rel="prefetch" href="/assets/js/82.22aa814c.js"><link rel="prefetch" href="/assets/js/83.f493eba4.js"><link rel="prefetch" href="/assets/js/84.3a32a1eb.js"><link rel="prefetch" href="/assets/js/85.2f47134e.js"><link rel="prefetch" href="/assets/js/86.74e65a77.js"><link rel="prefetch" href="/assets/js/87.e87bff96.js"><link rel="prefetch" href="/assets/js/88.aabc97af.js"><link rel="prefetch" href="/assets/js/89.b0945d87.js"><link rel="prefetch" href="/assets/js/90.630f62d3.js"><link rel="prefetch" href="/assets/js/91.ed816647.js"><link rel="prefetch" href="/assets/js/92.19065457.js"><link rel="prefetch" href="/assets/js/93.a0fe1919.js"><link rel="prefetch" href="/assets/js/94.51e48580.js"><link rel="prefetch" href="/assets/js/96.1723f1d6.js"><link rel="prefetch" href="/assets/js/97.02bbb7d4.js"><link rel="prefetch" href="/assets/js/98.a3625ba6.js"><link rel="prefetch" href="/assets/js/99.1accbf48.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.5959bfd2.js">
    <link rel="stylesheet" href="/assets/css/0.styles.66b92039.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu have-body-img"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/nav-logo.png" alt="DC's blog" class="logo"> <span class="site-name can-hide">DC's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="IT必备" class="dropdown-title"><a href="/IT/" class="link-title">IT必备</a> <span class="title" style="display:none;">IT必备</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/IT/basis/" class="nav-link">计算机基础</a></li><li class="dropdown-item"><!----> <a href="/IT/linux/" class="nav-link">linux基础</a></li><li class="dropdown-item"><!----> <a href="/IT/mysql/" class="nav-link">mysql</a></li><li class="dropdown-item"><!----> <a href="/IT/git/" class="nav-link">git</a></li><li class="dropdown-item"><!----> <a href="/IT/structure/" class="nav-link">数据结构与算法</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Python" class="dropdown-title"><a href="/python/" class="link-title">Python</a> <span class="title" style="display:none;">Python</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/python/basis/" class="nav-link">opp</a></li><li class="dropdown-item"><!----> <a href="/python/oop/" class="nav-link">oop</a></li><li class="dropdown-item"><!----> <a href="/python/Network_concurrency/" class="nav-link">网络并发编程</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/front_end/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front_end/html/" class="nav-link">html</a></li><li class="dropdown-item"><!----> <a href="/front_end/css/" class="nav-link">css</a></li><li class="dropdown-item"><!----> <a href="/front_end/js/" class="nav-link">javascript</a></li><li class="dropdown-item"><!----> <a href="/front_end/jquery/" class="nav-link">jquery</a></li><li class="dropdown-item"><!----> <a href="/front_end/ui/" class="nav-link">UI</a></li><li class="dropdown-item"><!----> <a href="/front_end/vue/" class="nav-link">vue</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><a href="/python_web/" class="link-title">后端</a> <span class="title" style="display:none;">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/python_web/django/" class="nav-link">Django</a></li><li class="dropdown-item"><!----> <a href="/python_web/drf/" class="nav-link">drf</a></li><li class="dropdown-item"><!----> <a href="/python_web/drf_re/" class="nav-link">drf_re</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="实战" class="dropdown-title"><a href="/project/" class="link-title">实战</a> <span class="title" style="display:none;">实战</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>前后端不分离</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/project/bbs/" class="nav-link">BBS</a></li><li class="dropdown-subitem"><a href="/project/order/" class="nav-link">订单系统</a></li><li class="dropdown-subitem"><a href="/project/crm/" class="nav-link">CRM</a></li></ul></li><li class="dropdown-item"><h4>前后端分离</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/project/supply/" class="nav-link">供应链系统</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><a href="/other/" class="link-title">其他</a> <span class="title" style="display:none;">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/other/essays/" class="nav-link">杂文</a></li><li class="dropdown-item"><h4>关于我</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/about/" class="nav-link">me</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><!----> <span class="title" style="display:;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/OnePieceDC/" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="/img/avatar.gif"> <div class="blogger-info"><h3>DC</h3> <span>愿我一生欢喜,不为世俗所及.</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="IT必备" class="dropdown-title"><a href="/IT/" class="link-title">IT必备</a> <span class="title" style="display:none;">IT必备</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/IT/basis/" class="nav-link">计算机基础</a></li><li class="dropdown-item"><!----> <a href="/IT/linux/" class="nav-link">linux基础</a></li><li class="dropdown-item"><!----> <a href="/IT/mysql/" class="nav-link">mysql</a></li><li class="dropdown-item"><!----> <a href="/IT/git/" class="nav-link">git</a></li><li class="dropdown-item"><!----> <a href="/IT/structure/" class="nav-link">数据结构与算法</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Python" class="dropdown-title"><a href="/python/" class="link-title">Python</a> <span class="title" style="display:none;">Python</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/python/basis/" class="nav-link">opp</a></li><li class="dropdown-item"><!----> <a href="/python/oop/" class="nav-link">oop</a></li><li class="dropdown-item"><!----> <a href="/python/Network_concurrency/" class="nav-link">网络并发编程</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/front_end/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front_end/html/" class="nav-link">html</a></li><li class="dropdown-item"><!----> <a href="/front_end/css/" class="nav-link">css</a></li><li class="dropdown-item"><!----> <a href="/front_end/js/" class="nav-link">javascript</a></li><li class="dropdown-item"><!----> <a href="/front_end/jquery/" class="nav-link">jquery</a></li><li class="dropdown-item"><!----> <a href="/front_end/ui/" class="nav-link">UI</a></li><li class="dropdown-item"><!----> <a href="/front_end/vue/" class="nav-link">vue</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><a href="/python_web/" class="link-title">后端</a> <span class="title" style="display:none;">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/python_web/django/" class="nav-link">Django</a></li><li class="dropdown-item"><!----> <a href="/python_web/drf/" class="nav-link">drf</a></li><li class="dropdown-item"><!----> <a href="/python_web/drf_re/" class="nav-link">drf_re</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="实战" class="dropdown-title"><a href="/project/" class="link-title">实战</a> <span class="title" style="display:none;">实战</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>前后端不分离</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/project/bbs/" class="nav-link">BBS</a></li><li class="dropdown-subitem"><a href="/project/order/" class="nav-link">订单系统</a></li><li class="dropdown-subitem"><a href="/project/crm/" class="nav-link">CRM</a></li></ul></li><li class="dropdown-item"><h4>前后端分离</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/project/supply/" class="nav-link">供应链系统</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><a href="/other/" class="link-title">其他</a> <span class="title" style="display:none;">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/other/essays/" class="nav-link">杂文</a></li><li class="dropdown-item"><h4>关于我</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/about/" class="nav-link">me</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><!----> <span class="title" style="display:;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/OnePieceDC/" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>计算机基础</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/53a986/" class="sidebar-link">前奏(介绍)</a></li><li><a href="/pages/dc71f9/" class="sidebar-link">计算机硬件组成</a></li><li><a href="/pages/08b54b/" class="sidebar-link">操作系统</a></li><li><a href="/pages/f1616b/" class="sidebar-link">计算机网络概览</a></li><li><a href="/pages/c5ac45/" class="sidebar-link">计算机网络之网络接口层</a></li><li><a href="/pages/fbcc9d/" aria-current="page" class="active sidebar-link">计算机网络之网络层</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/fbcc9d/#引言" class="sidebar-link">引言</a></li><li class="sidebar-sub-header level2"><a href="/pages/fbcc9d/#ip协议" class="sidebar-link">IP协议</a></li><li class="sidebar-sub-header level2"><a href="/pages/fbcc9d/#ip地址" class="sidebar-link">IP地址</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/fbcc9d/#ip地址的组成" class="sidebar-link">IP地址的组成</a></li><li class="sidebar-sub-header level3"><a href="/pages/fbcc9d/#ip地址的分类" class="sidebar-link">IP地址的分类</a></li><li class="sidebar-sub-header level3"><a href="/pages/fbcc9d/#私有地址" class="sidebar-link">私有地址</a></li><li class="sidebar-sub-header level3"><a href="/pages/fbcc9d/#nat" class="sidebar-link">NAT</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/fbcc9d/#子网掩码" class="sidebar-link">子网掩码</a></li><li class="sidebar-sub-header level2"><a href="/pages/fbcc9d/#网络地址" class="sidebar-link">网络地址</a></li><li class="sidebar-sub-header level2"><a href="/pages/fbcc9d/#子网划分-了解" class="sidebar-link">子网划分(了解)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/fbcc9d/#未划分子网" class="sidebar-link">未划分子网</a></li><li class="sidebar-sub-header level3"><a href="/pages/fbcc9d/#划分子网" class="sidebar-link">划分子网</a></li><li class="sidebar-sub-header level3"><a href="/pages/fbcc9d/#练习" class="sidebar-link">练习</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/fbcc9d/#vlan-了解" class="sidebar-link">VLAN(了解)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/fbcc9d/#二层隔离与三层隔离" class="sidebar-link">二层隔离与三层隔离</a></li><li class="sidebar-sub-header level3"><a href="/pages/fbcc9d/#vlan简介" class="sidebar-link">vlan简介</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/fbcc9d/#arp协议" class="sidebar-link">ARP协议</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/fbcc9d/#ip数据包的走向" class="sidebar-link">IP数据包的走向</a></li><li class="sidebar-sub-header level3"><a href="/pages/fbcc9d/#arp的广播包" class="sidebar-link">ARP的广播包</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/fbcc9d/#网络层整个流程" class="sidebar-link">网络层整个流程</a></li></ul></li><li><a href="/pages/a7d5f8/" class="sidebar-link">计算机网络之传输层</a></li><li><a href="/pages/680e06/" class="sidebar-link">计算机网络补充</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>linux基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>mysql</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>git</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据结构与算法</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-91157402><div class="articleInfo" data-v-91157402><ul class="breadcrumbs" data-v-91157402><li data-v-91157402><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-91157402></a></li> <li data-v-91157402><a href="/categories/?category=IT_Need" title="分类" data-v-91157402>IT_Need</a></li><li data-v-91157402><a href="/categories/?category=%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80" title="分类" data-v-91157402>计算机基础</a></li></ul> <div class="info" data-v-91157402><div title="作者" class="author iconfont icon-touxiang" data-v-91157402><a href="https://github.com/OnePieceDC" target="_blank" title="作者" class="beLink" data-v-91157402>DC</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-91157402><a href="javascript:;" data-v-91157402>2022-10-13</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">计算机网络之网络层<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h2 id="引言"><a href="#引言" class="header-anchor">#</a> 引言</h2> <blockquote><p><font color="brown"><strong>IP地址+mac地址可以标识全世界范围内唯一一台计算机.</strong></font><br>
IP地址找到对方主机处于哪个局域网,mac地址找到对方主机处于该网络的哪里..</p> <p><strong>因为有ARP协议的存在, ARP会将ip地址转换成mac地址</strong><br>
(要么是局域网内一台计算机的mac地址,要么是网关的mac地址,不能也不会是在公网中的设备的mac地址)</p> <p><strong>网络层(IP协议)本身没有传输包的功能,包的实际传输是委托给数据链路层(以太网中的交换机)来实现的!!</strong></p></blockquote> <div class="language-tex line-numbers-mode"><pre class="language-tex"><code><span class="token punctuation">[</span>补充:n进制转十进制<span class="token punctuation">]</span>
123（n为10,8,16） --&gt; 1*n^2 + 2*n^1 + 3*n^0  '1的后面有2位数,2的后面有1位数,3后面有0位数'
101 (n为2) --&gt; 1*2^2 + 0*2^1 + 1*2^0 = 5
Ps: 十进制转二进展 -- 除2取余法

求二进制数 01111111 转成十进制, 有个小窍门！ 
01111111先加1,因为二进制逢二进一,原二进制数变成了10000000即2^7=128 所以01111111 = 2^7-1 = 127
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>敲黑板!</strong> 先简单了解一些网络层的专业名词...<br> <font color="blue">Q: 解释下 IP地址、网段、局域网、子网、子网掩码、默认网关、ARP</font></p> <div class="language-tex line-numbers-mode"><pre class="language-tex"><code>参考链接: https://blog.csdn.net/qq_43450715/article/details/120031497

用自己的话笼统解释:
1&gt; IP地址 由网络号+主机号组成.
2&gt; 若某一网段内主机数量太多,广播域太大就会影响传播效率.所以会对IP划分子网.
   eg: 192.168.1.0/27这个c类网络,网络号向主机号借了27-24=3位,即可产生2^3-2个子网;
       每个子网都是一个网段(每个子网的网络号是不一样的)
3&gt; 未划分子网时候,可以大胆的说这里网段/子网/局域网一个意思.因为只有一个网络.
   划分子网后,准确点说: 一个网络 = 一个(大)网段 = 多个子网/多个(小)网段/多个局域网,
   但通常为了省事,混着叫.没有做这么准确的区分..
4&gt; IP地址与子网掩码进行与运算得到子网地址,⽤来确定⽬标主机的IP是否与源主机在同⼀个⽹络/网段内.
5&gt; ARP协议可以将IP地址转换成MAC地址
6&gt; 每个主机会设置默认网关表明路由器的位置.

注意哦!属于同一网段/局域网的主机可以直接进行通信,不同网段的主机要通过路由器(网关)才能通信.
也就是说局域网一般指二层设备(数据链路层的交换机)可达的网络
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><hr> <h2 id="ip协议"><a href="#ip协议" class="header-anchor">#</a> IP协议</h2> <blockquote><p>IP协议是规定网络地址的协议,定义的地址称为IP地址.</p></blockquote> <p>IP协议的组成就不展开来具体阐述了.. 只需要知道IP协议里面有32位的源IP地址和32位的目的IP地址就行!!</p> <p>1&gt; 依照IP协议在网络里传输的数据,称为 <strong>'IP数据报/数据包'</strong><br>
2&gt; IP数据报 = head + data<br>
     head里面放有&lt;源IP地址&gt;和&lt;目标IP地址&gt;<br>
提一嘴: <font color="brown">IP地址的通信 在公网里 -- 采用的是 路由协议.. (不做过多阐述,知道就行)</font></p> <div class="language-tex line-numbers-mode"><pre class="language-tex"><code>从网络层下来的数据到数据链路层封装成帧: 
帧首部 源mac地址 目的mac地址  源IP地址	目的IP地址 IP数据报数据 帧尾部

Ps: 帧数据 = IP数据报 = IP报头 + IP数据报数据 = 源IP地址 + 目的IP地址 + IP数据报数据
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><hr> <h2 id="ip地址"><a href="#ip地址" class="header-anchor">#</a> IP地址</h2> <blockquote><p>先说在前面, IP地址有两大作用:<br>
     1&gt; arp协议会把ip地址解析成mac地址;<br>
     2&gt; 标识子网/局域网地址</p></blockquote> <h3 id="ip地址的组成"><a href="#ip地址的组成" class="header-anchor">#</a> IP地址的组成</h3> <blockquote><p>IPV4版本的IP地址占4个字节,由32位二进制数组成,通常用点分十进制数表示.每8位为一组..</p></blockquote> <p><strong>IP地址 = 网络号Network + 主机号Host</strong><br> <font color="gray">Ps: 网络号标识这台计算机在哪个局域网内;主机号标识该计算机是属于局域网的哪台机器..</font></p> <p><strong>IP地址的范围</strong><br>
00000000.00000000.00000000.00000000 ==&gt; 0.0.0.0<br>
11111111.11111111.11111111.11111111 ==&gt; 255.255.255.255<br> <font color="gray">例如: 10101100.00010000.00001010.000000100 ==&gt; 172.16.10.4</font></p> <h3 id="ip地址的分类"><a href="#ip地址的分类" class="header-anchor">#</a> IP地址的分类</h3> <blockquote><p>2^32个IP地址将网络号和主机号固定下来后,分为了5类</p></blockquote> <p><img src="/assets/img/5.653e4f0d.png" alt=""></p> <p><font color="blue">拿到一个IP地址,只需要看IP地址的第一组十进制数, 就能判断IP地址是属于哪一类的!!</font><br>
约定前1、2、3个8位组分别为A、B、C类IP地址的网络号!(也就约定了子网掩码)  D类组播地址;E类研究地址.<br>
这5类IP地址都以固定的二进制数开头,分别是 0、10、110、1110、11110.</p> <table><thead><tr><th>网络类别</th> <th>最大可指派的网络数</th> <th>第一个网络号</th> <th>最后一个网络号</th> <th>每个网络的主机数</th></tr></thead> <tbody><tr><td>A    0</td> <td>2^7 - 2 = 126</td> <td>1</td> <td>126</td> <td>2^24-2 = 16777214</td></tr> <tr><td>B    10</td> <td>2^14 - 1 = 16383</td> <td>128.1</td> <td>191.255</td> <td>2^16-2 = 65534</td></tr> <tr><td>C    110</td> <td>2^21 - 1 = 2097151</td> <td>192.0.1</td> <td>223.255.255</td> <td>2^8-2 = 254</td></tr></tbody></table> <p><strong>解析:</strong>  IP地址分类后,路由器仅根据目的主机所在的子网进行转发(不考虑主机号),这样可以减少路由表所占的存储空间以及查找路由表的时间！！！</p> <p>     1&gt; <strong>A至C类网络支持的网络数(局域网个数)依次增多,每个局域网所含的主机数依次减少.</strong><br>
     2&gt; A类 <strong>127</strong> .0.0.0和<strong>0</strong> .0.0.0 这两个网络地址不能使用;<br>
          B类  <strong>128.0</strong>.0.0 这个网络地址不能使用;<br>
          C类  <strong>192.0.0</strong>.0 这个的网络地址不能使用;<br>
     3&gt; 每个局域网/网段都需要减去网络地址和广播地址这两个IP地址..它两不能作为主机的IP..<br>
     4&gt; A至C类网络中还包含的有只能在局域网内使用的私有地址...</p> <p><font color="brown"><strong>[一些特殊的ip地址]</strong></font></p> <p>1&gt; 网络地址: 网络号保留,主机号全为0     用于标识网络的<br>
2&gt; 广播地址: 网络号保留,主机号全为1 -- 会在该网段/子网进行广播<br>
3&gt; 全网广播地址(IPV4最大的地址): 255.255.255.255<br>
     会在整个网络(该网络划分的所有子网)里进行广播; 各路由器均不转发<br>
4&gt; 0.0.0.0(IPV4最小的地址): 指已经不是真正意义上的ip地址,不知道本机IP时,可以用它！<br>
5&gt; 回环地址: 数字127用于给系统做诊断用..<br>
     127.0.0.1 -- 用于本地软件环回测试    数据包到网卡了,没有往交换机走,原路返回,自己发给自己<br> <font color="gray">对于每一台linux主机,都有本地回环网卡,此网卡上配置的IP地址就是127.0.0.1</font><br> <font color="gray">相当于一台计算机即当客户端也当服务端,用于保证软件本身的开发没问题,<strong>排除网络的因素</strong></font><br>
6&gt; <font color="brown">私有地址(内网地址)</font>:只能在局域网内使用!!!!! 公网上是没有这些IP地址的..</p> <h3 id="私有地址"><a href="#私有地址" class="header-anchor">#</a> 私有地址</h3> <blockquote><p>IP地址 = 公网地址 + 私有地址</p></blockquote> <table><thead><tr><th>私有地址类别</th> <th>所有的私有IP地址 (闭区间)</th> <th>私有网络地址 （闭区间）</th> <th>应用场景</th></tr></thead> <tbody><tr><td>A</td> <td>10.(0~255).(0~255).(0~255)</td> <td>10.0.0.0/8</td> <td>--- --- ---</td></tr> <tr><td>B</td> <td>172.(16~31).(0~255).(0~255)</td> <td>172.(16～31).0.0/12</td> <td>商用服务器集群化作业</td></tr> <tr><td>C</td> <td>192.168.(0~255).(0~255)</td> <td>192.168.(0~255).0/16</td> <td>办公室</td></tr></tbody></table> <p>Ps: 可以算嘛,172.(16～31).0.0/12  网络号位12位, 第二个8位组前4位最大为'1111',转成10进制为31<br>
      B类私有地址 -- 2^4 = 16个连续的B类网络; C类私有地址 -- 2^8 = 256个连续的C类网络..</p> <h3 id="nat"><a href="#nat" class="header-anchor">#</a> NAT</h3> <blockquote><p>网关都具备NAPT功能,能够只通过一个公网IP地址就能让N台主机与外界通信.<br>
NAPT,它相对于传统的NAT,多了端口号用于找到私有网络里的目的主机..</p></blockquote> <p>花钱办宽带实际上是要了一个在公网里的地址, 光猫 = 交换机 + 路由器..</p> <table><thead><tr><th>方向</th> <th>旧的IP地址和端口号</th> <th>新的IP地址和端口号</th></tr></thead> <tbody><tr><td>出</td> <td>192.168.0.3:30000</td> <td>172.38.1.5:40001 (公网)</td></tr> <tr><td>出</td> <td>192.168.0.4:30000</td> <td>172.38.1.5:40002 (公网)</td></tr> <tr><td>入</td> <td>172.38.1.5:40001 (公网)</td> <td>192.168.0.3:30000</td></tr> <tr><td>入</td> <td>172.38.1.5:40002 (公网)</td> <td>192.168.0.4:30000</td></tr></tbody></table> <p>私有地址不同端口号相同, 表明私网内不同主机上的同一软件发起的通信,到了网关这,进行NAPT转换,使用的是同一个公网IP,但分配的是不同的端口号.. 仔细想想,这是为了一一对应..</p> <p>具体来说,假设家里的两台电脑,计算机A和计算机B私有地址分别是192.168.0.3和192.168.0.4, 计算机A和计算机B上的QQ软件都要发送一个聊天信息出去, 数据包到了网关这,需要进行转换:
        192.168.0.3:30000  转换成 172.38.1.5:40001<br>
        192.168.0.4:30000  转换成 172.38.1.5:40002<br>
接着,计算机A和B上的QQ软件需要接受聊天信息, 响应的数据包根据路由器的映射表进行IP和端口的转换:<br>
        172.38.1.5:40001 转换成 192.168.0.3:30000<br>
        172.38.1.5:40002 转换成 192.168.0.4:30000</p> <p><font color="blue">可以这样理解, 40001、40002分别代表了计算机A和计算机B,30000代表的是计算机上的QQ软件...</font></p> <hr> <h2 id="子网掩码"><a href="#子网掩码" class="header-anchor">#</a> 子网掩码</h2> <blockquote><p>如何确定IP地址哪些部分是网络号呢？就要用到子网掩码！！</p></blockquote> <p>子网掩码(netmask): 用来标识一个ip地址的网络号个数<br>
        从左到右连续的1,连续的0. 只要属于网络号,子网掩码就标记为1;<br>
可以简写 -- eg <font color="brown">172.16.10.2/<strong>24</strong></font>  (24代表IP地址的前24位是网络号)</p> <p><strong>单独的IP地址没有意义,要与子网掩码一起工作</strong>: IP地址 + 子网掩码 --&gt; 标识某个局域网的位置<br> <font color="gray">Ps: 即子网掩码告诉了我们IP地址的网络号..或者是通过子网掩码我们能知道网络地址(IP所处的局域网)..</font><br> <font color="gray">通常为了方便只会说IP地址,自己要明白还有子网掩码!</font></p> <hr> <h2 id="网络地址"><a href="#网络地址" class="header-anchor">#</a> 网络地址</h2> <blockquote><p>二进制的IP地址与二进制的子网掩码做按位与运算得到网络地址/子网地址 -- 同1为1,否则为0</p></blockquote> <div class="language-tex line-numbers-mode"><pre class="language-tex"><code>例1&gt; 求IP地址172.16.10.4/24的子网地址
     10101100.00010000.00001010.00000100 ==&gt; 172.16.10.4
     11111111.11111111.11111111.00000000 ==&gt; 255.255.255.0
     10101100.00010000.00001010.00000000 ==&gt; 172.16.10.0
例2&gt; 求IP地址172.16.10.5/24的子网地址
     10101100.00010000.00001010.00000101 ==&gt; 172.16.10.5
     11111111.11111111.11111111.00000000 ==&gt; 255.255.255.0
     10101100.00010000.00001010.00000000 ==&gt; 172.16.10.0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>子网地址相同,代表处于同一个LAN(局域网)中,<br>
So, 172.16.10.4/24 与 172.16.10.5/24 是处于同一个网段/局域网.它两通信靠mac地址就行.</p> <hr> <h2 id="子网划分-了解"><a href="#子网划分-了解" class="header-anchor">#</a> 子网划分(了解)</h2> <blockquote><p>借主机位给网络位使用,也就是子网掩码连续1的个数会增多..<br>
通常会在内网中用私有地址进行子网划分...</p></blockquote> <h3 id="未划分子网"><a href="#未划分子网" class="header-anchor">#</a> 未划分子网</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>172.16.10.2/16这个IP所处的网络是一个B类网络.(因为此IP是B类且子网掩码是16位,所以此网络未划分子网)
1&gt; 在此网络里所有主机的:
     子网掩码 -- 255.255.0.0
     网络号 -- 172.16. 
     网络地址 -- 172.16.0.0 (网络号+主机号全0)
     广播地址 -- 172.16.255.255 (网络号+主机号全1)
2&gt; 此网络可用主机IP -- &lt;172.16.0.1 ～ 172.16.255.254&gt; 共2^(8+8)-2=65534个可用主机.
     即主机地址,可分配给网络中终端设备的地址,介于网络地址与广播地址之间
3&gt; 172.16.10.2/24 这个IP的主机号 --  10.2
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="划分子网"><a href="#划分子网" class="header-anchor">#</a> 划分子网</h3> <blockquote><p>划分成多个子网后, 每个子网分配一个独立的广播域, 能节约地址、缓解内网广播负担.</p></blockquote> <div class="language-tex line-numbers-mode"><pre class="language-tex"><code>172.16.0.0/16 将这个B类网络地址切割成一个个小的网段/局域网.如何进行子网划分呢？

172.16.0.0/17 向主机号借一位 借的这一位称为子网位(可为 0 亦可为 1)
1&gt; 若子网位为0:
  子网地址/网络地址: 172.16.0.0/17
  子网掩码: 255.255.128.0
  广播地址(剩下15个主机位全为1): 172.16.127.255
  主机: 172.16.0.1~172.16.127.254  共128*254个
1&gt; 若子网位为1:
  子网地址/网络地址: 172.16.128.0/17
  子网掩码: 255.255.128.0
  广播地址(剩下15个主机位全为1): 172.16.255.255
  主机: 172.16.128.1~172.16.255.254 共(255-128+1)*254个
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p><font color="red"><strong>两个公式</strong></font><br>
1&gt;  <code>2^m = 向主机位借位后产生的子网个数</code>  (m为所借位数)<br>
      Ps: 通常至少会借两位,因为划分子网后,处于头和尾的子网拿来用是没问题的,但大家约定不会用..<br>
2&gt;  <code>2^n – 2 = 向主机位借位后产生的每个子网中可用主机IP数</code><br>
      (n为原主机位的个数减去被借位的个数后的剩余位数) 减2是因为每个子网中的网络地址和广播地址不能用</p> <h3 id="练习"><a href="#练习" class="header-anchor">#</a> 练习</h3> <p>★问: 192.168.1.64/27能否分配给PC使用？</p> <p>首先可以看出是将192.168.1.0/24 这个C类网络做了一个子网划分,借了3位,变成了192.168.1.0/27, 产生了2^3 = 8个子网,同时每个子网有2^5-2=30个可用IP.</p> <p>192.168.1. 000 _ _ _ _ _      网络地址:  192.168.1.0 / 27        广播地址：192.168.1.31<br>
192.168.1. 001 _ _ _ _ _                        192.168.1.32 / 27                               63<br>
192.168.1. 010 _ _ _ _ _                        192.168.1.64 / 27                               95<br>
192.168.1. 011 _ _ _ _ _                        192.168.1.96 / 27                               127<br>
192.168.1. 100 _ _ _ _ _                        192.168.1.128 / 27                             159<br>
… … …</p> <p>以上这个方法太笨！！有聪明一点的办法.<br>
这样思考 借了3位,那么8个子网,每个子网都有32个主机IP(不管那两个是否看可用),也就是说每个子网块的大小为32个. 所以 往后加32, 就是每个子网的网络地址; 知道了相邻子网的网络地址, 再看看广播地址的概念, 广播地址使用的是该网络范围内最大地址, 所以看下一个相邻子网的网络地址再减一就行啦！</p> <hr> <h2 id="vlan-了解"><a href="#vlan-了解" class="header-anchor">#</a> VLAN(了解)</h2> <h3 id="二层隔离与三层隔离"><a href="#二层隔离与三层隔离" class="header-anchor">#</a> 二层隔离与三层隔离</h3> <p>隔离是指属于不同的局域网<br>
二层隔离: 两台计算机接入不同的交换机<br>
三层隔离: 子网地址不同</p> <p>假设一个教室ABCD四台计算机都接入同一个交换机.<br>
1&gt; 那么这个教室的四台计算机在二层是连通的,但不能说这四台计算机都处于同一个局域网;<br>
2&gt; 若进行了子网划分,那么处于不同子网的计算机实现了三层隔离;<br>
     arp计算的时候可不会管这些计算机是否连在同一个交换机,它只管相互通信的计算机网络地址是否相同.<br>
        A: 192.168.1.1/25	B: 192.168.1.2/25  -- 子网位为0<br>
        C: 192.168.1.129/25	D: 192.168.1.130/25  -- 子网位为1<br> <font color="gray">数据包的走向: 计算机A - 教室交换机 - 教室路由器 - 教室交换机 - 计算机D </font><br>
3&gt; 二层连通,三层是隔离的. 这种设计很不合理!! 因为二层连通,交换机进行广播时(交换机会在两种情况下广播),不同子网的计算机因为连在同一个交换机上都能收到!!!  一般情况下,二三层应该同时隔离!<br>
4&gt; 怎么实现二三层同时隔离呢？<strong>现在的交换机都支持划分多个vlan(虚拟局域网)</strong>.. ,AB划分到一个vlan里,CD划分到另外一个vlan里,这样的话,第一个vlan的广播不能蔓延到第二个vlan里面!!!</p> <p><font color="gray">192.168.1.0 这个网络地址进行子网划分,根据真实需求划分出多个子网,每个子网都支持多台主机.. 再结合交换机的vlan.. 实现二三层同时隔离.</font></p> <p><strong>综上:</strong><br>
     二层连通,三层是可以隔离的,即两台计算机接入同一个交换机,不一定在同一个局域网内... 不合理;
     二层隔离应该与三层隔离保持一致;</p> <h3 id="vlan简介"><a href="#vlan简介" class="header-anchor">#</a> vlan简介</h3> <blockquote><p>参考链接: <code>https://www.cnblogs.com/linhaifeng/p/6710751.html</code></p></blockquote> <p>1&gt; 带vlan的交换机的端口分为两类: (结合这两个端口可以实现跨交换机划分vlan)<br>
     Access port -- 主要用于连接电脑 这些端口会被打上VLAN Tag(交换机才能知道计算机属于哪一个vlan)<br>
     Trunk por -- 主要将交换机与交换机进行一个串连..<br>
2&gt; vlan的不足之一:<br>
     它最多只支持 4096 个 VLAN 网络(还要除去几个预留的), 对于大型数据中心的来说,这个数量是远远不够.</p> <p>交换机做集群提升性能,防止单点故障.站在物理层面是两台交换机,站在逻辑层面是一台超级交换机.<br> <strong>在物理层面,一台服务器需要有两根线分别连接到这两个交换机同一个端口(eg 10号端口)..</strong>
增加性能,防止单点故障(有时间解决问题)  所以在<strong>逻辑层面端口数是没有增加的</strong>!!!</p> <hr> <h2 id="arp协议"><a href="#arp协议" class="header-anchor">#</a> ARP协议</h2> <blockquote><p><strong>[承上启下]</strong><br>
计算机A如何确定与计算机B是否在一个局域网内? 算IP所处的子网/网络地址.<br>
1&gt; 若在一个局域网内,如何通信？<br>
     通过数据链路层的学习,我们知道该用以太网协议,基于mac地址通过数据链路层的二层交换机进行广播
2&gt; 若跨局域网,如何通信？<br>
     提一嘴,这涉及到公网的路由协议啦.(不过多深究). 但局域网到公网的过程还是需要了解的..</p> <p><font color="brown"><strong>剧透</strong>: 不管是否在一个局域网内,交换机都需要事先将ARP协议的广播包进行广播!!! </font><br> <font color="brown"><strong>细节</strong>: 数据链路层的&lt;数据帧&gt;里的目的mac地址是通过ARP协议的广播包广播后得到的!!!</font></p></blockquote> <h3 id="ip数据包的走向"><a href="#ip数据包的走向" class="header-anchor">#</a> IP数据包的走向</h3> <p>1&gt; 通信第一步先拿到目标主机的IP地址<br>
2&gt; 判断出目标主机与自己(源主机)是否在同一个子网里.<br>
     ○ 若在同一个子网里,数据包的走向:<br>
          源主机 ---&gt; 本地交换机 ---&gt; 目标主机<br>
     ○ 若不在,数据包的走向:<br>
          源主机 ---&gt; 本地交换机 ---&gt; <strong>本地路由器</strong> ---&gt; <strong>公网</strong>(运营商的一系列的网络设备) ---&gt; /<br>
          目标路由器 ---&gt; 目标交换机 ---&gt;  目标主机<br> <font color="gray">Ps: 本地路由器算不算局域网里的设备?算!因为它连到了交换机上.</font></p> <h3 id="arp的广播包"><a href="#arp的广播包" class="header-anchor">#</a> ARP的广播包</h3> <p><font color="gray">源主机A  IP        --     172.16.10.10/24 </font><br> <font color="gray">目标主机B  IP    --     172.16.10.11/24  </font><br> <font color="gray">目标主机C  IP    --     101.200.10.22/24  </font></p> <p><font color="blue"><strong>要晓得</strong>: 每台计算机都有自己的MAC地址、会提前设置自己的IP地址、子网掩码和默认网关的IP地址.. </font><br> <font color="brown">注意哦!每台电脑里都有个ARP缓存表(IP地址与mac地址的映射关系表),一开始的时候这个表是空的,通过大家不断广播 arp 请求,最终所有电脑里面的arp 缓存表都会更新完整...</font></p> <p>step1: 拿到目标主机的IP与子网掩码<br>
step2: arp协议会算出本机和目标主机的网络地址/子网地址.<br>
step3: 判断源的子网地址与目标的子网地址是否一样.<br> <font color="gray">先要明确,这里发的广播包不是真正通信的数据,而是通过ARP协议得到目标主机或网关的MAC地址. </font></p> <p>1&gt; <strong>A与B</strong> 处于同一个局域网, 那么 <strong>通信就是在同一个子网内通信,靠的是mac地址定位到对方在哪里.</strong><br>
     A如何得到B的mac地址呢？<br>
        △ A发送ARP协议的广播包.<br>
        △ 交换机拿到这个广播包,看到目标MAC是<code>FF:FF:FF:FF:FF:FF</code>,会将此广播包进行广播<br>
        △ 此局域网的主机会拆开广播包看目标IP是不是自己,是的话就会带上自己的mac地址回包..<br>
                  这样A就能得到B的mac地址..  主机A的ARP缓存表也得到了更新..<br>
                  A再重新封装发起真正的通信..<br> <font color="green">真正的通信数据: mac(A)  <strong>mac(B)</strong>  IP(A)	IP(B)	数据部分</font><br>
2&gt; <strong>A与C</strong> 是跨局域网传输, 那么 <strong>通信不在同一个子网内通信,靠路由器把数据包转发出去</strong><br>
     A下一步需要得到所处局域网的默认网关的mac地址!(A是知道/设置了默认网关的IP地址的)<br>
        △ A同样会发送ARP协议的广播包.交换机拿到这个广播包同样也会进行广播.<br>
        △ 但只有路由器会响应,于是乎A拿到了局域网里网关/路由器的mac地址..<br> <font color="green">真正的通信数据: mac(A)  <strong>mac(网关)</strong>  IP(A)	IP(C)	数据部分</font></p> <p>数据包通过路由器到了公网,在公网中需要根据路由表<font color="brown"><strong>hop-by-hop!!</strong></font></p> <p><strong>广播包的格式如下</strong>:</p> <table><thead><tr><th></th> <th>源MAC</th> <th>目标MAC</th> <th>源IP</th> <th>目标IP</th> <th style="text-align:left;">数据部分</th></tr></thead> <tbody><tr><td>源主机A</td> <td>mac A</td> <td>FF:FF:FF:FF:FF:FF</td> <td>172.16.10.10/24</td> <td>B主机的IP   or   网关的IP</td> <td style="text-align:left;">数据</td></tr></tbody></table> <p><font color="gray">Ps: FF-FF-FF-FF-FF-FF 是用于广播的mac地址  广播包的目标IP是谁,就在跟谁要mac地址</font></p> <div class="language-tex line-numbers-mode"><pre class="language-tex"><code>交换机只有在两种情况才把包进行广播,拆包时发现:
1&gt; 目标mac是: FF:FF:FF:FF:FF:FF
2&gt; 目标mac不存在于mac地址表中

为啥说IP地址不可或缺:
1&gt; ARP协议需要. 以太网协议里的目的mac地址起初是不知道的,需要事先通过ARP协议得到.
2&gt; 处于网络层的路由器作为一台每个端口都拥有独立的MAC地址的设备,可以把数据包做一次转发.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><hr> <h2 id="网络层整个流程"><a href="#网络层整个流程" class="header-anchor">#</a> 网络层整个流程</h2> <p><img src="/assets/img/21.e79667d4.png" alt=""></p> <p>A给F发送一个数据包!</p> <div class="language-tex line-numbers-mode"><pre class="language-tex"><code>网络拓扑图中,路由器1与路由器2进行了连接..路由器1的路由表如下:
Ps:路由表是根据很多路由算法/基于ip地址的路由协议得来的,不是我们研究的范围..
    |     目的地址      |    下一跳      | 端口 |
    | :--------------: | :-----------: | :--: |
    |  192.168.0.0/24  |               |  0   |
    |  192.168.1.0/24  |               |  1   |
    |  192.168.2.0/24  | 192.168.100.5 |      |
    | 192.168.100.0/24 |               |  2   |
若路由器转发的数据包里目的IP地址是192.168.1.0/24这个子网里的,则通过1号端口进行转发.
若匹配到的是下一跳,则需要再次匹配路由表,找到其端口..

1&gt; 首先根据A与F各自的IP和子网掩码与运算得到网络地址分别为 192.168.0.0, 192.168.2.0 
   得知AF处于不同的局域网. 于是乎A会先将数据包发给默认网关/路由器1(192.168.0.254)  
   再细化这一过程,主机A里是设置的有默认网关的IP地址的.
      ○ 主机A会通过交换机1对arp广播包进行广播..
      ○ 主机A拿到交换机1连接到路由器1上的那个端口的mac地址(ABAB).. 并更新主机A的arp缓存表
      ○ 主机A将源MAC地址(AAAA)与网关MAC地址(ABAB)封装在数据链路层头部;
        将源IP地址(192.168.0.1)和目的IP地址(192.168.2.2)封装在网络层头部,然后发包..
        广播包的格式:  AAAA FF:FF:FF:FF:FF:FF IP(A) IP(默认网关) 数据
        数据包的格式:  MAC(主机A) MAC(默认网关) IP(A) IP(F) 数据部分
       注意:数据包里的源IP和目的IP在整个过程是不会变的!!!
2&gt; 交换机1拿到数据包后,拆包发现目的MAC地址是ABAB,查询MAC地址表,从对应的交换机端口将数据包转发给了路由器1.
3&gt; 数据包到了路由器1这,拆包发现目的mac就是自己的,收下了数据包
   路由器继续拆包发现目标IP地址是192.168.2.2,此IP处于192.168.2.0/24这个子网/局域网下,
   路由器1查询自己的路由表,发现下一跳的地址是192.168.100.5,此IP处于192.168.100.0/24网段,
   再次匹配自己的路由表,匹配到的端口为2.. arp广播后得到192.168.100.5的mac地址为D2D2 重新封装数据包.
        数据包的格式: D1D1 D2D2 IP(A) IP(F) 数据部分
4&gt; 数据包到了路由器2这,拆包发现目的mac就是自己的,收下了数据包
   路由器2继续拆包,看到其目的地址是192.168.2.2,路由器2查询自己的路由表,匹配到端口号为1.
   路由器2查询自己的ARP缓存表,查询到192.168.2.2对应的mac是FFFF(若ARP缓存表中没有则依旧需要arp广播).
   将mac地址封装在数据链路层头部,并从1号端口把数据包发出去
        数据包的格式: EFEF FFFF IP(A) IP(F) 数据部分
5&gt; 交换机3收到了数据包,发现目的MAC地址为FFFF,查询自己的MAC地址表,将数据包从对应的交换机6号端口发了出去.
6&gt; 数据包到了F这里,F拆包发现目的mac地址就是自己,于是收下了这个包.

可以发现发送的真正数据,数据包的源IP和目标IP是不变的！！！
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><p><font color="red"><strong>网络层(IP协议)本身没有传输包的功能,包的实际传输是委托给数据链路层(以太网中的交换机)来实现的!!</strong></font></p> <p><img src="/assets/img/22.39643555.gif" alt=""></p> <p><font color="gray">注意哦: 源mac和目的mac每次都会更换.. mac地址表、交换机广播、路由表、ARP广播</font></p> <p><strong>站在不同的视角观察,得到些许规则:</strong></p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token punctuation">[</span>电脑视角<span class="token punctuation">]</span>
    首先我要知道我的 IP 以及对方的 IP
    通过子网掩码判断我们是否在同一个子网
    在同一个子网就通过 arp 获取对方 mac址直接扔出去
    不在同一个子网就通过 arp 获取默认网关的 mac 地址直接扔出去

<span class="token punctuation">[</span>交换机视角<span class="token punctuation">]</span>
    我收到的数据包必须有目标 MAC 地址
    通过 MAC 地址表查映射关系
    查到了就按照映射关系从我的指定端口发出去
    查不到就所有端口都发出去

<span class="token punctuation">[</span>路由器视角<span class="token punctuation">]</span>
    我收到的数据包必须有目标 IP 地址
    通过路由表查映射关系
    查到了就按照映射关系从我的指定端口发出去
    查不到则返回一个路由不可达的数据包
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><hr></div></div> <!----> <div class="page-edit"><!----> <!----> <!----></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/c5ac45/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">计算机网络之网络接口层</div></a> <a href="/pages/a7d5f8/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">计算机网络之传输层</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/c5ac45/" class="prev">计算机网络之网络接口层</a></span> <span class="next"><a href="/pages/a7d5f8/">计算机网络之传输层</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/8sk2b3/"><div>
            搜索相关
            <!----></div></a> <span class="date">03-22</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/2kn2p2/"><div>
            CURD
            <!----></div></a> <span class="date">03-20</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/1kn1m1/"><div>
            自动生成
            <!----></div></a> <span class="date">03-15</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="https://github.com/OnePieceDC" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://www.cnblogs.com/DC0307/" title="博客园" target="_blank" class="iconfont icon-bokeyuan"></a><a href="https://music.163.com/#/song?id=1854188649" title="听音乐" target="_blank" class="iconfont icon-erji"></a><a href="https://www.jianshu.com/u/5310eb537315" title="简书" target="_blank" class="iconfont icon-jianshu"></a><a href="mailto:1415806497@qq.com" title="QQ" target="_blank" class="iconfont icon-youjian"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2023-2024
    <span>DC | One Piece</span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <div class="body-bg" style="background:url() center center / cover no-repeat;opacity:0.5;"></div> <!----> <!----></div><div class="global-ui"><!----><div id="goTop" class="hide-cat" data-v-8ccb5928></div><div></div><canvas id="vuepress-canvas-cursor"></canvas><div></div><div></div></div></div>
    <script src="/assets/js/app.ac54adc6.js" defer></script><script src="/assets/js/4.7ddc74e3.js" defer></script><script src="/assets/js/1.a0c4ff1b.js" defer></script><script src="/assets/js/3.8b03321d.js" defer></script><script src="/assets/js/95.e591bede.js" defer></script><script src="/assets/js/104.cae2d944.js" defer></script><script src="/assets/js/184.46eabf07.js" defer></script>
  </body>
</html>
