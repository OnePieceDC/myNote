<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>网络管理 | DC&#39;s blog</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="/fonts/iconfont.css">
    <meta name="description" content="人类终将毁灭,世界属于三体!">
    <meta name="keywords" content="DC的个人博客.">
    
    <link rel="preload" href="/assets/css/0.styles.66b92039.css" as="style"><link rel="preload" href="/assets/js/app.ac54adc6.js" as="script"><link rel="preload" href="/assets/js/4.7ddc74e3.js" as="script"><link rel="preload" href="/assets/js/1.a0c4ff1b.js" as="script"><link rel="preload" href="/assets/js/3.8b03321d.js" as="script"><link rel="preload" href="/assets/js/166.c1b4c4d4.js" as="script"><link rel="preload" href="/assets/js/104.cae2d944.js" as="script"><link rel="preload" href="/assets/js/184.46eabf07.js" as="script"><link rel="prefetch" href="/assets/js/10.a91ae011.js"><link rel="prefetch" href="/assets/js/100.2e8ea472.js"><link rel="prefetch" href="/assets/js/101.46f57a02.js"><link rel="prefetch" href="/assets/js/102.f51bcd80.js"><link rel="prefetch" href="/assets/js/103.3f003e0e.js"><link rel="prefetch" href="/assets/js/105.6c6ebc28.js"><link rel="prefetch" href="/assets/js/106.47dc8889.js"><link rel="prefetch" href="/assets/js/107.6b5602b4.js"><link rel="prefetch" href="/assets/js/108.46f0c21d.js"><link rel="prefetch" href="/assets/js/109.0f1168a5.js"><link rel="prefetch" href="/assets/js/11.e6a94228.js"><link rel="prefetch" href="/assets/js/110.6a961498.js"><link rel="prefetch" href="/assets/js/111.c6f27c88.js"><link rel="prefetch" href="/assets/js/112.9ee3d3bb.js"><link rel="prefetch" href="/assets/js/113.82b72aa0.js"><link rel="prefetch" href="/assets/js/114.7487460e.js"><link rel="prefetch" href="/assets/js/115.cd079d0a.js"><link rel="prefetch" href="/assets/js/116.b6b829eb.js"><link rel="prefetch" href="/assets/js/117.89d9336c.js"><link rel="prefetch" href="/assets/js/118.467c4437.js"><link rel="prefetch" href="/assets/js/119.c4b2ac40.js"><link rel="prefetch" href="/assets/js/12.9d3501e4.js"><link rel="prefetch" href="/assets/js/120.5ff31c09.js"><link rel="prefetch" href="/assets/js/121.2e59c3a5.js"><link rel="prefetch" href="/assets/js/122.a66096cf.js"><link rel="prefetch" href="/assets/js/123.4885ba5f.js"><link rel="prefetch" href="/assets/js/124.cacc66be.js"><link rel="prefetch" href="/assets/js/125.dc5b30fe.js"><link rel="prefetch" href="/assets/js/126.4e21eb5e.js"><link rel="prefetch" href="/assets/js/127.cb36a9bf.js"><link rel="prefetch" href="/assets/js/128.ce38358e.js"><link rel="prefetch" href="/assets/js/129.e5f414eb.js"><link rel="prefetch" href="/assets/js/13.ca017a68.js"><link rel="prefetch" href="/assets/js/130.17b597f0.js"><link rel="prefetch" href="/assets/js/131.e1ded2dc.js"><link rel="prefetch" href="/assets/js/132.aae1c627.js"><link rel="prefetch" href="/assets/js/133.73cecdb3.js"><link rel="prefetch" href="/assets/js/134.80cf38a0.js"><link rel="prefetch" href="/assets/js/135.735ed588.js"><link rel="prefetch" href="/assets/js/136.91f8db08.js"><link rel="prefetch" href="/assets/js/137.d6fb8bda.js"><link rel="prefetch" href="/assets/js/138.75cafe73.js"><link rel="prefetch" href="/assets/js/139.b01bf0db.js"><link rel="prefetch" href="/assets/js/14.ee2605b5.js"><link rel="prefetch" href="/assets/js/140.ff0a7911.js"><link rel="prefetch" href="/assets/js/141.c69e7f54.js"><link rel="prefetch" href="/assets/js/142.997b03ac.js"><link rel="prefetch" href="/assets/js/143.e40faea8.js"><link rel="prefetch" href="/assets/js/144.369f23e5.js"><link rel="prefetch" href="/assets/js/145.1268424d.js"><link rel="prefetch" href="/assets/js/146.94c65c4a.js"><link rel="prefetch" href="/assets/js/147.05fe6a36.js"><link rel="prefetch" href="/assets/js/148.327cc29d.js"><link rel="prefetch" href="/assets/js/149.90068676.js"><link rel="prefetch" href="/assets/js/15.42e0a0e4.js"><link rel="prefetch" href="/assets/js/150.b4b780bb.js"><link rel="prefetch" href="/assets/js/151.b4611012.js"><link rel="prefetch" href="/assets/js/152.4d2c8246.js"><link rel="prefetch" href="/assets/js/153.f32dfa58.js"><link rel="prefetch" href="/assets/js/154.b79a78fb.js"><link rel="prefetch" href="/assets/js/155.6ad2865c.js"><link rel="prefetch" href="/assets/js/156.fd49a1af.js"><link rel="prefetch" href="/assets/js/157.55113800.js"><link rel="prefetch" href="/assets/js/158.af321bc9.js"><link rel="prefetch" href="/assets/js/159.37d9c659.js"><link rel="prefetch" href="/assets/js/16.007f45b3.js"><link rel="prefetch" href="/assets/js/160.7a3b5a9a.js"><link rel="prefetch" href="/assets/js/161.fc1fbea8.js"><link rel="prefetch" href="/assets/js/162.2f8d3d1c.js"><link rel="prefetch" href="/assets/js/163.aa889940.js"><link rel="prefetch" href="/assets/js/164.5d8b2cb7.js"><link rel="prefetch" href="/assets/js/165.44d4a9b5.js"><link rel="prefetch" href="/assets/js/167.0c39929e.js"><link rel="prefetch" href="/assets/js/168.fede035a.js"><link rel="prefetch" href="/assets/js/169.ff940d50.js"><link rel="prefetch" href="/assets/js/17.7395c644.js"><link rel="prefetch" href="/assets/js/170.b6fcb3bf.js"><link rel="prefetch" href="/assets/js/171.2b927a7c.js"><link rel="prefetch" href="/assets/js/172.b07a90a1.js"><link rel="prefetch" href="/assets/js/173.367352bf.js"><link rel="prefetch" href="/assets/js/174.4ea4e20f.js"><link rel="prefetch" href="/assets/js/175.d9679b61.js"><link rel="prefetch" href="/assets/js/176.f7804143.js"><link rel="prefetch" href="/assets/js/177.c5d1e680.js"><link rel="prefetch" href="/assets/js/178.808293fa.js"><link rel="prefetch" href="/assets/js/179.2acf6b3c.js"><link rel="prefetch" href="/assets/js/18.46f9153d.js"><link rel="prefetch" href="/assets/js/180.ddf3ecf7.js"><link rel="prefetch" href="/assets/js/181.4da0855c.js"><link rel="prefetch" href="/assets/js/182.591d135a.js"><link rel="prefetch" href="/assets/js/183.9d08f9fe.js"><link rel="prefetch" href="/assets/js/185.ee1c8428.js"><link rel="prefetch" href="/assets/js/186.c7b19133.js"><link rel="prefetch" href="/assets/js/187.52945990.js"><link rel="prefetch" href="/assets/js/188.a1d395c5.js"><link rel="prefetch" href="/assets/js/189.5b66165e.js"><link rel="prefetch" href="/assets/js/19.2db19edb.js"><link rel="prefetch" href="/assets/js/190.265a75de.js"><link rel="prefetch" href="/assets/js/191.b4c65143.js"><link rel="prefetch" href="/assets/js/192.cc4d4115.js"><link rel="prefetch" href="/assets/js/193.fa02ecc5.js"><link rel="prefetch" href="/assets/js/194.b0c9ad53.js"><link rel="prefetch" href="/assets/js/195.eda8cd34.js"><link rel="prefetch" href="/assets/js/196.cbae4dc6.js"><link rel="prefetch" href="/assets/js/197.693b1b85.js"><link rel="prefetch" href="/assets/js/198.8213665b.js"><link rel="prefetch" href="/assets/js/199.ddf0036d.js"><link rel="prefetch" href="/assets/js/2.4c15b693.js"><link rel="prefetch" href="/assets/js/20.6742e8ae.js"><link rel="prefetch" href="/assets/js/200.340df508.js"><link rel="prefetch" href="/assets/js/201.7431c15b.js"><link rel="prefetch" href="/assets/js/202.217b2b38.js"><link rel="prefetch" href="/assets/js/203.06c6a93d.js"><link rel="prefetch" href="/assets/js/204.a068a898.js"><link rel="prefetch" href="/assets/js/205.9361d3f5.js"><link rel="prefetch" href="/assets/js/206.886beca0.js"><link rel="prefetch" href="/assets/js/207.2278bda8.js"><link rel="prefetch" href="/assets/js/208.db0acc0d.js"><link rel="prefetch" href="/assets/js/209.0e05b204.js"><link rel="prefetch" href="/assets/js/21.fd552a4e.js"><link rel="prefetch" href="/assets/js/210.4c730041.js"><link rel="prefetch" href="/assets/js/211.417dbee1.js"><link rel="prefetch" href="/assets/js/212.eef4f4a3.js"><link rel="prefetch" href="/assets/js/213.ab742b0b.js"><link rel="prefetch" href="/assets/js/214.a57228de.js"><link rel="prefetch" href="/assets/js/215.37f52459.js"><link rel="prefetch" href="/assets/js/216.2f110f92.js"><link rel="prefetch" href="/assets/js/217.09654311.js"><link rel="prefetch" href="/assets/js/218.a7568950.js"><link rel="prefetch" href="/assets/js/219.628ee193.js"><link rel="prefetch" href="/assets/js/22.465a76d2.js"><link rel="prefetch" href="/assets/js/220.c5df9186.js"><link rel="prefetch" href="/assets/js/221.101ddb09.js"><link rel="prefetch" href="/assets/js/222.db210e3c.js"><link rel="prefetch" href="/assets/js/223.429cbf14.js"><link rel="prefetch" href="/assets/js/224.aa002868.js"><link rel="prefetch" href="/assets/js/225.79a40017.js"><link rel="prefetch" href="/assets/js/226.3e08228b.js"><link rel="prefetch" href="/assets/js/227.a09dd4b4.js"><link rel="prefetch" href="/assets/js/228.f930c492.js"><link rel="prefetch" href="/assets/js/229.f639a9e4.js"><link rel="prefetch" href="/assets/js/23.df6831af.js"><link rel="prefetch" href="/assets/js/230.e8ac7aad.js"><link rel="prefetch" href="/assets/js/231.99501214.js"><link rel="prefetch" href="/assets/js/232.e2932792.js"><link rel="prefetch" href="/assets/js/233.43dfa689.js"><link rel="prefetch" href="/assets/js/234.7951f9c4.js"><link rel="prefetch" href="/assets/js/235.1dc96b6c.js"><link rel="prefetch" href="/assets/js/236.40b8d4e4.js"><link rel="prefetch" href="/assets/js/237.75a692de.js"><link rel="prefetch" href="/assets/js/238.cc9d9ac1.js"><link rel="prefetch" href="/assets/js/239.4616a566.js"><link rel="prefetch" href="/assets/js/24.b68dc734.js"><link rel="prefetch" href="/assets/js/240.dd825147.js"><link rel="prefetch" href="/assets/js/241.85e3219b.js"><link rel="prefetch" href="/assets/js/242.bf4123c4.js"><link rel="prefetch" href="/assets/js/243.ce68f4f0.js"><link rel="prefetch" href="/assets/js/244.e2598d4d.js"><link rel="prefetch" href="/assets/js/245.2c696827.js"><link rel="prefetch" href="/assets/js/246.2c44a497.js"><link rel="prefetch" href="/assets/js/247.02405fce.js"><link rel="prefetch" href="/assets/js/248.6727bdf6.js"><link rel="prefetch" href="/assets/js/249.4901f575.js"><link rel="prefetch" href="/assets/js/25.d639c65c.js"><link rel="prefetch" href="/assets/js/250.c922c9ea.js"><link rel="prefetch" href="/assets/js/251.b1350ead.js"><link rel="prefetch" href="/assets/js/252.8295c5ea.js"><link rel="prefetch" href="/assets/js/253.b0a9ba20.js"><link rel="prefetch" href="/assets/js/254.d208b848.js"><link rel="prefetch" href="/assets/js/255.2cfb6ad3.js"><link rel="prefetch" href="/assets/js/256.e7687a81.js"><link rel="prefetch" href="/assets/js/257.db329d54.js"><link rel="prefetch" href="/assets/js/258.be75b1f9.js"><link rel="prefetch" href="/assets/js/259.67500f7e.js"><link rel="prefetch" href="/assets/js/26.9db429a9.js"><link rel="prefetch" href="/assets/js/260.73609cfa.js"><link rel="prefetch" href="/assets/js/261.22fc7c08.js"><link rel="prefetch" href="/assets/js/262.2c620ccd.js"><link rel="prefetch" href="/assets/js/263.e0ce1454.js"><link rel="prefetch" href="/assets/js/264.7fe82318.js"><link rel="prefetch" href="/assets/js/265.537d06c5.js"><link rel="prefetch" href="/assets/js/266.901695a7.js"><link rel="prefetch" href="/assets/js/267.8eb24590.js"><link rel="prefetch" href="/assets/js/268.a21e44dc.js"><link rel="prefetch" href="/assets/js/269.33e6ce5d.js"><link rel="prefetch" href="/assets/js/27.2296e284.js"><link rel="prefetch" href="/assets/js/270.31507ac3.js"><link rel="prefetch" href="/assets/js/271.b9406b42.js"><link rel="prefetch" href="/assets/js/272.0acaba6f.js"><link rel="prefetch" href="/assets/js/273.c2e359b0.js"><link rel="prefetch" href="/assets/js/274.a80428a6.js"><link rel="prefetch" href="/assets/js/28.7e4f4dc1.js"><link rel="prefetch" href="/assets/js/29.ba75f79a.js"><link rel="prefetch" href="/assets/js/30.16cd3622.js"><link rel="prefetch" href="/assets/js/31.54ed5bc1.js"><link rel="prefetch" href="/assets/js/32.b2fbba6a.js"><link rel="prefetch" href="/assets/js/33.f7ff0107.js"><link rel="prefetch" href="/assets/js/34.4b2cea7d.js"><link rel="prefetch" href="/assets/js/35.1159e74c.js"><link rel="prefetch" href="/assets/js/36.0b6296f3.js"><link rel="prefetch" href="/assets/js/37.fc67879e.js"><link rel="prefetch" href="/assets/js/38.637afaf8.js"><link rel="prefetch" href="/assets/js/39.748a78f3.js"><link rel="prefetch" href="/assets/js/40.4fede9bb.js"><link rel="prefetch" href="/assets/js/41.c7f0b087.js"><link rel="prefetch" href="/assets/js/42.5b1a487d.js"><link rel="prefetch" href="/assets/js/43.59275b93.js"><link rel="prefetch" href="/assets/js/44.b18a4c94.js"><link rel="prefetch" href="/assets/js/45.bc8f7cb3.js"><link rel="prefetch" href="/assets/js/46.6a4ec89f.js"><link rel="prefetch" href="/assets/js/47.e1e129e6.js"><link rel="prefetch" href="/assets/js/48.c284ce23.js"><link rel="prefetch" href="/assets/js/49.17e5dd65.js"><link rel="prefetch" href="/assets/js/5.e3d12916.js"><link rel="prefetch" href="/assets/js/50.34c3ac45.js"><link rel="prefetch" href="/assets/js/51.035f7031.js"><link rel="prefetch" href="/assets/js/52.e9ef227a.js"><link rel="prefetch" href="/assets/js/53.ecbb032d.js"><link rel="prefetch" href="/assets/js/54.e9af4cfe.js"><link rel="prefetch" href="/assets/js/55.7e71402b.js"><link rel="prefetch" href="/assets/js/56.511071fe.js"><link rel="prefetch" href="/assets/js/57.13b7fe79.js"><link rel="prefetch" href="/assets/js/58.e51f8b0e.js"><link rel="prefetch" href="/assets/js/59.a1b8bdb7.js"><link rel="prefetch" href="/assets/js/6.5fc3f358.js"><link rel="prefetch" href="/assets/js/60.fd7e1c08.js"><link rel="prefetch" href="/assets/js/61.0daf2361.js"><link rel="prefetch" href="/assets/js/62.04632944.js"><link rel="prefetch" href="/assets/js/63.f0dd5615.js"><link rel="prefetch" href="/assets/js/64.89a4b562.js"><link rel="prefetch" href="/assets/js/65.6764ff0c.js"><link rel="prefetch" href="/assets/js/66.049bdee1.js"><link rel="prefetch" href="/assets/js/67.b0d4ec16.js"><link rel="prefetch" href="/assets/js/68.46d97067.js"><link rel="prefetch" href="/assets/js/69.f540f0da.js"><link rel="prefetch" href="/assets/js/7.ce17dd73.js"><link rel="prefetch" href="/assets/js/70.17d8f857.js"><link rel="prefetch" href="/assets/js/71.b2a166a0.js"><link rel="prefetch" href="/assets/js/72.1c17a875.js"><link rel="prefetch" href="/assets/js/73.dac8984b.js"><link rel="prefetch" href="/assets/js/74.5bbc33ac.js"><link rel="prefetch" href="/assets/js/75.483644c7.js"><link rel="prefetch" href="/assets/js/76.de5461ab.js"><link rel="prefetch" href="/assets/js/77.7fa90702.js"><link rel="prefetch" href="/assets/js/78.f41853b8.js"><link rel="prefetch" href="/assets/js/79.598b50e6.js"><link rel="prefetch" href="/assets/js/80.61d2d23a.js"><link rel="prefetch" href="/assets/js/81.d310c6e4.js"><link rel="prefetch" href="/assets/js/82.22aa814c.js"><link rel="prefetch" href="/assets/js/83.f493eba4.js"><link rel="prefetch" href="/assets/js/84.3a32a1eb.js"><link rel="prefetch" href="/assets/js/85.2f47134e.js"><link rel="prefetch" href="/assets/js/86.74e65a77.js"><link rel="prefetch" href="/assets/js/87.e87bff96.js"><link rel="prefetch" href="/assets/js/88.aabc97af.js"><link rel="prefetch" href="/assets/js/89.b0945d87.js"><link rel="prefetch" href="/assets/js/90.630f62d3.js"><link rel="prefetch" href="/assets/js/91.ed816647.js"><link rel="prefetch" href="/assets/js/92.19065457.js"><link rel="prefetch" href="/assets/js/93.a0fe1919.js"><link rel="prefetch" href="/assets/js/94.51e48580.js"><link rel="prefetch" href="/assets/js/95.e591bede.js"><link rel="prefetch" href="/assets/js/96.1723f1d6.js"><link rel="prefetch" href="/assets/js/97.02bbb7d4.js"><link rel="prefetch" href="/assets/js/98.a3625ba6.js"><link rel="prefetch" href="/assets/js/99.1accbf48.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.5959bfd2.js">
    <link rel="stylesheet" href="/assets/css/0.styles.66b92039.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu have-body-img"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/nav-logo.png" alt="DC's blog" class="logo"> <span class="site-name can-hide">DC's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="IT必备" class="dropdown-title"><a href="/IT/" class="link-title">IT必备</a> <span class="title" style="display:none;">IT必备</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/IT/basis/" class="nav-link">计算机基础</a></li><li class="dropdown-item"><!----> <a href="/IT/linux/" class="nav-link">linux基础</a></li><li class="dropdown-item"><!----> <a href="/IT/mysql/" class="nav-link">mysql</a></li><li class="dropdown-item"><!----> <a href="/IT/git/" class="nav-link">git</a></li><li class="dropdown-item"><!----> <a href="/IT/structure/" class="nav-link">数据结构与算法</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Python" class="dropdown-title"><a href="/python/" class="link-title">Python</a> <span class="title" style="display:none;">Python</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/python/basis/" class="nav-link">opp</a></li><li class="dropdown-item"><!----> <a href="/python/oop/" class="nav-link">oop</a></li><li class="dropdown-item"><!----> <a href="/python/Network_concurrency/" class="nav-link">网络并发编程</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/front_end/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front_end/html/" class="nav-link">html</a></li><li class="dropdown-item"><!----> <a href="/front_end/css/" class="nav-link">css</a></li><li class="dropdown-item"><!----> <a href="/front_end/js/" class="nav-link">javascript</a></li><li class="dropdown-item"><!----> <a href="/front_end/jquery/" class="nav-link">jquery</a></li><li class="dropdown-item"><!----> <a href="/front_end/ui/" class="nav-link">UI</a></li><li class="dropdown-item"><!----> <a href="/front_end/vue/" class="nav-link">vue</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><a href="/python_web/" class="link-title">后端</a> <span class="title" style="display:none;">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/python_web/django/" class="nav-link">Django</a></li><li class="dropdown-item"><!----> <a href="/python_web/drf/" class="nav-link">drf</a></li><li class="dropdown-item"><!----> <a href="/python_web/drf_re/" class="nav-link">drf_re</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="实战" class="dropdown-title"><a href="/project/" class="link-title">实战</a> <span class="title" style="display:none;">实战</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>前后端不分离</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/project/bbs/" class="nav-link">BBS</a></li><li class="dropdown-subitem"><a href="/project/order/" class="nav-link">订单系统</a></li><li class="dropdown-subitem"><a href="/project/crm/" class="nav-link">CRM</a></li></ul></li><li class="dropdown-item"><h4>前后端分离</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/project/supply/" class="nav-link">供应链系统</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><a href="/other/" class="link-title">其他</a> <span class="title" style="display:none;">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/other/essays/" class="nav-link">杂文</a></li><li class="dropdown-item"><h4>关于我</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/about/" class="nav-link">me</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><!----> <span class="title" style="display:;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/OnePieceDC/" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="/img/avatar.gif"> <div class="blogger-info"><h3>DC</h3> <span>愿我一生欢喜,不为世俗所及.</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="IT必备" class="dropdown-title"><a href="/IT/" class="link-title">IT必备</a> <span class="title" style="display:none;">IT必备</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/IT/basis/" class="nav-link">计算机基础</a></li><li class="dropdown-item"><!----> <a href="/IT/linux/" class="nav-link">linux基础</a></li><li class="dropdown-item"><!----> <a href="/IT/mysql/" class="nav-link">mysql</a></li><li class="dropdown-item"><!----> <a href="/IT/git/" class="nav-link">git</a></li><li class="dropdown-item"><!----> <a href="/IT/structure/" class="nav-link">数据结构与算法</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Python" class="dropdown-title"><a href="/python/" class="link-title">Python</a> <span class="title" style="display:none;">Python</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/python/basis/" class="nav-link">opp</a></li><li class="dropdown-item"><!----> <a href="/python/oop/" class="nav-link">oop</a></li><li class="dropdown-item"><!----> <a href="/python/Network_concurrency/" class="nav-link">网络并发编程</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/front_end/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front_end/html/" class="nav-link">html</a></li><li class="dropdown-item"><!----> <a href="/front_end/css/" class="nav-link">css</a></li><li class="dropdown-item"><!----> <a href="/front_end/js/" class="nav-link">javascript</a></li><li class="dropdown-item"><!----> <a href="/front_end/jquery/" class="nav-link">jquery</a></li><li class="dropdown-item"><!----> <a href="/front_end/ui/" class="nav-link">UI</a></li><li class="dropdown-item"><!----> <a href="/front_end/vue/" class="nav-link">vue</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><a href="/python_web/" class="link-title">后端</a> <span class="title" style="display:none;">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/python_web/django/" class="nav-link">Django</a></li><li class="dropdown-item"><!----> <a href="/python_web/drf/" class="nav-link">drf</a></li><li class="dropdown-item"><!----> <a href="/python_web/drf_re/" class="nav-link">drf_re</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="实战" class="dropdown-title"><a href="/project/" class="link-title">实战</a> <span class="title" style="display:none;">实战</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>前后端不分离</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/project/bbs/" class="nav-link">BBS</a></li><li class="dropdown-subitem"><a href="/project/order/" class="nav-link">订单系统</a></li><li class="dropdown-subitem"><a href="/project/crm/" class="nav-link">CRM</a></li></ul></li><li class="dropdown-item"><h4>前后端分离</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/project/supply/" class="nav-link">供应链系统</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><a href="/other/" class="link-title">其他</a> <span class="title" style="display:none;">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/other/essays/" class="nav-link">杂文</a></li><li class="dropdown-item"><h4>关于我</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/about/" class="nav-link">me</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><!----> <span class="title" style="display:;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/OnePieceDC/" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>计算机基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>linux基础</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/da5198/" class="sidebar-link">准备工作</a></li><li><a href="/pages/8939f4/" class="sidebar-link">初识shell与基础常用命令</a></li><li><a href="/pages/b323da/" class="sidebar-link">文件管理之基础命令</a></li><li><a href="/pages/bd85fe/" class="sidebar-link">文件管理之四大模式</a></li><li><a href="/pages/4e332e/" class="sidebar-link">文件管理之命令补充</a></li><li><a href="/pages/e843c3/" class="sidebar-link">文件管理之文件系统</a></li><li><a href="/pages/15d340/" class="sidebar-link">权限管理之用户与组</a></li><li><a href="/pages/1683d8/" class="sidebar-link">权限管理之文件权限</a></li><li><a href="/pages/7ba656/" class="sidebar-link">权限管理之ACL</a></li><li><a href="/pages/415178/" class="sidebar-link">权限管理之su与sudo</a></li><li><a href="/pages/80cc13/" class="sidebar-link">软件包管理之rpm</a></li><li><a href="/pages/0c6963/" class="sidebar-link">软件包管理之yum</a></li><li><a href="/pages/4944d1/" class="sidebar-link">查看进程</a></li><li><a href="/pages/cece9f/" class="sidebar-link">管理进程</a></li><li><a href="/pages/9c5405/" class="sidebar-link">存储管理之传统磁盘管理</a></li><li><a href="/pages/0d43c6/" class="sidebar-link">存储管理之LVM</a></li><li><a href="/pages/0fa05e/" aria-current="page" class="active sidebar-link">网络管理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/0fa05e/#网卡名字修改" class="sidebar-link">网卡名字修改</a></li><li class="sidebar-sub-header level2"><a href="/pages/0fa05e/#网络相关的一些命令" class="sidebar-link">网络相关的一些命令</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/0fa05e/#lspci" class="sidebar-link">lspci</a></li><li class="sidebar-sub-header level3"><a href="/pages/0fa05e/#mii-tool" class="sidebar-link">mii-tool</a></li><li class="sidebar-sub-header level3"><a href="/pages/0fa05e/#ping" class="sidebar-link">ping</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/0fa05e/#ifconfig" class="sidebar-link">ifconfig</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/0fa05e/#基本选项" class="sidebar-link">基本选项</a></li><li class="sidebar-sub-header level3"><a href="/pages/0fa05e/#命令结果解析" class="sidebar-link">命令结果解析</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/0fa05e/#万兆网卡的mtu" class="sidebar-link">万兆网卡的MTU</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/0fa05e/#千兆万兆区别" class="sidebar-link">千兆万兆区别</a></li><li class="sidebar-sub-header level3"><a href="/pages/0fa05e/#永久配置" class="sidebar-link">永久配置</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/0fa05e/#解决溢出数严重的问题" class="sidebar-link">解决溢出数严重的问题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/0fa05e/#储备知识" class="sidebar-link">储备知识</a></li><li class="sidebar-sub-header level3"><a href="/pages/0fa05e/#解决过程" class="sidebar-link">解决过程</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/0fa05e/#网卡相关配置文件" class="sidebar-link">网卡相关配置文件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/0fa05e/#解析-ifcfg-eth0文件" class="sidebar-link">解析 ifcfg-eth0文件</a></li><li class="sidebar-sub-header level3"><a href="/pages/0fa05e/#配置ifcfg-eth1文件" class="sidebar-link">配置ifcfg-eth1文件</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/0fa05e/#dns相关配置文件" class="sidebar-link">DNS相关配置文件</a></li><li class="sidebar-sub-header level2"><a href="/pages/0fa05e/#etc-services" class="sidebar-link">/etc/services</a></li><li class="sidebar-sub-header level2"><a href="/pages/0fa05e/#交换与路由" class="sidebar-link">交换与路由</a></li><li class="sidebar-sub-header level2"><a href="/pages/0fa05e/#linux主机充当路由" class="sidebar-link">Linux主机充当路由</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/0fa05e/#三大前提" class="sidebar-link">三大前提</a></li><li class="sidebar-sub-header level3"><a href="/pages/0fa05e/#转发流程" class="sidebar-link">转发流程</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/0fa05e/#网关-路由" class="sidebar-link">网关/路由</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/0fa05e/#分类、优先级" class="sidebar-link">分类、优先级</a></li><li class="sidebar-sub-header level3"><a href="/pages/0fa05e/#查看路由表信息" class="sidebar-link">查看路由表信息</a></li><li class="sidebar-sub-header level3"><a href="/pages/0fa05e/#添加-删除路由" class="sidebar-link">添加/删除路由</a></li><li class="sidebar-sub-header level3"><a href="/pages/0fa05e/#配置永久路由" class="sidebar-link">配置永久路由</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/0fa05e/#路由实验" class="sidebar-link">路由实验</a></li></ul></li><li><a href="/pages/fb22ed/" class="sidebar-link">shell基础</a></li><li><a href="/pages/d423cf/" class="sidebar-link">crond计划任务</a></li><li><a href="/pages/f264b1/" class="sidebar-link">系统优化</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>mysql</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>git</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据结构与算法</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-91157402><div class="articleInfo" data-v-91157402><ul class="breadcrumbs" data-v-91157402><li data-v-91157402><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-91157402></a></li> <li data-v-91157402><a href="/categories/?category=IT_Need" title="分类" data-v-91157402>IT_Need</a></li><li data-v-91157402><a href="/categories/?category=linux%E5%9F%BA%E7%A1%80" title="分类" data-v-91157402>linux基础</a></li></ul> <div class="info" data-v-91157402><div title="作者" class="author iconfont icon-touxiang" data-v-91157402><a href="https://github.com/OnePieceDC" target="_blank" title="作者" class="beLink" data-v-91157402>DC</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-91157402><a href="javascript:;" data-v-91157402>2022-10-08</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">网络管理<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h2 id="网卡名字修改"><a href="#网卡名字修改" class="header-anchor">#</a> 网卡名字修改</h2> <blockquote><p>以太网协议规定上网的机器必须有一块网卡, 俗成以太网卡</p></blockquote> <p>CentOS6及以前, 第一块、第二块网卡依次命名为 eth0、eth1... CentOS7网卡的命名为ens33..<br>
除此之外,都有一块命名为lo虚拟的本地回环网卡.. 数据包到网卡了,没有往交换机走,原路返回,自己发给自己.<br> <font color="gray">127.0.0.1 相当于一台计算机即当客户端也当服务端,用于保证软件本身的开发没问题,<strong>排除网络的因素</strong></font></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token string">&quot;&quot;</span>&quot;-- <span class="token number">1</span>.GRUB添加kernel参数 --<span class="token string">&quot;&quot;</span>&quot;
<span class="token function">vim</span> /etc/sysconfig/grub <span class="token comment"># -- GRUB_CMDLINE_LINUX=&quot;rhgb quiet 'net.ifnames=0 biosdevname=0'&quot;</span>

<span class="token string">&quot;&quot;</span>&quot;-- <span class="token number">2</span>.加载到引导分区 --<span class="token string">&quot;&quot;</span>&quot;
grub2-mkconfig <span class="token parameter variable">-o</span> /boot/grub2/grub.cfg

<span class="token string">&quot;&quot;</span>&quot;-- <span class="token number">3</span>.修改网卡配置文件名称以及配置文件里网卡的名称 --<span class="token string">&quot;&quot;</span>&quot;
<span class="token builtin class-name">cd</span> /etc/sysconfig/network-scripts/
<span class="token function">mv</span> ifcfg-ens33 ifcfg-eth0
<span class="token function">sed</span> <span class="token parameter variable">-i</span> <span class="token string">&quot;s#ens33#eth0#g&quot;</span> ifcfg-eth0 <span class="token comment"># -- 将ens33改为eth0</span>

<span class="token comment">## 注意哦,前三步没有先后顺序,怎么样都可以</span>

<span class="token string">&quot;&quot;</span>&quot;-- 重启系统生效 --<span class="token string">&quot;&quot;</span>&quot;
<span class="token function">reboot</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>关机为vm虚拟机添加一张NAT模式的网卡.. 添加后开机 可以发现第二块网卡的默认名字是eth1</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token string">&quot;&quot;</span>&quot;-- 临时激活网卡 --<span class="token string">&quot;&quot;</span>&quot;
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># ifconfig eth1 up</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># ifconfig | grep eth[01]</span>
eth0: <span class="token assign-left variable">flags</span><span class="token operator">=</span><span class="token number">416</span><span class="token operator"><span class="token file-descriptor important">3</span>&lt;</span>UP,BROADCAST,RUNNING,MULTICAST<span class="token operator">&gt;</span>  mtu <span class="token number">1500</span>
eth1: <span class="token assign-left variable">flags</span><span class="token operator">=</span><span class="token number">416</span><span class="token operator"><span class="token file-descriptor important">3</span>&lt;</span>UP,BROADCAST,RUNNING,MULTICAST<span class="token operator">&gt;</span>  mtu <span class="token number">1500</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><hr> <h2 id="网络相关的一些命令"><a href="#网络相关的一些命令" class="header-anchor">#</a> 网络相关的一些命令</h2> <h3 id="lspci"><a href="#lspci" class="header-anchor">#</a> lspci</h3> <blockquote><p>查看当前系统所连接的所有网卡</p></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment">#  lspci | grep -i eth</span>
<span class="token comment"># 可以看到,现目前有两块以太网协议的网卡</span>
02:01.0 Ethernet controller: Intel Corporation 82545EM Gigabit Ethernet Controller <span class="token punctuation">(</span>Copper<span class="token punctuation">)</span> <span class="token punctuation">(</span>rev 01<span class="token punctuation">)</span>
02:04.0 Ethernet controller: Intel Corporation 82545EM Gigabit Ethernet Controller <span class="token punctuation">(</span>Copper<span class="token punctuation">)</span> <span class="token punctuation">(</span>rev 01<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="mii-tool"><a href="#mii-tool" class="header-anchor">#</a> mii-tool</h3> <blockquote><p>检测网卡是否已经连接好网线</p></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># mii-tool eth1</span>
eth1: negotiated 1000baseT-FD flow-control, <span class="token function">link</span> ok <span class="token comment"># -- link ok代表该网卡是接了网线的</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="ping"><a href="#ping" class="header-anchor">#</a> ping</h3> <blockquote><p>用于测试两台主机网络是否连通</p></blockquote> <p><code>ping 目标IP地址</code><br> <code>ping -c 次数 目标IP地址</code></p> <p><strong>原理:</strong>  ping命令会基于ICMP协议(TCP/IP协议簇的一个子协议)给对方发送数据包,若对方回应,就代表连通了.</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token number">1</span> <span class="token operator">&gt;</span> /proc/sys/net/ipv4/icmp_echo_ignore_all
设置此命令后,其他任何主机都ping不同本机<span class="token punctuation">..</span> 通常会在整个集群架构的网络环境部署完成后进行该设置<span class="token punctuation">..</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><hr> <h2 id="ifconfig"><a href="#ifconfig" class="header-anchor">#</a> ifconfig</h2> <h3 id="基本选项"><a href="#基本选项" class="header-anchor">#</a> 基本选项</h3> <p><code>ifconfig</code>                         -- 查看已经激活的网卡信息<br> <code>ifconfig -a</code>                   -- 查看所有网卡信息(包括未激活的网卡)<br> <code>ifconfig eth0</code>                  -- 查看单个网卡信息</p> <p><code>ifconfig eth1 up</code>         -- <em>临时</em> 开启网卡<br> <code>ifconfig eth1 down</code>         -- 关闭网卡 <font color="gray">实验时,别关闭eth0网卡,xshll远程连接是通过该网卡连接的..</font></p> <p><code>ifconfig eth1 192.168.1.122 netmask 255.255.255.0</code>   or  <code>ifconfig eth1 192.168.1.122/24</code><br>
                                                -- <em>临时</em> 为网卡设定IP和掩码 (重启服务器失效)</p> <p><code>ifconfig eth0:1 192.168.0.2 netmask 255.255.255.0</code><br>
                                                -- <em>临时</em> 为网卡配置子接口<br> <code>ifconfig eth0:1 down</code>  or  <code>ifconfig eth0:1 del 192.168.0.2</code><br>
                                               -- 删除该子接口  <font color="gray">不必指定子网掩码</font></p> <p><font color="brown"><strong>注意哦!</strong></font>  通过ifconfig命令的配置都是 <strong>临时</strong> 配的!! 重启机器后就恢复如初了..<br> <font color="blue">若想永久配置,需要修改 <code>/etc/sysconfig/network-scripts</code> 路径下面的配置文件 </font></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment">## -- 若要使用ifconfig命令,需要安装 yum install net-tools -y</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># rpm -qf `which ifconfig`</span>
net-tools-2.0-0.25.20131004git.el7.x86_64

<span class="token string">&quot;&quot;</span>&quot;
eth0:1 此网卡是不存在的,是没有mac地址的,可叫做虚拟网卡
       相当于给eth0配了两个IP地址<span class="token punctuation">..</span> 但流量走的都是同一张网卡
真实环境下,若要给服务器配置两个IP地址,会使用两个网卡,两个网卡处于不同的网段并连接不同的交换机<span class="token punctuation">..</span>这样靠谱些.
<span class="token string">&quot;&quot;</span>&quot;
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># ifconfig eth0:1 192.168.0.2/24</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># ifconfig</span>
eth0: <span class="token assign-left variable">flags</span><span class="token operator">=</span><span class="token number">416</span><span class="token operator"><span class="token file-descriptor important">3</span>&lt;</span>UP,BROADCAST,RUNNING,MULTICAST<span class="token operator">&gt;</span>  mtu <span class="token number">1500</span>
        inet <span class="token number">172.16</span>.150.131  netmask <span class="token number">255.255</span>.255.0  broadcast <span class="token number">172.16</span>.150.255
				<span class="token punctuation">..</span>. <span class="token punctuation">..</span>. <span class="token punctuation">..</span>.
eth0:1: <span class="token assign-left variable">flags</span><span class="token operator">=</span><span class="token number">416</span><span class="token operator"><span class="token file-descriptor important">3</span>&lt;</span>UP,BROADCAST,RUNNING,MULTICAST<span class="token operator">&gt;</span>  mtu <span class="token number">1500</span>
        inet <span class="token number">192.168</span>.0.2  netmask <span class="token number">255.255</span>.255.0  broadcast <span class="token number">192.168</span>.0.255
        ether 00:0c:29:90:30:3e  txqueuelen <span class="token number">1000</span>  <span class="token punctuation">(</span>Ethernet<span class="token punctuation">)</span>
<span class="token punctuation">..</span>. <span class="token punctuation">..</span>. <span class="token punctuation">..</span>. 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="命令结果解析"><a href="#命令结果解析" class="header-anchor">#</a> 命令结果解析</h3> <p><code>ifconfig eth0</code></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token string">&quot;&quot;</span>&quot; 第一行
从flags标记可知该接口已启用,支持广播、组播. MTU最大传输单元:1500字节
flags参数:
    UP:表示“接口已启用”/网卡已经激活
    BROADCAST:表示该网卡支持广播,能收到广播包
    RUNNING:表示网卡已连接网线,该网线能正常工作
    MULTICAST:表示该网卡支持多播<span class="token punctuation">..</span> 
            多播/组播简单来说就是将多台机器放到一个组里,发包的时候,只有这个组里的机器能收到
		promisc:繁杂模式,简单来说,这台机器所有数据包都可以收到
		        我们知道局域网里广播的数据包,计算机收到后发现目标主机不是自己,会将这个包丢掉
		        若该计算机开启了繁杂模式,就不会将此广播包丢掉.抓包.
		        繁杂模式通常用于kali等渗透测试,安全方面的配置<span class="token punctuation">..</span>
		        感兴趣可以参考:https://www.cnblogs.com/linhaifeng/articles/13949611.html
						
<span class="token variable"><span class="token variable">`</span><span class="token function">ifconfig</span> eth0 promisc<span class="token variable">`</span></span>   <span class="token comment"># -- 开启繁杂模式</span>
<span class="token variable"><span class="token variable">`</span><span class="token function">ifconfig</span> eth0 <span class="token parameter variable">-promisc</span><span class="token variable">`</span></span>  <span class="token comment"># -- 关闭繁杂模式</span>
<span class="token string">&quot;&quot;</span>&quot;
eth0: <span class="token assign-left variable">flags</span><span class="token operator">=</span><span class="token number">416</span><span class="token operator"><span class="token file-descriptor important">3</span>&lt;</span>UP,BROADCAST,RUNNING,MULTICAST<span class="token operator">&gt;</span>  mtu <span class="token number">1500</span>
        <span class="token comment"># -- 网卡的IPv4地址、子网掩码、本网段的广播地址</span>
        inet <span class="token number">172.16</span>.150.131  netmask <span class="token number">255.255</span>.255.0  broadcast <span class="token number">172.16</span>.150.255
        <span class="token comment"># -- IPv6地址、掩码长度、作用域,link表示仅该接口有效    </span>
        inet6 fe80::20c:29ff:fe90:303e  prefixlen <span class="token number">64</span>  scopeid 0x2<span class="token operator"><span class="token file-descriptor important">0</span>&lt;</span>link<span class="token operator">&gt;</span>
        <span class="token comment"># -- 以太网卡的MAC地址、以太网卡最大传输队列长度,接口类型为Ethernet</span>
        ether 00:0c:29:90:30:3e  txqueuelen <span class="token number">1000</span>  <span class="token punctuation">(</span>Ethernet<span class="token punctuation">)</span>
        <span class="token string">&quot;&quot;</span>&quot; R接收 T发送<span class="token string">&quot;&quot;</span>&quot;
        <span class="token comment"># -- 从该主机开机那一刻到现在,此接口/网卡累积接收的报文个数,这些包总共有多大</span>
        RX packets <span class="token number">3942</span>  bytes <span class="token number">764610</span> <span class="token punctuation">(</span><span class="token number">746.6</span> KiB<span class="token punctuation">)</span>
        <span class="token comment"># -- 累积接收报文错误数、丢弃数、溢出数(很重要!!!)、冲突的帧数</span>
        RX errors <span class="token number">0</span>  dropped <span class="token number">0</span>  overruns <span class="token number">0</span>  frame <span class="token number">0</span>
        <span class="token comment"># -- 从该主机开机那一刻到现在,此接口/网卡累积发送的报文个数,总字节数</span>
        TX packets <span class="token number">842</span>  bytes <span class="token number">130860</span> <span class="token punctuation">(</span><span class="token number">127.7</span> KiB<span class="token punctuation">)</span>
        <span class="token comment"># -- 累积发送报文错误数、丢弃数、溢出数、载荷数(发生carrier错误而丢失的数据包数)、冲突数 </span>
        TX errors <span class="token number">0</span>  dropped <span class="token number">0</span> overruns <span class="token number">0</span>  carrier <span class="token number">0</span>  collisions <span class="token number">0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><hr> <h2 id="万兆网卡的mtu"><a href="#万兆网卡的mtu" class="header-anchor">#</a> 万兆网卡的MTU</h2> <blockquote><p>千兆  1000Mb/s  管理网络-- MTU: 1500	万兆 10000Mb/s  集群化作业 -- MTU: 9000</p></blockquote> <h3 id="千兆万兆区别"><a href="#千兆万兆区别" class="header-anchor">#</a> 千兆万兆区别</h3> <p>现目前我们用的网卡是双绞线接个水晶头连接的<strong>千兆网卡</strong>, <strong>主要用于管理网络</strong>; 保持MTU默认值1500kb就行..</p> <p>若涉及到集群化作业, 比如用集群做存储..  通常就需要用到<strong>万兆网卡</strong>..	MTU值应该设置为9000kb..<br>
万兆(10G)网卡需要搭配光纤模块、光纤、万兆交换机(几十万RMB,很贵)使用 Hhhh<br> <font color="gray">像阿里云提供给中小型公司的虚机就是构建在一套集群之上, vm之间的通信本来就比物理主机慢, 为了尽可能减少网络IO, 提高网络传输效率, 阿里云在硬件方面用的就是万兆网卡.... </font><br> <font color="gray" size="2">小声bibi,若是用真机做集群化架构,需要进行网卡绑定, 涉及到team技术、lacp协议等.. (集群相关的都是高阶知识,我暂且只会学基础,等我以后开发转运维,再捣腾捣腾, 哈哈哈哈哈)</font></p> <h3 id="永久配置"><a href="#永久配置" class="header-anchor">#</a> 永久配置</h3> <p><code>ifconfig eth0 mtu 9000</code>  临时配置MTU值,重启服务器就失效了.. 那如何永久配置呢？</p> <p><font color="blue"><strong>解决方案</strong>: 在 <code>/etc/rc.local</code>文件里添加 修改MTU值的命令...</font><br>
原理: /etc/rc.local文件在计算机开机的时候,它会自动运行, 所以一开机就需要运行的命令都可写到此文件里</p> <p><strong>注意:</strong> 记得执行命令 <code>chmod +x /etc/rc.d/rc.local</code></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment">## -- 可以看到/etc/rc.local的文件类型是l 代表软链接</span>
<span class="token comment">## -- 源文件是 /etc/rc.d/rc.local</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># ll /etc/rc.local</span>
lrwxrwxrwx. <span class="token number">1</span> root root <span class="token number">13</span> <span class="token number">6</span>月  <span class="token number">30</span> <span class="token number">23</span>:42 /etc/rc.local -<span class="token operator">&gt;</span> rc.d/rc.local

<span class="token comment">## -- /etc/rc.d/rc.local文件是没有可执行权限的 意味着除了root用户的其他用户都不能执行它</span>
<span class="token comment">## -- 所以需要赋予其他用户对此文件的可执行权限 chmod +x /etc/rc.d/rc.local</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># ll /etc/rc.d/rc.local</span>
-rw-r--r--. <span class="token number">1</span> root root <span class="token number">473</span> <span class="token number">1</span>月  <span class="token number">14</span> <span class="token number">2022</span> /etc/rc.d/rc.local
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># chmod +x /etc/rc.d/rc.local</span>

<span class="token comment">## 在里面添加内容,ifconfig eth0 mtu 9000</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># vim /etc/rc.local</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><hr> <h2 id="解决溢出数严重的问题"><a href="#解决溢出数严重的问题" class="header-anchor">#</a> 解决溢出数严重的问题</h2> <blockquote><p>ifconfig结果中第6行的 <font color="brown"><strong>overruns</strong></font> 溢出数是非常重要的指标!!!</p> <p><code>ethtool -g eth0</code><br> <code>ethtool -G eth0 rx 2048</code><br> <code>ethtool -G eth0 tx 2048</code></p></blockquote> <h3 id="储备知识"><a href="#储备知识" class="header-anchor">#</a> 储备知识</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span> 全｜半双工通信
   全双工是指交换机在发送数据的同时也能够接收数据,两者同步进行,
   这好比我们平时打电话一样,说话的同时也能够听到对方的声音<span class="token punctuation">..</span>. 半双工好比是对讲机<span class="token punctuation">..</span>.
   目前网卡一般都应该采用全双工模式,全双工的好处在于迟延小、冲突少、速度快.
<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span> 数据链路层三大功能之一差错监测: 循环冗余检验码CRC
   步骤关键字: 多项式 异或操作<span class="token punctuation">(</span>异为1 同为0<span class="token punctuation">)</span>
   假设有数据1101011011需要传输, 采用CRC的生成多项式为P<span class="token punctuation">(</span>X<span class="token punctuation">)</span><span class="token operator">=</span>X^4+X+1, 请计算添加了CRC校验码之后的数据.
   解: 多项式位串为 --<span class="token operator">&gt;</span> <span class="token number">10011</span>, 模二除法得到余数1110, 所以得到结果11010110111110
<span class="token operator"><span class="token file-descriptor important">3</span>&gt;</span> 网卡工作原理:
   先从OSI七层协议视角,回顾下发包:
      应用层产生一个数据,依次往下发,包装TCP/UDP的头 -- 数据段<span class="token punctuation">;</span>包装网络IP的头 -- 数据报<span class="token punctuation">;</span> 
      包装以太网的头 -- 数据帧frame<span class="token punctuation">;</span> 接着转成二进制位通过网线传输给对方.
   网卡发包:
      <span class="token number">1</span>. ip数据报+14个字节的mac头/以太网头变成数据帧frame
      <span class="token number">2</span>. frame被拷贝到网卡芯片内部的缓冲区,由网卡处理
      <span class="token number">3</span>. 网卡芯片为frame添加头部同步信息和CRC校验<span class="token punctuation">(</span>此时才是真正可以发送的包<span class="token punctuation">)</span>,然后发送该包
   网卡收包:
      <span class="token number">1</span>. 网络包到达网卡,网卡先检查数据包的CRC校验,保证其完整性和正确性,
         若不完整会丢弃<span class="token punctuation">(</span>丢弃不可怕,TCP协议会重新发包的<span class="token punctuation">)</span><span class="token punctuation">;</span>若完整会去掉它的头得到frame
      <span class="token number">2</span>. 网卡将frame拷贝到网卡内部的FIFO<span class="token punctuation">(</span>frist <span class="token keyword">in</span> frist out先进先出<span class="token punctuation">)</span>缓冲区
      <span class="token number">3</span>. 网卡驱动程序会产生硬件中断,提醒OS干活,OS产生软件中断,将frame从网卡拷贝到内存中
				 然后一层层的拆包
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="解决过程"><a href="#解决过程" class="header-anchor">#</a> 解决过程</h3> <p>正常情况, 网卡一边接收数据包放到网卡缓冲区中,OS一边从中取出数据包到内存中, 网卡缓冲区不会有溢出.<br>
若遇到高并发的情况,流量激增,网卡缓冲区满了,往网卡缓冲区里挤的网络包速度远大于OS取的速度...<br>
新的网络包进不了缓冲区,就会出现溢出.. overruns值升高..<br>
这会导致客户端就访问不进来了,用户等待时间较长,体验很差!!</p> <p><font color="purple"><strong>排除网络的干扰</strong></font></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token string">&quot;&quot;</span>&quot; step1:查看是否连接网线 <span class="token string">&quot;&quot;</span>&quot;
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># mii-tool eth0</span>
eth0: negotiated 1000baseT-FD flow-control, <span class="token function">link</span> ok
<span class="token string">&quot;&quot;</span>&quot; step2:查看工作模式是否正常 <span class="token string">&quot;&quot;</span>&quot;
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># ethtool eth0 | egrep 'Speed|Duplex'</span>
	Speed: 1000Mb/s		<span class="token comment">## -- 千兆网卡</span>
	Duplex: Full			<span class="token comment">## -- Full 代表全双工 half的话代表半双工</span>
<span class="token string">&quot;&quot;</span>&quot; step3:查看网卡与MTU是否匹配 <span class="token string">&quot;&quot;</span>&quot;
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># ifconfig eth0 | grep mtu</span>
eth0: <span class="token assign-left variable">flags</span><span class="token operator">=</span><span class="token number">416</span><span class="token operator"><span class="token file-descriptor important">3</span>&lt;</span>UP,BROADCAST,RUNNING,MULTICAST<span class="token operator">&gt;</span>  mtu <span class="token number">1500</span>
<span class="token string">&quot;&quot;</span>&quot; step4:查看CRC校验是否正常 <span class="token string">&quot;&quot;</span>&quot;
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># ethtool -S eth0 | grep crc </span>
     rx_crc_errors: <span class="token number">0</span>  <span class="token comment">## -- crc错误值大通常是因为服务器外部的网络环境有问题导致的</span>
     
Speed、Duplex、CRC之类的都没问题,基本可以排除物理层面的干扰
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><font color="purple"><strong>网络没问题, 那么问题就出现在服务器上了</strong></font></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>【监测overruns值】
    <span class="token keyword">while</span> <span class="token boolean">true</span><span class="token punctuation">;</span><span class="token keyword">do</span> <span class="token function">ifconfig</span> eth0 <span class="token operator">|</span> <span class="token function">grep</span> RX <span class="token operator">|</span> <span class="token function">grep</span> overruns<span class="token punctuation">;</span><span class="token function">sleep</span> <span class="token number">0.5</span><span class="token punctuation">;</span><span class="token function">clear</span><span class="token punctuation">;</span><span class="token keyword">done</span>
    监测的时候,某一时刻,overruns达到了上百,又降了下来<span class="token punctuation">(</span>TCP重新发包了<span class="token punctuation">)</span>,不用过于担心
    若值一直一直在增长,意味着在一直累积溢出的包,用户一直访问不进来,体验极差<span class="token punctuation">..</span>

解决方案:
    低配版 -- 单台服务器,调大缓冲区<span class="token punctuation">..</span>
             缓冲区最高4096,不够了咋整？一个网卡的性能有极限的,用多个网卡 -- 垂直扩展
    高配版 --加机子,集群化作业,多台机器抗压力,流量就被分散了. -- 水平扩展<span class="token operator">!</span><span class="token operator">!</span><span class="token operator">!</span>
    So<span class="token operator">!</span>开发不能鄙视运维,开发的软件再好,最多支持几千并发,但运维集群化作业能把软件的并发性能放大几十上百倍<span class="token punctuation">..</span>

<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># ethtool -g eth0   # -- 查看</span>
Ring parameters <span class="token keyword">for</span> eth0:
Pre-set maximums:
RX:		<span class="token number">4096</span>		<span class="token comment"># -- 接收的缓冲区大小</span>
RX Mini:	<span class="token number">0</span>
RX Jumbo:	<span class="token number">0</span>
TX:		<span class="token number">4096</span>		<span class="token comment"># -- 传输的缓冲区大小</span>
Current hardware settings: <span class="token comment"># -- 当前硬件的设置</span>
RX:		<span class="token number">256</span>
RX Mini:	<span class="token number">0</span>
RX Jumbo:	<span class="token number">0</span>
TX:		<span class="token number">256</span>

<span class="token function">ethtool</span> <span class="token parameter variable">-G</span> eth0 rx <span class="token number">2048</span>  <span class="token comment"># 设置调大</span>
<span class="token function">ethtool</span> <span class="token parameter variable">-G</span> eth0 tx <span class="token number">2048</span>  <span class="token comment"># 设置调大</span>
Ps:还可以想着将网卡降速<span class="token punctuation">..</span>这想法挺奇怪的Hhhh
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><hr> <h2 id="网卡相关配置文件"><a href="#网卡相关配置文件" class="header-anchor">#</a> 网卡相关配置文件</h2> <h3 id="解析-ifcfg-eth0文件"><a href="#解析-ifcfg-eth0文件" class="header-anchor">#</a> 解析 ifcfg-eth0文件</h3> <blockquote><p>vim /etc/sysconfig/network-scripts/ifcfg-eth0</p></blockquote> <p><code>systemctl restart network</code>  重启网络服务会去加载这些配置文件</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>▲ 必要字段
<span class="token string">&quot;&quot;</span>&quot;
BOOTPROTO若设置为dchp,表明动态获取IP地址,在租约时间内IP地址不会变<span class="token punctuation">..</span>到期了后重新分配IP<span class="token punctuation">..</span>
IPADDR、NETMASK、GATEWAY、DNS1、DNS2这几个字段只有在BOOTPROTO的值为static或none时才会生效<span class="token punctuation">..</span>
IPADDR、NETMASK保证了局域网里的通信,GATEWAY、DNS1、DNS2保证了与外网的通信.
    IPADDR的配置要注意,vm网卡若用的桥接模式要防止占用其他设备的IP,若用的NAT模式没关系.
    DNS的地址最多配置3个,配置后会写入/etc/resolv.conf文件中
    GATEWAY的值可以通过<span class="token variable"><span class="token variable">`</span>route <span class="token parameter variable">-n</span><span class="token variable">`</span></span>命令查看路由器上配置的网关地址<span class="token punctuation">;</span>
企业里通常是集群化作业,so,BOOTPROTO的值都会是static<span class="token operator">!</span><span class="token operator">!</span><span class="token operator">!</span><span class="token operator">!</span><span class="token operator">!</span><span class="token operator">!</span>
Ps:可以先DHCP动态获取IP,然后在静态配置时,去查看/etc/resolv.conf文件里面已设置的DNS<span class="token punctuation">(</span>nameserver字段的值<span class="token punctuation">)</span>	 通常是8.8.8.8 和 网关的地址

NM_CONTROLLED可以不添加,前提是执行命令
   systemctl stop NetworkManger	systemctl disable NetworkManger
<span class="token string">&quot;&quot;</span>&quot;
<span class="token assign-left variable">TYPE</span><span class="token operator">=</span><span class="token string">&quot;Ethernet&quot;</span>             <span class="token comment">## -- Ethernet类型表明是以太网卡！</span>
<span class="token assign-left variable">BOOTPROTO</span><span class="token operator">=</span><span class="token string">&quot;static&quot;</span>          <span class="token comment">## -- none 或者 static 都可以手动指定静态IP</span>
IPADDR <span class="token operator">=</span> <span class="token number">192.168</span>.0.100      <span class="token comment">## -- IP地址</span>
NETMASK <span class="token operator">=</span> <span class="token number">255.255</span>.255.0     <span class="token comment">## -- IP掩码地址</span>
GATEWAY <span class="token operator">=</span> <span class="token number">192.168</span>.0.254     <span class="token comment">## -- 网关地址</span>
DNS1 <span class="token operator">=</span> <span class="token number">192.168</span>.0.254        <span class="token comment">## -- 第一个DNS地址</span>
DNS2 <span class="token operator">=</span> <span class="token number">8.8</span>.8.8              <span class="token comment">## -- 第二个DNS地址</span>
<span class="token assign-left variable">NAME</span><span class="token operator">=</span><span class="token string">&quot;eth0&quot;</span>                 <span class="token comment">## -- 名字</span>
<span class="token assign-left variable">DEVICE</span><span class="token operator">=</span><span class="token string">&quot;eth0&quot;</span>               <span class="token comment">## -- 设备名</span>
<span class="token assign-left variable">ONBOOT</span><span class="token operator">=</span><span class="token string">&quot;yes&quot;</span>                <span class="token comment">## -- 代表网卡是否跟着NETWORK网络服务的启动而激活</span>
<span class="token assign-left variable">NM_CONTROLLED</span><span class="token operator">=</span><span class="token string">&quot;no&quot;</span>          <span class="token comment">## -- 表明网卡不受NetworkManager服务的影响</span>



▲ 其他不必要字段
<span class="token comment">## -- 配置网卡路由文件的时候需要进行此字段的设置 表示DHCP的路由配置不生效!!</span>
DEFROUTE <span class="token operator">=</span> <span class="token string">&quot;no&quot;</span>
<span class="token comment">## -- 配置网卡路由文件的时候需要进行此字段的设置 值为no表示DHCP设置的路由允许被覆盖!!</span>
PEERROUTES <span class="token operator">=</span> <span class="token string">&quot;no&quot;</span>
<span class="token comment">## -- 网卡的MAC地址信息,centos7里没有,centos6里有</span>
<span class="token assign-left variable">HWADDR</span><span class="token operator">=</span><span class="token number">14</span>:da:e9:eb:a9:61  
<span class="token comment">## -- 是否允许普通用户启动或者停止该网卡</span>
<span class="token assign-left variable">USERCTL</span><span class="token operator">=</span>no
<span class="token comment">## -- 是否在该网卡上启动IPV6的功能</span>
<span class="token assign-left variable">IPV6INIT</span><span class="token operator">=</span>no 　　　　　　　
<span class="token comment">## --是否允许网卡在启动时向DHCP服务器查询DNS信息,该字段了解即可</span>
    <span class="token comment"># 设置为yes时,此文件设置的DNS将覆盖/etc/resolv.conf</span>
    <span class="token comment"># BOOTPROTO若设置为dchp(配置文件中的DNS1是不生效的),则默认为yes,dhcp的dns会覆盖/etc/resolv.conf</span>
<span class="token assign-left variable">PEERDNS</span><span class="token operator">=</span>yes 　　　　　　　　 		
<span class="token comment">## -- 若冲突,可以直接删除</span>
<span class="token assign-left variable">UUID</span><span class="token operator">=</span><span class="token string">&quot;3919d7da-ef03-40a0-814e-d78c047e1f87&quot;</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br></div></div><h3 id="配置ifcfg-eth1文件"><a href="#配置ifcfg-eth1文件" class="header-anchor">#</a> 配置ifcfg-eth1文件</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># -- 可以发现只有网卡eth0的配置文件,虽然新增了eth1网卡,但系统并没有自动为它生成配置文件,所以eth1是临时的</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># ls /etc/sysconfig/network-scripts | grep ifcfg-eth</span>
ifcfg-eth0

<span class="token builtin class-name">cd</span> /etc/sysconfig/network-scripts/
<span class="token function">cp</span> ifcfg-eth0 ifcfg-eth1
<span class="token function">vim</span> ifcfg-eth1

<span class="token string">&quot;&quot;</span>&quot;
若不想通过172.16.150.100这个IP地址访问外网就没必要指定GATEWAY网关等字段信息
真正的生产环境里,也不会给每块网卡配置网关,一块网卡配置了就行了
So,我们可以将eth0网卡用于外网通信,eth1网卡用于内网通信<span class="token punctuation">..</span>.
<span class="token string">&quot;&quot;</span>&quot;
<span class="token assign-left variable">TYPE</span><span class="token operator">=</span><span class="token string">&quot;Ethernet&quot;</span>
<span class="token assign-left variable">BOOTPROTO</span><span class="token operator">=</span><span class="token string">&quot;static&quot;</span>
IPADDR <span class="token operator">=</span> <span class="token number">172.16</span>.150.100
NETMASK <span class="token operator">=</span> <span class="token number">255.255</span>.255.0
<span class="token comment">#GATEWAY = 172.16.150.2</span>
<span class="token comment">#DNS1 = 172.16.150.2 </span>
<span class="token comment">#DNS2 = 8.8.8.8</span>
<span class="token assign-left variable">NAME</span><span class="token operator">=</span><span class="token string">&quot;eth1&quot;</span>	
<span class="token assign-left variable">DEVICE</span><span class="token operator">=</span><span class="token string">&quot;eth1&quot;</span>	
<span class="token assign-left variable">ONBOOT</span><span class="token operator">=</span><span class="token string">&quot;yes&quot;</span>
<span class="token assign-left variable">NM_CONTROLLED</span><span class="token operator">=</span><span class="token string">&quot;no&quot;</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><hr> <h2 id="dns相关配置文件"><a href="#dns相关配置文件" class="header-anchor">#</a> DNS相关配置文件</h2> <p><code>/etc/resolv.conf</code>       DNS解析文件, 可设置DNS指向,最多3个<br> <code>/etc/hosts</code>                     本地名称解析文件,  <font color="blue"><strong>优先于DNS解析文件</strong></font></p> <p><font color="brown">DNS查询顺序 </font><br>
     浏览器DNS缓存 --&gt; 本地系统DNS缓存 --&gt; 本地计算机HOSTS文件 --&gt; ISP DNS缓存 --&gt; 递归or迭代搜索</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>▲ 一个小实验,修改配置文件/etc/hosts 在末尾添加1.1.1.1 www.baidu.com
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># ping www.baidu.com</span>
PING www.a.shifen.com <span class="token punctuation">(</span><span class="token number">14.215</span>.177.39<span class="token punctuation">)</span> <span class="token number">56</span><span class="token punctuation">(</span><span class="token number">84</span><span class="token punctuation">)</span> bytes of data.
<span class="token punctuation">..</span>. <span class="token punctuation">..</span>.
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># ping www.baidu.com</span>
PING www.baidu.com <span class="token punctuation">(</span><span class="token number">1.1</span>.1.1<span class="token punctuation">)</span> <span class="token number">56</span><span class="token punctuation">(</span><span class="token number">84</span><span class="token punctuation">)</span> bytes of data.  <span class="token comment"># -- 百度域名被解析成了1.1.1.1</span>
<span class="token punctuation">..</span>. <span class="token punctuation">..</span>.

某公司用A B C D E<span class="token punctuation">..</span>HI<span class="token punctuation">..</span>等20台机器搭建了一个集群<span class="token operator">!</span><span class="token operator">!</span> A要跟其它机器通信,需要知道目标主机的IP地址<span class="token punctuation">..</span>
并且在相应的配置文件中配置目标主机的IP<span class="token punctuation">..</span>
这样做不好,一方面IP地址难记<span class="token punctuation">;</span>另一方面主机的IP地址日后可能会变<span class="token punctuation">..</span>一变,20台主机重新修改配置文件很麻烦<span class="token punctuation">..</span>


最规范的做法:
    在公司内部自己搭建个DNS服务<span class="token punctuation">;</span>会先给这20台机器每台机器起个名字,也就是域名,每个域名对应一个IP地址记录在DNS服务器中<span class="token punctuation">..</span><span class="token variable"><span class="token variable">`</span>hostnamectl set-hostname egon.xxx.com<span class="token variable">`</span></span>永久设置主机名.
    这样一来,配置文件中只需要使用域名即可,当A主机与集群中其他机器通信时,会去自己搭建的DNS服务器上查一查对应的域名解析<span class="token punctuation">..</span> 当某个主机的IP地址变了,集群中20级台机器的配置文件都不需要动,改DNS服务器上的某条解析记录即可<span class="token punctuation">..</span>
因为是内部搭建的DNS服务器,域名还不用注册<span class="token punctuation">..</span> 也便于集群中增加主机时的操作<span class="token punctuation">..</span>
    搭建个DNS服务不仅可以增加可扩展性,DNS服务器还可以做负载均衡等<span class="token punctuation">..</span>

偷懒的做法:
    不搭建DNS服务,在一台机器上将20台机器的解析记录写入/etc/hosts文件,再给每台机器都发送一份,但意味着每次改动,每台机器都要同步一下<span class="token punctuation">..</span><span class="token punctuation">(</span>有一些自动化管理工具,改动以后可自动批量的每台机器都传一份<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><hr> <h2 id="etc-services"><a href="#etc-services" class="header-anchor">#</a> /etc/services</h2> <blockquote><p>记录了每一个软件跟它对应的端口号以及协议</p></blockquote> <p>常见的服务端对应的端口号</p> <table><thead><tr><th>服务端</th> <th>端口号</th></tr></thead> <tbody><tr><td>dhcp</td> <td>67</td></tr> <tr><td>dns</td> <td>53</td></tr> <tr><td>mysql</td> <td>3306</td></tr> <tr><td>ssh</td> <td>22</td></tr></tbody></table> <div class="language-python line-numbers-mode"><pre class="language-python"><code>grep <span class="token string">'^ftp\|^ssh'</span> <span class="token operator">/</span>etc<span class="token operator">/</span>services 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><hr> <h2 id="交换与路由"><a href="#交换与路由" class="header-anchor">#</a> 交换与路由</h2> <p><strong>交换:</strong> 指同网络访问.<br>
        多台主机处于同一个LAN/交换机/局域网中,配置同网段的不同ip就可以直接通信,二层网络本质是基于mac地址的通信,不需要进行转发,这里默认交换机未划分过vlan(<font color="gray">即不讨论三层交换</font>)..</p> <p><strong>路由:</strong> 指跨网络访问的路径选择.<br>
        若要与外网通信,就需要转发/路由.. 路由器上配置的有网关.. <strong>网关有个特点, 至少得有两个地址, 对内得有一个局域网地址, 对外得有一个外网地址..</strong></p> <hr> <h2 id="linux主机充当路由"><a href="#linux主机充当路由" class="header-anchor">#</a> Linux主机充当路由</h2> <h3 id="三大前提"><a href="#三大前提" class="header-anchor">#</a> 三大前提</h3> <p>将一台linux主机A当作路由的<font color="brown">三大前提</font>:<br>
1&gt; 主机A至少得有两块网卡分别连接不同的网段;<br>
     (A主机连接的不同网段里的主机都必须将网关指向主机A)<br>
2&gt; 主机A开启路由转发功能(默认是关闭的); <code>echo 1 &gt; /proc/sys/net/ipv4/ip_forward</code> 临时打开.<br>
3&gt; 在该linux主机上添加正确的路由规则/策略..</p> <h3 id="转发流程"><a href="#转发流程" class="header-anchor">#</a> 转发流程</h3> <p>A主机的linux OS左手网卡1,右手网卡2,连接两个不同的网段..(B主机处于网段1,C主机处于网段2)<br>
B、C处于不同网段,是不能直接通信的, A可以作为BC之间互通的桥梁..  <font color="gray">B &lt;==&gt; A &lt;==&gt; C</font></p> <p>主机B发送了个数据包,会从网卡1进来的, A主机的linux内核会先判断此包是不是给本机的, 不是的话就正常的丢掉..</p> <p>若是给本机的:	<br>
     情况1: 该数据包就是明确的给本机上层的应用程序的;<br> <font color="blue"> 数据包流向: 网卡1 - 操作系统(A主机的 <em>内核空间</em> ) - 应用程序(A主机的 <em>用户空间</em>) </font><br>
                情况1&gt; 应用程序处理完数据包就结束了,不需要返回数据包;<br>
                情况2&gt; 应用程序处理完数据包产生了新的结果,新的数据包从A的用户空间丢到了A的内核空间..<br>
                                内核再判断新的数据包从哪个网卡发出去...<br>
                                新数据包的目标主机是C就从网卡2出去;是B就从网卡1原路返回...<br>
     情况2: 将本机的OS Linux当作路由器使用,数据包不会进入A主机的用户空间,数据包会从网卡2出去,转发给C;</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># -- 可以看到 linux主机的路由转发功能默认是关闭的 0关闭 1开启</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># cat /proc/sys/net/ipv4/ip_forward</span>
<span class="token number">0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><hr> <h2 id="网关-路由"><a href="#网关-路由" class="header-anchor">#</a> 网关/路由</h2> <blockquote><p><strong>route命令</strong></p></blockquote> <h3 id="分类、优先级"><a href="#分类、优先级" class="header-anchor">#</a> 分类、优先级</h3> <p>Linux上的路由分为3种:<br>
     1&gt; <strong>主机路由</strong>: 明确指定了到达某台主机应该怎么走.. 主机路由也叫做静态路由 <font color="gray">掩码位32位 </font><br>
     2&gt; <strong>网络路由</strong>: 指明到某类网络怎么走, 精确到了某个网段.. <font color="gray">掩码位小于32位</font><br>
     3&gt; <strong>默认路由</strong>: 不走主机路由的和网络路由的, 全部都走默认路由.  <font color="gray">掩码全为0 </font><br>
                        操作系统上设置的默认路由一般称为网关..</p> <p><font color="gray"><strong>回顾下,</strong> 子网掩码与IP地址做与运算可以算出网络地址(同1为1,否则为0).. 一个B类的IP地址,子网掩码至少是8位,IP地址的网络位向主机位借位(借的叫做子网位)来划分子网..</font><br>
子网掩码越短意味着划分的子网数越少, 每个子网的范围(每个子网中的主机个数)就越大; 反之则相反!!!</p> <p><font color="brown"><strong>优先级:(根据精确度判断的)</strong> 主机路由 &gt; 网络路由 &gt; 默认路由 </font><br> <font color="gray">若路由条目的掩码长度相同, 则比较节点之间的管理距离(比如metric), 管理距离短的生效</font></p> <p>举个栗子, <code>1.1.1.10/32</code> 32位的掩码意味着IP地址的前32位都是网络号,没有剩下主机位,不能借位,该IP也就不能划分任何的子网.. 1.1.1.10网段没有任何其他机器... 只有它自己.. 精确到了一台机器!!!</p> <hr> <h3 id="查看路由表信息"><a href="#查看路由表信息" class="header-anchor">#</a> 查看路由表信息</h3> <blockquote><p><code>route -n</code>  	-n选项表示不解析主机名</p></blockquote> <p>Destination: 去往目标,目的地<br>
        0.0.0.0/0 代表所有的IP地址都是目的地<br>
Gateway: 下一跳(下一步交给谁做转发)<br>
        0.0.0.0表明没有下一跳,通过Iface指定的网卡往局域网里一丢.<br>
谁收到算谁的,收到的那台主机不会将该数据包做下一跳的转发.<br>
        172.16.150.2 指定了网关IP 表明网关会安排下一跳<br>
        169.254.0.0   是保留网关<br>
Genmask: 子网掩码<br>
Flags: 标志位<br>
        U 此路由规则正在生效<br>
        G 网关<br>
        H 主机路由<br>
Metric: 总共经历多少跳<br>
Iface: 从哪个网卡出去</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment">## -- 这些信息是从DHCP里获取到的,若不想要DHCP的,想自己配置的生效,则需要修改配置文件！</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># route -n</span>
Kernel IP routing table <span class="token comment"># -- 内核IP路由表</span>
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
<span class="token number">0.0</span>.0.0         <span class="token number">172.16</span>.150.2    <span class="token number">0.0</span>.0.0         UG    <span class="token number">0</span>      <span class="token number">0</span>        <span class="token number">0</span> eth0
<span class="token number">169.254</span>.0.0     <span class="token number">0.0</span>.0.0         <span class="token number">255.255</span>.0.0     U     <span class="token number">1002</span>   <span class="token number">0</span>        <span class="token number">0</span> eth0 <span class="token comment"># --保留网关,了解</span>
<span class="token number">172.16</span>.150.0    <span class="token number">0.0</span>.0.0         <span class="token number">255.255</span>.255.0   U     <span class="token number">0</span>      <span class="token number">0</span>        <span class="token number">0</span> eth0
<span class="token number">192.168</span>.122.0   <span class="token number">0.0</span>.0.0         <span class="token number">255.255</span>.255.0   U     <span class="token number">0</span>      <span class="token number">0</span>        <span class="token number">0</span> virbr0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><hr> <h3 id="添加-删除路由"><a href="#添加-删除路由" class="header-anchor">#</a> 添加/删除路由</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>eth0网卡 -- inet <span class="token number">172.16</span>.150.131  netmask <span class="token number">255.255</span>.255.0
系统会默认添加一条网络路由<span class="token operator">!</span><span class="token operator">!</span><span class="token operator">!</span> <span class="token variable"><span class="token variable">`</span>route <span class="token function">add</span> <span class="token parameter variable">-net</span> <span class="token number">192.168</span>.0.0/24 dev eth0<span class="token variable">`</span></span>

为何只要添加一个ip地址,就会默认增加一个该ip地址的网段路由？
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>1&gt; <strong>添加/删除主机路由,精确到一个IP地址</strong></p> <p><code>route add -host 1.1.1.10/32 dev eth0</code>                      --  不需要转发则指定dev<br> <code>route add -host 1.1.1.11/32 gw 172.16.150.2</code>           --  若需要转发,指定gw
<code>route del -host 1.1.1.10/32</code></p> <p>2&gt; <strong>添加/删除网络路由</strong></p> <p><code>route add -net 2.2.2.0/24 dev eth0</code><br> <code>route del -net 2.2.2.0/24</code></p> <p>3&gt; <strong>删除/添加默认路由</strong></p> <p><code>route del default</code><br> <code>route add -net 0.0.0.0/0 gw 172.16.150.2</code> 或者 <code>route add default gw 172.16.150.2</code></p> <p><font color="blue">systemctl restart network 重启网络配置后, 上述的设置失效</font></p> <hr> <h3 id="配置永久路由"><a href="#配置永久路由" class="header-anchor">#</a> 配置永久路由</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">vim</span> /etc/syconfig/network-scripts/route-eth0

注意:
    <span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span> 新增一个路由配置文件,前提需要一个相对应的名为ifcfg-eth0的网卡配置文件 
       名字要对应上哦<span class="token operator">!</span> route-ethX, 要从哪个接口出去X就是几
    <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span> 在文件中配置永久默认路由, 则必须保证所有使用了DHCP服务的网卡配置文件ifcfg-ethX中的
		   DEFROUTE指令设置为<span class="token string">&quot;no&quot;</span>,表明DHCP的路由配置不生效<span class="token punctuation">;</span>
		   PEERROUTES指令设置为<span class="token string">&quot;no&quot;</span>,表示DHCP设置的路由允许被覆盖.

配置规则:每一行一个路由条目, 先是要到达的目标, 然后是via关键字,最后是下一跳地址.
       要求下一跳必须能到达,且一般都和ethX同网段<span class="token punctuation">..</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>例如eth0网卡的IP地址是192.168.10.123,,要通过网卡eth0出去到达10.0.0.10,,<strong>那么下一跳的地址要和eth0的地址在同网段</strong>..如192.168.10.222 ...<br> <font color="purple">看计算机网络之网络层.md 中 网络层整个流程 这部分的内容, 注意图中的路由器1的IP 192.168.100.4 和路由器2的IP 192.168.100.5 !!</font></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># -- 默认路由</span>
default     via <span class="token number">192.168</span>.100.1 dev eth0
<span class="token number">0.0</span>.0.0/0   via <span class="token number">192.168</span>.100.1 dev eth0

<span class="token comment"># -- 网段路由</span>
<span class="token number">192.168</span>.10.0/24   via <span class="token number">192.168</span>.100.1 dev eth0

<span class="token comment"># -- 主机路由,在centos7中 dev得指定</span>
<span class="token number">192.168</span>.100.52/32 via <span class="token number">192.168</span>.100.33 dev eth0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>配置完后, 重启network服务即可立即生效...</p> <hr> <h2 id="路由实验"><a href="#路由实验" class="header-anchor">#</a> 路由实验</h2> <p><img src="/assets/img/14.261f4596.jpeg" alt=""></p> <p>略.. 实验详见<code>https://zhuanlan.zhihu.com/p/337256553</code></p> <p><font color="gray">让我偷偷懒,主要是开发真就用不到... 路由的配置又很繁琐.. 有点累, 理论方面是整理规整了的！！！ </font></p> <hr></div></div> <!----> <div class="page-edit"><!----> <!----> <!----></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/0d43c6/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">存储管理之LVM</div></a> <a href="/pages/fb22ed/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">shell基础</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/0d43c6/" class="prev">存储管理之LVM</a></span> <span class="next"><a href="/pages/fb22ed/">shell基础</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/8sk2b3/"><div>
            搜索相关
            <!----></div></a> <span class="date">03-22</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/2kn2p2/"><div>
            CURD
            <!----></div></a> <span class="date">03-20</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/1kn1m1/"><div>
            自动生成
            <!----></div></a> <span class="date">03-15</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="https://github.com/OnePieceDC" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://www.cnblogs.com/DC0307/" title="博客园" target="_blank" class="iconfont icon-bokeyuan"></a><a href="https://music.163.com/#/song?id=1854188649" title="听音乐" target="_blank" class="iconfont icon-erji"></a><a href="https://www.jianshu.com/u/5310eb537315" title="简书" target="_blank" class="iconfont icon-jianshu"></a><a href="mailto:1415806497@qq.com" title="QQ" target="_blank" class="iconfont icon-youjian"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2023-2024
    <span>DC | One Piece</span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <div class="body-bg" style="background:url() center center / cover no-repeat;opacity:0.5;"></div> <!----> <!----></div><div class="global-ui"><!----><div id="goTop" class="hide-cat" data-v-8ccb5928></div><div></div><canvas id="vuepress-canvas-cursor"></canvas><div></div><div></div></div></div>
    <script src="/assets/js/app.ac54adc6.js" defer></script><script src="/assets/js/4.7ddc74e3.js" defer></script><script src="/assets/js/1.a0c4ff1b.js" defer></script><script src="/assets/js/3.8b03321d.js" defer></script><script src="/assets/js/166.c1b4c4d4.js" defer></script><script src="/assets/js/104.cae2d944.js" defer></script><script src="/assets/js/184.46eabf07.js" defer></script>
  </body>
</html>
