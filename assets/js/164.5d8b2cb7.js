(window.webpackJsonp=window.webpackJsonp||[]).push([[164],{1202:function(s,t,a){"use strict";a.r(t);var n=a(0),r=Object(n.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"文件详细信息"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#文件详细信息"}},[s._v("#")]),s._v(" 文件详细信息")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll 1.txt")]),s._v("\n-rw-r--r-- "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("月  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":56 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".txt\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[n("img",{attrs:{src:a(494),alt:""}})]),s._v(" "),n("p",[n("font",{attrs:{color:"gray"}},[s._v("Ps: root用户可不受权限压制, 并没有说root组不受权限压制!")])],1),s._v(" "),n("hr"),s._v(" "),n("h2",{attrs:{id:"基本权限"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#基本权限"}},[s._v("#")]),s._v(" 基本权限")]),s._v(" "),n("h3",{attrs:{id:"权限的类型"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#权限的类型"}},[s._v("#")]),s._v(" 权限的类型")]),s._v(" "),n("table",[n("thead",[n("tr",[n("th",[s._v("字符")]),s._v(" "),n("th",[s._v("含义")]),s._v(" "),n("th",[s._v("关联数字")])])]),s._v(" "),n("tbody",[n("tr",[n("td",[s._v("r")]),s._v(" "),n("td",[s._v("可读")]),s._v(" "),n("td",[s._v("4")])]),s._v(" "),n("tr",[n("td",[s._v("w")]),s._v(" "),n("td",[s._v("可写")]),s._v(" "),n("td",[s._v("2")])]),s._v(" "),n("tr",[n("td",[s._v("x")]),s._v(" "),n("td",[s._v("可执行")]),s._v(" "),n("td",[s._v("1")])])])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("权限是与ugo相对应的,即权限要与ugo相关联才有意义\n\n以 -rw-r--r--. 为例\n第一位对应文件的类型,接下来9位3位为一组分别对应u、g、o.\n若最后还有个点,表示此文件是在SElinux已加载状态下"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("非disabled"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("创建,此文件受SElinux的管制\n文件类型：\n    -: 文本文档\n    d: 目录\n    b: 设备block\n    c: 字符设备\n    s: 套接字文件\n    l: 软链接\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("h3",{attrs:{id:"权限的归属"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#权限的归属"}},[s._v("#")]),s._v(" 权限的归属")]),s._v(" "),n("table",[n("thead",[n("tr",[n("th",[s._v("字符")]),s._v(" "),n("th",[s._v("含义")])])]),s._v(" "),n("tbody",[n("tr",[n("td",[s._v("u")]),s._v(" "),n("td",[s._v("属主")])]),s._v(" "),n("tr",[n("td",[s._v("g")]),s._v(" "),n("td",[s._v("属组")])]),s._v(" "),n("tr",[n("td",[s._v("o")]),s._v(" "),n("td",[s._v("其它人")])])])]),s._v(" "),n("hr"),s._v(" "),n("h2",{attrs:{id:"设置权限"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#设置权限"}},[s._v("#")]),s._v(" 设置权限")]),s._v(" "),n("blockquote",[n("p",[n("strong",[s._v("chmod")]),s._v("   设置权限的类型"),n("br"),s._v(" "),n("strong",[s._v("chown")]),s._v("\t设置权限的归属 即用户和组")])]),s._v(" "),n("h3",{attrs:{id:"chmod"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#chmod"}},[s._v("#")]),s._v(" chmod")]),s._v(" "),n("p",[s._v("有三种方式修改文件权限的类型:  "),n("font",{attrs:{color:"gray"}},[s._v("eg: r-- rw- r-- 变为 rwx r-x rw-")]),n("br"),s._v("\n1> "),n("strong",[s._v("加减法")]),s._v(" "),n("font",{attrs:{color:"gray"}},[s._v("在原来的基础上增增减减")]),n("br"),s._v(" "),n("code",[s._v("chmod u+wx,g-w+x,o+w 1.txt")]),n("br"),s._v("\n2> "),n("strong",[s._v("赋值")]),s._v(" "),n("font",{attrs:{color:"gray"}},[s._v("不管原来是什么,直接覆盖")]),n("br"),s._v(" "),n("code",[s._v("chmod u=rwx,g=rx,o=rw 1.txt")]),n("br"),s._v("\n     若相同可简写 eg: "),n("code",[s._v("chmod ug=rx,o=rw 1.txt")]),n("br"),s._v("\n3> "),n("strong",[s._v("数字")]),s._v(" "),n("font",{attrs:{color:"gray"}},[s._v("必须是3位数")]),n("br"),s._v(" "),n("code",[s._v("chmod 756 1.txt")]),s._v("      4+2+1,4+1,4+2")],1),s._v(" "),n("p",[n("code",[s._v("chmod a=- test/a.txt")]),s._v(" "),n("strong",[s._v("a代表ugo")]),s._v(" ---------")]),s._v(" "),n("p",[n("font",{attrs:{color:"brown"}},[s._v("-R选项")]),s._v(" 意味着递归修改,主要针对目录文件(文件夹)的  并不会影响后续新建的")],1),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mkdir -p a/b/c")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# touch a/b/c/d.txt")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll -d a")]),s._v("\ndrwxr-xr-x "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" root root "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("月  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("28")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":41 a\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll -d a/b")]),s._v("\ndrwxr-xr-x "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" root root "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("月  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("28")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":41 a/b\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll -d a/b/c")]),s._v("\ndrwxr-xr-x "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("月  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("28")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":42 a/b/c\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll a/b/c/d.txt ")]),s._v("\n-rw-r--r-- "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("月  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("28")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":42 a/b/c/d.txt\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# chmod -R 777 a")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# chmod -R 777 a")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll -d a")]),s._v("\ndrwxrwxrwx "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" root root "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("月  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("28")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":41 a\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll -d a/b")]),s._v("\ndrwxrwxrwx "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" root root "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("月  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("28")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":41 a/b\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll -d a/b/c")]),s._v("\ndrwxrwxrwx "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("月  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("28")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":42 a/b/c\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll a/b/c/d.txt ")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-rwxrwxrwx")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("月  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("28")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":42 a/b/c/d.txt\n\n"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n通常啥时候用呢？下载某一软件部署在主机上,批量修改软件下所有文件的权限.\n'),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br")])]),n("p",[n("font",{attrs:{color:"gray"}},[s._v("Ps: 将文件权限置空. "),n("code",[s._v("chmod000file.txt")]),s._v("; "),n("code",[s._v("chmod u=-,g=-,o=- a/b/c/d.txt")]),s._v("(chmod ugo=rwx a/b/c/d.txt)")])],1),s._v(" "),n("h3",{attrs:{id:"chown"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#chown"}},[s._v("#")]),s._v(" chown")]),s._v(" "),n("p",[n("code",[s._v("chown dc.devops a.txt")]),s._v("      --      修改属主,属组"),n("br"),s._v(" "),n("code",[s._v("chown dc a.txt")]),s._v("      --      只修改属主"),n("br"),s._v(" "),n("code",[s._v("chown .devops a.txt")]),s._v("      --      只修改属组"),n("br"),s._v(" "),n("code",[s._v("chown dc. a.txt")]),s._v("      --      属主和属组会一样, 等同于"),n("code",[s._v("chown dc.dc a.txt")])]),s._v(" "),n("p",[n("font",{attrs:{color:"brown"}},[s._v("-R选项")]),s._v(" 意味着递归修改,主要针对目录文件(文件夹)的\t并不会影响后续新建的")],1),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# chown -R dc.dc a")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll -d a ")]),s._v("\ndrwxrwxrwx "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("dc")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("dc")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("月  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("28")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":41 a\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll -d a/b/")]),s._v("\ndrwxrwxrwx "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("dc")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("dc")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("月  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("28")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":41 a/b/\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll -d a/b/c")]),s._v("\ndrwxrwxrwx "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("dc")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("dc")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("月  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("28")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":42 a/b/c\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll -d a/b/c/d.txt ")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-rwxrwxrwx")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("dc")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("dc")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("月  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("28")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":42 a/b/c/d.txt\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("hr"),s._v(" "),n("h2",{attrs:{id:"权限的作用-意义"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#权限的作用-意义"}},[s._v("#")]),s._v(" 权限的作用/意义!!!")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("针对文件"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("操作文件内容"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    r: 读取文件内容 "),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n    w: 修改文件内容\t"),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" 追加,覆盖"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n    x: 可以把文件当作一个命令/程序来运行 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("前提是此文件得是个代码文件"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n       若该文件的代码是编译好的结果,那么只有x权限即可执行"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n       若该文件的代码是一个解释型的脚本程序,则还需要配合r权限才可执行 rx\n针对目录"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("操作某一目录下的子文件夹或子文件 创建删除移动"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    r: 可以浏览该目录下的子目录名和子文件名字,意味着能"),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("ll"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("罗列目录文件下的有哪些东西\n    w: 可在该目录下创建"),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("touch")]),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("、删除"),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("、移动子文件或子文件夹"),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n    x: 可以进入该目录,意味着能"),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("到此路径下\n       即我们需要操作"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("增删改"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("目录下的内容,就得先能进入该目录,得先拥有该目录的x执行权限\n       具体来说:\n          可以正常切换到目录下,若涉及到多层目录如/a/b/c,需要对每一级都有x权限才可以正常走到下一级\n\n▼ 文件不管是否有r,都可以ls"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("目录没有r,不能ls\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br")])]),n("h3",{attrs:{id:"操作文件内容"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#操作文件内容"}},[s._v("#")]),s._v(" 操作文件内容")]),s._v(" "),n("p",[s._v("☆ "),n("font",{attrs:{color:"blue"}},[n("strong",[s._v("操作文件夹下的文件内容")])]),n("br"),s._v("\n     查看某一个文件内容需要具备的权限: 对所有文件夹的x权限以及对目标文件的r权限"),n("br"),s._v("\n     解析: "),n("font",{attrs:{color:"gray"}},[s._v("/a/b/c.txt  该用户要能cd一层层的切到路径/a/b路径下,即需要对"),n("code",[s._v("/a/b")]),s._v("目录文件以及沿途的"),n("code",[s._v("/")]),s._v(" "),n("code",[s._v("/a")]),s._v("目录文件有x权限; 要能读取文件的内容,需要对 c.txt 有r权限.")])],1),s._v(" "),n("h3",{attrs:{id:"操作文件夹"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#操作文件夹"}},[s._v("#")]),s._v(" 操作文件夹")]),s._v(" "),n("p",[s._v("☆ "),n("font",{attrs:{color:"blue"}},[n("strong",[s._v("操作文件夹下的子文件与子文件夹(注意不是文件内容)")])]),n("br"),s._v("\n     在目录下创建、删除、移动文件需要的权限: 对沿途所有文件夹的x权限以及对目标文件夹的w权限"),n("br"),s._v("\n     解析: "),n("font",{attrs:{color:"gray"}},[s._v("在/a/b目录下创建c.txt文件,得先能cd到/a/b路径下; 需要对b文件夹有w写权限,才能touch创建c.txt文件.")])],1),s._v(" "),n("h3",{attrs:{id:"总结"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[s._v("#")]),s._v(" 总结")]),s._v(" "),n("p",[s._v("     第一步: "),n("strong",[s._v("用户必须要对沿途的文件夹都有一个x执行权限;")]),n("br"),s._v("\n​     第二步: 用户看具体要求"),n("br"),s._v("\n​          1> 对文件夹的操作(不操作文件内容), r代表可以浏览,w代表可以创建删除移动子文件和子目录."),n("br"),s._v("\n​          2> 对文件的操作(操作文件内容), r代表可以读文件内容,w代表可以修改文件内容.")]),s._v(" "),n("p",[s._v("​\t"),n("font",{attrs:{color:"blue"}},[n("strong",[s._v("vim 写入内容 wq!强制覆盖,需要的权限:(二选一)")])]),n("br"),s._v("\n​          沿途的文件夹都有一个x执行权限, 目标文件 "),n("code",[s._v("-w-")]),s._v("   目标文件所在文件夹 "),n("code",[s._v("--x")]),n("br"),s._v("\n​          沿途的文件夹都有一个x执行权限, 目标文件 "),n("code",[s._v("---")]),s._v("   目标文件所在文件夹 "),n("code",[s._v("-wx")])],1),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("▲ "),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("1")]),s._v(">")]),s._v(" 若用户对沿途所有文件夹只有x权限,对目标文件没有r读权限,有w写权限\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat a.txt ")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("111")]),s._v("\n！！！注意！！！vim\n简单来说,vim的原理是将文件内容一下子从硬盘全部读到内存中,在内存中改完后,再一次性全部覆盖硬盘的原文件"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n没有r读权限 -- vim打开文件时,虽然不会报错,但是空的,啥内容也没有"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n有w写权限  -- 写后可以wq"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("强制保存"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(" 写的内容是在内存里,wq"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("后直接覆盖了硬盘中原来的内容"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n在操作过程中会提示 "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"警告:正在修改一个只读文件"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"请加!强制执行"')]),s._v("\nPs: 吐槽,明明针对当前用户而言,对该文件只有写权限,还提示正在修改一个只读文件Hhhh.\n    也许是开发者在提醒你没看到源内容最好别修改.站的角度不同.\n\t\n补充:echo 因为有写权限,"),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("222")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" a.txt"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3333")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" a.txt"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("都会成功.\n\n\n▲ "),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("2")]),s._v(">")]),s._v(" 当前用户lili对沿途所有文件夹都有x权限并且当前用户对c文件夹有w权限,但是lili对d.txt文件没有权限\n/a/b/c/d.txt\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## -wx")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll -d a/b/c ")]),s._v("\ndrwxr-x-wx "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("月  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("28")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":42 a/b/c\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## ---")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll a/b/c/d.txt ")]),s._v("\n-rw-r------ "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("月  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("28")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":42 a/b/c/d.txt\n\nlili对c文件夹有w权限,那么lili可以删除d.txt,再touch创建一个新的d.txt,曲线救国.\n但不需要一步步的操作,vim可以一步到位.\nlili可以vim编辑文件内容,并且可以wq"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("强制保存退出完成文件修改.底层原理就是将源文件删掉了.\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("这一过程是不是跟上面的第一点相似,对的,他们实现的最终效果是一样的"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("可以通过查看前后操作的文件inode号来确定.\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 文件的属主和属组变啦.也就侧面验证了源文件删除啦,新文件是lili创建的.")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll a/b/c/d.txt ")]),s._v("\n-rw-r------ "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" lili lili "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("月  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("28")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":42 a/b/c/d.txt\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br")])]),n("h3",{attrs:{id:"文件执行"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#文件执行"}},[s._v("#")]),s._v(" 文件执行")]),s._v(" "),n("p",[s._v("☆ "),n("font",{attrs:{color:"blue"}},[n("strong",[s._v("对文件的执行权限")])])],1),s._v(" "),n("blockquote",[n("p",[s._v("对文件拥有执行权限意味着可以把文件当成命令运行")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\nlinux一切皆文件\n可以观测到 ugo对/usr/bin/cat文件都有x可执行权限\n'),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n'),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# which echo")]),s._v("\n/usr/bin/echo\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll /usr/bin/echo")]),s._v("\n-rwxr-xr-x. "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("33088")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v("月 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v(" /usr/bin/echo\n\n"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n将echo命令所在的文件拷贝到/opt/t1/t2目录下,并赋予最基本的文件可执行权限\n'),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n'),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mkdir -p /opt/t1/t2")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cp /usr/bin/echo /opt/t1/t2")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# chmod o=x /opt/t1/t2/echo")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# head -3 /opt/t1/t2/echo")]),s._v("\nELF"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("J@@?y@8\t@@@@@@?88@8@@@?^?^ ?m?m"),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("?m"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("??nn"),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("?TT@T@DDP?td?Q?Q@?Q@"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v("Q?tdR?td?m?m"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("?m`XX/lib64/ld-linux-x86-64.so.2GNU GNU???IDk?????"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#?DT?vX!C??z?8??q?  ?H??X0?@??\\>")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n.sh表明此文件要被shell解释器解锁执行,赋予了a.sh最基本的可执行权限\n'),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n'),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# touch /opt/t1/t2/a.sh")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim /opt/t1/t2/a.sh")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat /opt/t1/t2/a.sh")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hello"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"world"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hahah"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# chmod o=x /opt/t1/t2/a.sh")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n查看权限\n'),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n'),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll /opt/t1/t2")]),s._v("\n总用量 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("40")]),s._v("\n-rw-r----x "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("39")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("月  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":10 a.sh\n-rwxr-x--x "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("33088")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("月  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":18 "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n登录普通用户dc\n执行/opt/t1/t2/echo和/opt/t1/t2/a.sh两个可执行文件\n！！！！！！前者可执行成功,后者失败 why?\n因为echo文件是编译好的结果,不需要shell解释器解释啦,只需要x权限即可执行'),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n但a.sh文件的代码是一个解释型的脚本程序,即需要shell解释器读出来翻译成二进制再运行,则需要配合r权限才可执行\n"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n'),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("dc@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ /opt/t1/t2/echo wawo\nwawo\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("dc@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ /opt/t1/t2/a.sh\nbash: /opt/t1/t2/a.sh: 权限不够\n\n"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\nroot用户修改a.sh的权限为rx\ndc用户重新执行a.sh文件 成功'),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n'),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# chmod o=rx /opt/t1/t2/a.sh ")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("dc@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ /opt/t1/t2/a.sh\nhello\nworld\nhahah\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br")])]),n("hr"),s._v(" "),n("h2",{attrs:{id:"suid"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#suid"}},[s._v("#")]),s._v(" SUID")]),s._v(" "),n("h3",{attrs:{id:"抛出问题"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#抛出问题"}},[s._v("#")]),s._v(" 抛出问题")]),s._v(" "),n("p",[s._v("普通用户dc可以用"),n("code",[s._v("passwd")]),s._v("命令修改自己的账号密码,我们清楚的知道修改密码则是在修改"),n("code",[s._v("/etc/shadow")]),s._v("文件.."),n("br"),s._v("\n但dc普通用户对于"),n("code",[s._v("/etc/shadow")]),s._v("文件而言, 不是root也不属于root组,属于"),n("code",[s._v("其它人")]),s._v(",其权限为 "),n("code",[s._v("---")]),s._v(" 即没有任何权限.")]),s._v(" "),n("p",[s._v("逻辑上冲突了啊!? 是怎么一回事呢?  悄悄告诉你,是 "),n("strong",[s._v("SUID")]),s._v(" 从中作祟.")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll /etc/shadow")]),s._v("\n---------- "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1388")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("月   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(":53 /etc/shadow\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("dc@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("passwd")]),s._v(" \n更改用户 "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("dc")]),s._v(" 的密码 。\n为 "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("dc")]),s._v(" 更改 STRESS 密码。\n（当前）UNIX 密码：\n新的 密码：\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("p",[s._v("在UNIX系列的操作系统里面, 确定用户的身份是通过UID号确定的,跟用户名没有关系.."),n("br"),s._v("\n默认以登录用户的uid和gid为准.."),n("br"),s._v(" "),n("strong",[s._v("但除了"),n("code",[s._v("UID")]),s._v("与"),n("code",[s._v("GID")]),s._v("还有"),n("code",[s._v("euid")]),s._v("与"),n("code",[s._v("egid")]),s._v(",它两代表执行程序时,真正采用的用户id与组id.")]),n("br"),s._v(" "),n("font",{attrs:{color:"gray"}},[s._v("ps:e是effective有效的意思")])],1),s._v(" "),n("p",[s._v("登录dc用户,使用命令启用相应的进程..进程的权限就是当前登录用户dc的权限."),n("br"),s._v("\n即进程的uid和gid都是dc. unix在进程真正运行的时候会进行转换的,将uid关联euid,gid关联egid."),n("br"),s._v("\n默认情况下,uid==euid;gid==egid 是相等的! 但是可以改变！")]),s._v(" "),n("h3",{attrs:{id:"suid特点及使用过程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#suid特点及使用过程"}},[s._v("#")]),s._v(" SUID特点及使用过程")]),s._v(" "),n("blockquote",[n("p",[n("font",{attrs:{color:"brown"}},[s._v("suid作用于可执行的命令,意味着无论哪个用户来运行此命令,它的身份都会转换成此命令的主人来运行.")]),n("br"),s._v("\n即进程运行的时候,euid是该命令主人的uid..不是当前登录用户的uid..")],1)]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll /etc/shadow")]),s._v("\n---------- "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1388")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("月   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(":53 /etc/shadow\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll `which passwd`")]),s._v("\n-rwsr-xr-x. "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("27856")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("月   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v(" /usr/bin/passwd\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll `which su`")]),s._v("\n-rwsr-xr-x. "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("32128")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("月   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v(" /usr/bin/su\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("p",[n("strong",[s._v("这个s就代表着二进制文件具有SUID权限")]),n("br"),s._v(" "),n("font",{attrs:{color:"green"}},[s._v("这里显示的小s是因为属主本身具有x执行权限; 若属主没有x执行权限,那么显示的是大S.")])],1),s._v(" "),n("p",[n("font",{attrs:{color:"blue"}},[n("strong",[s._v("[特点]")])])],1),s._v(" "),n("blockquote",[n("p",[n("strong",[s._v("二进制可执行文件     当前登录用户/使用者对其拥有x可执行权限     在执行该命令的过程中")])])]),s._v(" "),n("p",[s._v("○ SUID权限仅对二进制可执行文件有效 "),n("font",{attrs:{color:"gray"}},[s._v("bin目录下的文件,那些命令!")]),n("br"),s._v("\n○ 如果执行者对于该二进制可执行文件具有 x 的权限, 执行者将具有该执行文件的属主的权限"),n("br"),s._v("\n     即当前登录用户在使用二进制可执行文件时身份临时转换成该执行文件的属主"),n("br"),s._v("\n○ 本权限 "),n("strong",[s._v("仅在执行该二进制可执行文件的过程中")]),s._v(" 有效 "),n("font",{attrs:{color:"gray"}},[s._v("即仅限于执行命令的操作..")])],1),s._v(" "),n("p",[n("font",{attrs:{color:"blue"}},[n("strong",[s._v("[使用过程]")])])],1),s._v(" "),n("p",[s._v("普通用户dc利用 SUID 权限完成密码修改的过程如下:")]),s._v(" "),n("p",[s._v("1> dc用户对于 /usr/bin/passwd 这个程序具有执行权限, 因此可以执行passwd命令/程序"),n("br"),s._v("\n2> passwd 程序的所有者为 root;  dc用户执行 passwd 程序的过程中会暂时获得root权限"),n("br"),s._v("\n3> root不受权限的压制,因此dc用户在 "),n("em",[s._v("执行passwd程序的过程中")]),s._v(" 可以修改 /etc/shadow 文件")]),s._v(" "),n("h3",{attrs:{id:"实验证明"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#实验证明"}},[s._v("#")]),s._v(" 实验证明")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n可以看到,root用户不受权限压制可以看到a.txt的内容\n但是普通用户dc不能,权限不够'),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(" \n"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n'),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mkdir test")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# chmod 777 test")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# echo 123456 > test/a.txt")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# chmod 000 test/a.txt ")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll test/a.txt ")]),s._v("\n---------- "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("月   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" 09:40 test/a.txt\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat test/a.txt ")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("123456")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("dc@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" /opt/test/a.txt \ncat: /opt/test/a.txt: 权限不够\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br")])]),n("p",[n("strong",[s._v("Q:")]),s._v(" "),n("font",{attrs:{color:"purple"}},[s._v("如何在"),n("strong",[s._v("不改变")]),s._v(" 文件a.txt的权限情况下,让所有人都可以看到文件的内容?")])],1),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n因为特殊权限suid的缘故,意味着只要执行cat命令,用户的身份就变成了root\n'),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n'),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll `which cat`")]),s._v("\n-rwxr-xr-x. "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("54080")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v("月 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v(" /usr/bin/cat\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## chmod 4755 `which cat`")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# chmod u+s /usr/bin/cat")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll `which cat`")]),s._v("\n-rwsr-xr-x. "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("54080")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v("月 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v(" /usr/bin/cat\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# su - dc -c "cat /opt/test/a.txt"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("123456")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n验证,登录用户必须具备对执行文件'),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("命令对应的文件"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("有x执行权限"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("不然哪怕有suid也不好使用.\n逻辑上也说得过去,你连执行命令的权限都没有,如何在执行的过程中转换身份呢？\n"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n'),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll `which cat`")]),s._v("\n-rwsr-xr-x. "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("54080")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v("月 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v(" /usr/bin/cat\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# chmod o-x /usr/bin/cat")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll `which cat`")]),s._v("\n-rwsr-xr--. "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("54080")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v("月 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v(" /usr/bin/cat\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# su - dc -c "cat /opt/test/a.txt"')]),s._v("\n-bash: /bin/cat: 权限不够\n\n"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n这样做非常不安全,记得恢复操作'),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n'),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##  chmod u-s,o+x /usr/bin/cat")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# chmod u=rwx,o=rx /usr/bin/cat")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br")])]),n("hr"),s._v(" "),n("h2",{attrs:{id:"sgid"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#sgid"}},[s._v("#")]),s._v(" SGID")]),s._v(" "),n("blockquote",[n("p",[s._v("用户运行命令时使用的是命令文件所属组的身份...")])]),s._v(" "),n("h3",{attrs:{id:"普通文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#普通文件"}},[s._v("#")]),s._v(" 普通文件")]),s._v(" "),n("p",[n("strong",[s._v("Q:")]),s._v(" "),n("font",{attrs:{color:"purple"}},[s._v("如何在"),n("strong",[s._v("仅")]),s._v(" 改变文件1.txt的属组的权限的情况下,让所有人都可以看到文件的内容?")])],1),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\ncat命令有SGID权限后,dc用户在使用cat命令访问1.txt文件时,所拥有的权限是root组的权限\n相当于dc临时切到root组里'),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n因为命令文件与普通文件的属组是一样的"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("所以改变普通文件属组root组的权限即可"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("不需要考虑普通文件的属主"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n这里相当于将普通文件属组的优先级提到了属主之前"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n'),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll /usr/bin/cat")]),s._v("\n-rwxr-xr-x. "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("54080")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v("月 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v(" /usr/bin/cat\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# chmod g+s /usr/bin/cat")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll /usr/bin/cat")]),s._v("\n-rwxr-sr-x. "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("54080")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v("月 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v(" /usr/bin/cat\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# touch /opt/test/1.txt")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# chmod 000 /opt/test/1.txt")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll /opt/test/1.txt ")]),s._v("\n---------- "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("月   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":36 /opt/test/1.txt\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# echo 123 > /opt/test/1.txt ")]),s._v("\n\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# su - dc -c "cat /opt/test/1.txt"')]),s._v("\ncat: /opt/test/1.txt: 权限不够\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# su - onepiece -c "cat /opt/test/1.txt"')]),s._v("\ncat: /opt/test/1.txt: 权限不够\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# chmod g+r /opt/test/1.txt ")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# su - dc -c "cat /opt/test/1.txt"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("123")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# su - onepiece -c "cat /opt/test/1.txt"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("123")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br")])]),n("h3",{attrs:{id:"目录文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#目录文件"}},[s._v("#")]),s._v(" 目录文件")]),s._v(" "),n("p",[s._v("当一个用户对某一目录有写和执行权限时,该用户就可以在该目录下建立文件;"),n("br"),s._v(" "),n("strong",[s._v("如果该目录同时用SGID修饰,则该用户在这个目录下建立的文件的属组与这个目录的属组一致!!!")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n目录文件和普通文件是谁创建的,其属主和属组就是谁！\n'),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n'),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mkdir /opt/aaa")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mkdir /opt/aaa/bbb")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# touch /opt/aaa/b.txt")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# chmod o+w /opt/aaa")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll -d /opt/aaa")]),s._v("\ndrwxr-xrwx "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" root root "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("月   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":53 /opt/aaa\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# su - dc")]),s._v("\n上一次登录：二 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("月  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":53:33 CST 2022pts/0 上\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("dc@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" /opt/aaa/ccc\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("dc@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("touch")]),s._v(" /opt/aaa/c.txt\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("dc@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ ll /opt/aaa\n总用量 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\ndrwxr-xr-x "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("月   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":52 bbb\n-rw-r--r-- "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("月   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":53 b.txt\ndrwxrwxr-x "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("dc")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("dc")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("月   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":55 ccc\n-rw-rw-r-- "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("dc")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("dc")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("月   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":55 c.txt\n\n\n"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n给目录文件/opt/aaa添加特殊权限SGID,并改变其属组为group1'),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("不用root组,结果更具标志性,更容易观察"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n普通用户dc在/opt/aaa下创建目录文件dir2和普通文件2.txt,其属组会与/opt/aaa的属组保持一致\n"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n'),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# groupadd group1")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# chown .group1 /opt/aaa")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# chmod g+s /opt/aaa")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll -d /opt/aaa")]),s._v("\ndrwxr-srwx "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" root group1 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("54")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("月   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":55 /opt/aaa\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mkdir /opt/aaa/dir1")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# touch /opt/aaa/1.txt")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# su - dc")]),s._v("\n上一次登录：二 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("月  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":55:30 CST 2022pts/0 上\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("dc@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" /opt/aaa/dir2\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("dc@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("touch")]),s._v(" /opt/aaa/2.txt\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("dc@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ ll /opt/aaa\n总用量 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n-rw-r--r-- "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root group1 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("月   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":03 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".txt\t\t●\n-rw-rw-r-- "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("dc")]),s._v("   group1 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("月   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":04 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(".txt\t\t●\ndrwxr-xr-x "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("月   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":52 bbb\n-rw-r--r-- "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("月   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":53 b.txt\ndrwxrwxr-x "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("dc")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("dc")]),s._v("     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("月   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":55 ccc\n-rw-rw-r-- "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("dc")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("dc")]),s._v("     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("月   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":55 c.txt\ndrwxr-sr-x "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root group1 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("月   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":03 dir1\t\t●\ndrwxrwsr-x "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("dc")]),s._v("   group1 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("月   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":04 dir2\t\t●\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br")])]),n("hr"),s._v(" "),n("h2",{attrs:{id:"sbit-sticky"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#sbit-sticky"}},[s._v("#")]),s._v(" SBIT/Sticky")]),s._v(" "),n("blockquote",[n("p",[s._v("SBIT是 "),n("em",[s._v("the restricted deletion flag or sticky bit")]),s._v(" 的简称,有时也称为Sticky 粘滞位"),n("br"),s._v(" "),n("strong",[s._v("SBIT 目前只对目录有效,用来阻止非文件的属主删除文件.")])])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n创建一个共享文件夹share\nroot账号依次切换到user01,user02,user03用户下,分别在共享文件夹下创建文件1.txt、2.txt、3.txt\n'),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n'),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mkdir /opt/share")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# chmod 777 /opt/share/")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# useradd user01")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# useradd user02")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# useradd user03")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# su - user01")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("user01@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("touch")]),s._v(" /opt/share/1.txt\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("user01@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v("\n登出\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# su - user02")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("user02@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("touch")]),s._v(" /opt/share/2.txt\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("user02@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v("\n登出\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# su - user03")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("user03@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("touch")]),s._v(" /opt/share/3.txt\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("user03@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v("\n登出\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll /opt/share/")]),s._v("\n总用量 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n-rw-rw-r-- "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" user01 user01 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("月   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":16 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".txt\n-rw-rw-r-- "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" user02 user02 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("月   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":17 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(".txt\n-rw-rw-r-- "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" user03 user03 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("月   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":17 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(".txt\n\n\n"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n问题来啦,user01-03三个用户不仅能删除自己创建的文件,还能删除其余两个用户创建的文件\n按照逻辑,本着共享的原则,user02只能删除自己上传的2.txt文件,不能删除1.txt与3.txt文件'),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n'),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# su - user02")]),s._v("\n上一次登录：二 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("月  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":17:04 CST 2022pts/0 上\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("user02@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-rf")]),s._v(" /opt/share/2.txt\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("user02@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-rf")]),s._v(" /opt/share/1.txt\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("user02@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-rf")]),s._v(" /opt/share/3.txt\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("user02@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v("\n登出\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll /opt/share/")]),s._v("\n总用量 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\n\n"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n要想让上传者只能删除自己上传的文件,就需要用到粘滞位SBIT\n'),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n'),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll -d /opt/share/")]),s._v("\ndrwxrwxrwx "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("月   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":23 /opt/share/\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# chmod o+t /opt/share/")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll -d /opt/share/")]),s._v("\ndrwxrwxrwt "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("月   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":23 /opt/share/\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# su - user01 -c "touch /opt/share/1.txt"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# su - user02 -c "touch /opt/share/2.txt"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# su - user03 -c "touch /opt/share/3.txt"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll /opt/share/")]),s._v("\n总用量 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n-rw-rw-r-- "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" user01 user01 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("月   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":38 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".txt\n-rw-rw-r-- "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" user02 user02 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("月   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":39 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(".txt\n-rw-rw-r-- "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" user03 user03 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("月   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":39 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(".txt\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# su - user02")]),s._v("\n上一次登录：二 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("月  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":39:05 CST 2022pts/0 上\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("user02@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-rf")]),s._v(" /opt/share/1.txt\nrm: 无法删除"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/opt/share/1.txt"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" 不允许的操作\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("user02@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-rf")]),s._v(" /opt/share/2.txt\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("user02@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-rf")]),s._v(" /opt/share/3.txt\nrm: 无法删除"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/opt/share/3.txt"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" 不允许的操作\n\n\nPs: liunx的临时文件夹/tmp 其权限默认就是drwxrwxrwt.\n\t\t用来杜绝 a用户往里放个东西,b用户过来将其删掉 的情况"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br"),n("span",{staticClass:"line-number"},[s._v("62")]),n("br"),n("span",{staticClass:"line-number"},[s._v("63")]),n("br"),n("span",{staticClass:"line-number"},[s._v("64")]),n("br"),n("span",{staticClass:"line-number"},[s._v("65")]),n("br"),n("span",{staticClass:"line-number"},[s._v("66")]),n("br"),n("span",{staticClass:"line-number"},[s._v("67")]),n("br"),n("span",{staticClass:"line-number"},[s._v("68")]),n("br"),n("span",{staticClass:"line-number"},[s._v("69")]),n("br"),n("span",{staticClass:"line-number"},[s._v("70")]),n("br"),n("span",{staticClass:"line-number"},[s._v("71")]),n("br"),n("span",{staticClass:"line-number"},[s._v("72")]),n("br"),n("span",{staticClass:"line-number"},[s._v("73")]),n("br"),n("span",{staticClass:"line-number"},[s._v("74")]),n("br")])]),n("hr"),s._v(" "),n("h2",{attrs:{id:"特殊权限总结☆"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#特殊权限总结☆"}},[s._v("#")]),s._v(" 特殊权限总结☆")]),s._v(" "),n("blockquote",[n("p",[s._v("有些实验的具体步骤写起来太繁琐了... 直接略过!!Please believe me,我是实验过得到的结论..")]),s._v(" "),n("p",[s._v("SUID --  针对属主      --      u+s      --      S+x=s"),n("br"),s._v("\nSGID --  针对属组      --      g+s      --      S+x=s"),n("br"),s._v("\nSBIT  --  针对其他人      --      o+s      --      T+x=t")]),s._v(" "),n("p",[n("font",{attrs:{color:"brown"}},[s._v("实际上特殊权限和umask都不会怎么用到,但是需要知道是什么!!遇到后不慌..Hhh")])],1)]),s._v(" "),n("h3",{attrs:{id:"没有特殊权限"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#没有特殊权限"}},[s._v("#")]),s._v(" 没有特殊权限")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("【没有特殊权限】\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n  -rwxrw-r-- '),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" egon IT "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2351")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("月  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":12 /etc/passwd\n  linux系统把文件权限分为了三类:属主、属组、其它人\n  一个用户对文件的权限扫描的优先级:\n    ○ 先看该用户是否是文件的属主\n    ○ 在第一步失败的情况下,再看该用户是否是文件的属组\n    ○ 在第二步失败的情况下,该用户属于其他人权限\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n  '),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("1")]),s._v(">")]),s._v(" 若当前登录用户时egon,egon所属的部门是IT部门.\n  /etc/passwd的拥有者是egon,那么egon对其拥有的权限是rwx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("哪怕egon属于IT部门,文件拥有者的优先级会高一些.\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("2")]),s._v(">")]),s._v(" 若当前登录用户不是文件的拥有者,是lili,lili是属于IT部门的,那么lili对/etc/passwd的权限为rw-\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("3")]),s._v(">")]),s._v(" 若当前登录用户既不是文件的主人,也不是IT部门里的,那么对其拥有的权限为r--\n  \n提一嘴,默认情况下登录的普通用户对命令都有x执行权限"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br")])]),n("h3",{attrs:{id:"suid-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#suid-2"}},[s._v("#")]),s._v(" SUID")]),s._v(" "),n("blockquote",[n("p",[s._v("登录用户使用命令时获得该命令属主的权限. 即以命令属主的身份去操控普通文件.."),n("br"),s._v("\n一定要注意一般情况下,该属主面对不同文件时,权限是不尽相同的!!")])]),s._v(" "),n("p",[n("strong",[s._v("前置条件:")]),s._v(" 命令文件与命令操作的普通文件的属主都是用户root;属组都是root组.")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("现有三个普通用户 user1、dc、onepiece\n【SUID】\n    root用户不受权限压制"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("随便折腾命令执行过程需要操作的普通文件"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n    普通文件权限是啥都不用考虑"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("就是如此豪恨"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("￣▽￣"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("1")]),s._v(">")]),s._v(": "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("root"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("创建一个普通文件,"),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" 000 普通文件"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("2")]),s._v(">")]),s._v(": "),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" u+s 命令文件"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("3")]),s._v(">")]),s._v(": "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("普通用户"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("可以借助root的权限在使用该命令的过程中操作一些普通文件"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n      eg:对相应命令"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("这里以passwd和cat两命令举例"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("进行上述步骤后,\n         其它用户使用passwd命令会修改/etc/shadow文件"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("其它用户使用cat命令可以访问该普通文件\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("p",[n("strong",[s._v("前置条件:")]),s._v(" 命令文件的属主与命令操作的普通文件的属主 "),n("em",[s._v("不一样")]),s._v(" ,且都不是是用户root...")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("举例说明: 现有三个普通用户 user1、dc、onepiece\n【SUID】\n    /usr/bin/cat 信息为 -rwsr-xr-x. user1 user1\n    /opt/test/b.txt 信息为 ----------\t"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("dc")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("dc")]),s._v("\n    执行"),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" b.txt"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("命令:\n        若当前登录用户为onepiece\n        "),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("1")]),s._v(">")]),s._v(" 会以user1用户的身份运行此命令,user1用户对于b.txt而言,用户角色划分为其它人"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("●"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" so,只有当root用户执行"),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("a")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("-,o"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("r b.txt"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("命令后,"),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" b.txt"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("才会成功"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n        Ps: 那如果root用户执行"),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("gpasswd "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-a")]),s._v(" user1 "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("dc")]),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("将user1用户添加到dc组"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            root用户再执行"),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("a")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("-,g"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("r b.txt"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("命令,"),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" b.txt"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("依旧不会成功"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n            证明该身份user1不是b.txt的主人dc,就会直接被归为b.txt其他人一栏"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            不会检索文件的组,哪怕user1是b.txt属组dc组的成员. \n        若当前登录用户为dc,用户dc肯定是组dc的成员\n          实验结果证明运行"),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" b.txt"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("时,相当于将b.txt文件的属主临时改为了user1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n          还是会以dc用户的身份运行此命令"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(" （"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("特别注意"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("）\n          ●也就是说,只有当root用户执行"),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("a")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("-,g"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("r b.txt"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("命令后,"),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" b.txt"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("会成功"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br")])]),n("p",[n("strong",[s._v("前置条件:")]),s._v(" 命令文件的属主与命令操作的普通文件的属主 "),n("em",[s._v("一样")]),s._v(" ,但都不是用户root...")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("举例说明: 现有三个普通用户 dc、onepiece\n【SUID】\n    /usr/bin/cat 信息为 -rwsr-xr-x. "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("dc")]),s._v(" root\n    /opt/test/b.txt 信息为 ----------\t"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("dc")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("dc")]),s._v("\n    无论当前登录用户是dc还是onepiece,都会以dc用户的身份执行"),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" b.txt"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("命令\n    ●意味着只有当root用户执行"),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("a")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("-,u"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("r b.txt"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("命令后,不管登录用户是谁,"),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" b.txt"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("都会成功"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("h3",{attrs:{id:"sgid、sbit"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#sgid、sbit"}},[s._v("#")]),s._v(" SGID、SBIT")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("【SGID针对普通文件】\n    前提:这里实验环境 -- 命令文件与命令操作的普通文件的属主都是用户root"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("属组都是root组."),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("其它情况没有验证"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n    作用于普通文件时,会以命令所属组的权限去操控普通文件"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("与SUID类似"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n    root组的权限可不等同于root用户的权限"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("所以要改变下root组针对目标普通文件的权限"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("1")]),s._v(">")]),s._v(": "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("root"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("创建一个普通文件,"),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" 000 普通文件"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("2")]),s._v(">")]),s._v(": "),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" g+s 命令文件"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("3")]),s._v(">")]),s._v(": "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("普通用户"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("只能用该普通文件的属组root组的权限操作该普通文件"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("4")]),s._v(">")]),s._v(": "),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" g+r 普通文件"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n  举例说明:\n    /usr/bin/cat -rwxr-sr-x. root root\n    /opt/test/1.txt ---------- root root\n    root用户改变root组针对1.txt的权限: "),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" g+r /opt/test/1.txt"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(" ----r-----\n    所有用户在运行cat命令时都拥有root组权限:  "),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" /opt/test/1.txt"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(" 成功.\n\n【SGID针对目录文件】 完成属组的继承"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n    root用户: "),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" g+s /opt/aaa"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("  drwxr-srwx\n    所有用户在目录文件/opt/aaa下创建的文件夹或文件的属组都会与/opt/aaa的属组保持一致\n\t\t\n\t\t\n【SBIT】\n    权限信息中最后一位t表明该目录被设置了SBIT权限.\n    SBIT对目录的作用是:\n       当用户在该目录下创建新文件或目录时,仅有自己和root才有权力删除,主要作用于一个共享的文件夹\n    root用户: "),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" o+t /opt/share"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("  drwxrwxrwt\n    其它用户在共享文件夹/opt/share里只能删除自己创建的文件\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br")])]),n("hr"),s._v(" "),n("h2",{attrs:{id:"umask"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#umask"}},[s._v("#")]),s._v(" umask")]),s._v(" "),n("blockquote",[n("p",[n("strong",[s._v("新建的文件、目录文件的默认权限是由umask决定的")])])]),s._v(" "),n("p",[n("font",{attrs:{color:"gray"}},[s._v("Ps: 联想一下,netmask掩码与ip地址进行与运算; umask也需要搭配使用..")])],1),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\nroot用户: 创建文件默认权限644'),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("创建文件夹默认权限755\n"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n'),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# touch a.txt")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mkdir aaa")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll")]),s._v("\n总用量 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\ndrwxr-xr-x "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("月   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":06 aaa\n-rw-r--r-- "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("月   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":05 a.txt\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("h3",{attrs:{id:"umask规则"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#umask规则"}},[s._v("#")]),s._v(" umask规则")]),s._v(" "),n("p",[s._v("规则如下:"),n("br"),s._v("\n1> uid>199并且属主与数组相等的用户下 --- umask: 0002;"),n("br"),s._v("\n     除1之外的其他用户,比如root用户 -- umask: "),n("strong",[s._v("0022")]),n("br"),s._v("\n2> umask有四位,"),n("strong",[s._v("第一位与特殊权限有关")]),s._v(".. 举例: 给a.txt ("),n("em",[s._v("-rw-r--r--")]),s._v(")文件加上suid、sgid、sticky..("),n("em",[s._v("-rwSr-Sr-T")]),s._v(")"),n("br"),s._v(" "),n("code",[s._v("chmod u+s,g+s,o+t a.txt")]),n("br"),s._v(" "),n("code",[s._v("chmod 7644 a.txt")]),s._v(" "),n("font",{attrs:{color:"brown"}},[n("strong",[s._v("u、suid -- 4 ; g、sgid -- 2 ; o、sbit -- 1.")])]),n("br"),s._v("\n2> linux中"),n("strong",[s._v("文件默认权限为666")]),s._v("、"),n("strong",[s._v("目录权限默认为777")]),s._v(", 会与umask后三位进行运算后得到最后的默认值.."),n("br"),s._v("\n     △ "),n("strong",[s._v("文件权限计算方法")]),s._v(": 偶数位直接相减, 奇数位相减后加1"),n("br"),s._v("\n          即umask位数上的值为偶数,直接被减; 若umask位数上的值为奇数,被减后加一;"),n("br"),s._v("\n          eg: umask 0325; 创建文件 (6-3+1 6-2 6-5+1) = 442"),n("br"),s._v("\n     △ "),n("strong",[s._v("目录权限计算方法")]),s._v("：直接相减即可"),n("br"),s._v("\n          eg: umask 0325; 创建目录 (7-3 7-2 7-5) = 452")],1),s._v(" "),n("h3",{attrs:{id:"临时-永久设置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#临时-永久设置"}},[s._v("#")]),s._v(" 临时/永久设置")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n临时修改umask值\n'),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n'),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("umask")]),s._v(" 000"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n永久修改umask值 -- 即修改对应的文件\nPs: 没必要动它'),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(" Hhh\n"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n'),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 或者vim /etc/bashrc 内容是一样的")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim /etc/profile  ")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$UID")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-gt")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("199")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-gn")]),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v('"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-un")]),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v('"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("umask")]),s._v(" 002    // uid大于等于199的默认umask值,表示一些系统用户和所有普通用户\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("umask")]),s._v(" 022    // uid小于199的默认umask值,包含root用户\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br")])]),n("hr")])}),[],!1,null,null,null);t.default=r.exports},494:function(s,t,a){s.exports=a.p+"assets/img/10.84fc0e65.png"}}]);