(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{1208:function(s,t,a){"use strict";a.r(t);var n=a(0),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"优先级设置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#优先级设置"}},[s._v("#")]),s._v(" 优先级设置")]),s._v(" "),n("blockquote",[n("p",[n("font",{attrs:{color:"brown"}},[s._v("nice命令设置的优先级不是程序最终的优先级, 只是优先级的修正数值")])],1)]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ps -l | head -1")]),s._v("\nF S   "),n("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("UID")]),s._v("    PID   "),n("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PPID")]),s._v("  C PRI  NI ADDR SZ WCHAN  TTY          TIME CMD\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("PRI:    代表这个进程可被执行的优先级,其值越小越早被执行"),n("br"),s._v("\nNI:      代表这个进程的nice值")]),s._v(" "),n("p",[s._v("NI可以通过nice命令设置,其表示进程可被执行的优先级的修正数值.."),n("br"),s._v("\nPRI值越小越快被执行,加入nice值后,将会使得PRI变为: "),n("font",{attrs:{color:"brown"}},[n("code",[s._v("PRI(new)=PRI(old)+nice")])])],1),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("▲ 对某一命令设置nice值\n"),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("nice")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-n")]),s._v(" nice值 命令"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n\n▲ 对已运行的进程设置新的优先级\n"),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("renice")]),s._v(" -nice值 进程PID"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n\nPS: 若nice命令未指定优先级的调整值,则以缺省值10来调整程序运行优先级,既在当前程序运行优先级基础之上增加10"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("hr"),s._v(" "),n("h2",{attrs:{id:"给进程发送信号"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#给进程发送信号"}},[s._v("#")]),s._v(" 给进程发送信号")]),s._v(" "),n("blockquote",[n("p",[s._v("只需掌握 "),n("font",{attrs:{color:"brown"}},[n("strong",[s._v("1、9、15")])]),s._v("这3个信号!!!")],1)]),s._v(" "),n("p",[n("code",[s._v("kill -l")]),s._v("   列出所有支持的信号\t"),n("br"),s._v(" "),n("code",[s._v("1) SIGHUP")]),s._v(" "),n("code",[s._v("9) SIGKILL")]),s._v(" "),n("code",[s._v("15) SIGTERM")])]),s._v(" "),n("h3",{attrs:{id:"hup"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#hup"}},[s._v("#")]),s._v(" HUP")]),s._v(" "),n("p",[s._v("有两个作用:"),n("br"),s._v("\n     1> 挂起会话"),n("br"),s._v("\n     2> "),n("strong",[s._v("修改了配置文件,在不关闭该进程的情况下,重新加载配置文件")]),n("br"),s._v(" "),n("font",{attrs:{color:"gray"}},[s._v("这里先详细阐述第二个作用,第一个作用后文会进行说明!")])],1),s._v(" "),n("p",[s._v("启动软件时会读取配置文件, 难道改完配置文件后, 要让软件重启进而重新读取修改后的配置文件吗？"),n("br"),s._v("\nno.. 重启,该软件提供的服务就断掉啦.. 可以通过该软件的进程发送HUP信号解决这个问题...")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("systemctl stop firewalld\nsystemctl disable firewalld\nsetenforce "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ifconfig")]),s._v(" ens33 "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" inet  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## -- 查看到服务端(vm虚机)的ip地址为172.16.150.131")]),s._v("\n\nyum "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" vsftpd "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v("\nsystemctl start vsftpd    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## -- 开启ftp服务")]),s._v("\nsystemctl status vsftpd   "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## -- 查看ftp服务状态")]),s._v("\nsystemctl "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" vsftpd   "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## -- 设置开机自启")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## -- vsftpd此软件有个默认的共享文件夹 /var/ftp/")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /var/ftp\t\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v("\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## -- 里面默认有个hub文件夹")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" /var/ftp/share\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("touch")]),s._v(" /var/ftp/share/a.txt\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("touch")]),s._v(" /var/ftp/share/b.txt\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("touch")]),s._v(" /var/ftp/share/aaa\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ftp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# tree /var/ftp")]),s._v("\n/var/ftp\n├── pub\n└── share\n    ├── aaa\n    ├── a.txt\n    └── b.txt\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## -- ftp://172.16.150.131 指向的就是 /var/ftp")]),s._v("\n在客户端"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("mac电脑"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("上,首先 "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ping")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.16")]),s._v(".150.131看是否能ping通\n然后在mac的浏览器上输入地址 ftp://172.16.150.131 \n点击"),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("访达.app"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("按钮,以客人的身份访问,点击连接"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("成功"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br")])]),n("p",[n("img",{attrs:{src:a(498),alt:""}})]),s._v(" "),n("p",[s._v("现在我们需要将ftp服务默认的共享目录"),n("code",[s._v("/var/ftp/")]),s._v("换成 "),n("code",[s._v("/var/ftp/share")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## vim /etc/vsftpd/vsftpd.conf 在该配置文件最末尾添加 anon_root=/var/ftp/share")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 使用echo\t\techo 'anon_root=/var/ftp/share' >> /etc/vsftpd/vsftpd.conf")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 使用sed 注意用的是单引号!! $最后一行 a添加")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'$a anon_root=/var/ftp/share'")]),s._v(" /etc/vsftpd/vsftpd.conf\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 让配置文件生效,若通过 systemctl restart vsftpd 命令重启服务,会导致该进程的PID改变")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ftp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ps aux | grep [v]sftpd")]),s._v("\nroot  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1117")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("53292")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("712")]),s._v(" ? Ss  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":02 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":00 /usr/sbin/vsftpd /etc/vsftpd/vsftpd.conf\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("kill")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-1")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1117")]),s._v("\n然后通过浏览器重新以客人身份访问.就会得到 /var/ftp/share目录下的内容\n\n"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n若将配置文件的内容搞乱了,将配置文件恢复出厂设置怎么做？\n'),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-rf")]),s._v(" /etc/vsftpd/vsftpd.conf\nyum reinstall vsftpd "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br")])]),n("p",[n("img",{attrs:{src:a(499),alt:""}})]),s._v(" "),n("h3",{attrs:{id:"kill与term"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#kill与term"}},[s._v("#")]),s._v(" KILL与TERM")]),s._v(" "),n("p",[n("code",[s._v("kill 进程PID")]),s._v("         默认发出的就是 -15的信号, 代表终止"),n("br"),s._v(" "),n("code",[s._v("kill -9 进程PID")]),s._v("      有些进程用15的信号是杀不死的,发送9的信号强制杀死")]),s._v(" "),n("p",[s._v("kill命令和ftp程序都是软件,kill给ftp发了个信号过去..."),n("br"),s._v(" "),n("strong",[s._v("ftp是否响应 取决于 ftp软件在开发时有没有设计捕捉此信号并作处理的功能..")]),n("br"),s._v("\n15这个信号可能得不到应用软件响应,但9这个信号应用软件基本都会响应,不然这个软件就是病毒了..."),n("br"),s._v(" "),n("font",{attrs:{color:"gray"}},[s._v("Ps: 回顾下,处于"),n("strong",[s._v("D")]),s._v("和"),n("strong",[s._v("Z")]),s._v("状态的进程是杀不掉的..")])],1),s._v(" "),n("p",[s._v("多个虚拟终端,都开启了vim, 通过 "),n("code",[s._v("pkill -9 vim")]),s._v(" 命令可以"),n("strong",[s._v("批量杀死")]),s._v("..")]),s._v(" "),n("h3",{attrs:{id:"补充"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#补充"}},[s._v("#")]),s._v(" 补充")]),s._v(" "),n("p",[n("code",[s._v("19) SIGSTOP")]),s._v("      使进程进入T状态"),n("br"),s._v(" "),n("code",[s._v("18) SIGCONT")]),s._v("      将停止的进程重新投入运行")]),s._v(" "),n("p",[n("img",{attrs:{src:a(500),alt:""}})]),s._v(" "),n("hr"),s._v(" "),n("h2",{attrs:{id:"关于hup信号"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#关于hup信号"}},[s._v("#")]),s._v(" 关于HUP信号")]),s._v(" "),n("blockquote",[n("p",[s._v("给进程发送HUP信号, 可以让进程重新加载配置文件.."),n("br"),s._v("\n接下来主要讲解它的另外一个功能: "),n("strong",[s._v("挂起会话")])])]),s._v(" "),n("h3",{attrs:{id:"话题引入"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#话题引入"}},[s._v("#")]),s._v(" 话题引入")]),s._v(" "),n("p",[s._v("远程连接开启了一个虚拟终端("),n("font",{attrs:{color:"gray"}},[s._v("提一嘴,用户登录成功后,会先开启一个名为bash的进程")]),s._v("), 一通命令操作后, 关闭该终端("),n("font",{attrs:{color:"gray"}},[s._v("注意,不是exit命令退出")]),s._v("),该终端窗口里执行的所有进程("),n("font",{attrs:{color:"gray"}},[s._v("bash进程连同其子进程")]),s._v(")都会被强制关掉..")],1),s._v(" "),n("p",[s._v("So,我们需要让进程脱离当前会话窗口session("),n("font",{attrs:{color:"gray"}},[s._v("通俗点,就是那个输入命令返回结果的交互式的命令行界面")]),s._v(")而运行\n换个说法,让我们的进程在后台一直运行,不要因为用户注销或者网络断开或者终端关闭而一起被干掉...")],1),s._v(" "),n("p",[s._v("有两种解决思路:"),n("br"),s._v("\n     思路1: 让进程忽略Linux HUP信号"),n("br"),s._v("\n     思路2: 让进程运行在新的会话里, 从而不属于此终端的子进程, 就不会在当前终端挂掉的情况下一起被带走")]),s._v(" "),n("p",[s._v("有四种方式: "),n("font",{attrs:{color:"gray"}},[n("strong",[s._v("它们的原理本质上都一样 -- 让子进程认一个新的爹PID为1")])]),n("br"),s._v("\n     ○ 先不着急叉掉窗口,使用exit或logout命令正常退出终端"),n("br"),s._v("\n     ○ nohup 命令 &"),n("br"),s._v("\n     ○ setsid"),n("br"),s._v("\n     ○ (命令 &)"),n("br"),s._v("\n     ○ screen 命令"),n("br"),s._v("\n     ○ kill -9 父进程PID")],1),s._v(" "),n("p",[s._v("▲ "),n("font",{attrs:{color:"blue"}},[s._v("验证直接叉掉窗口,该会话窗口/session/交互式窗口/虚拟终端的bash进程连同它的所有子进程都会一同挂掉..")])],1),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## -- /dev/pts/0")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n在第1个虚拟终端里\n我们ping网址,将结果不管正确与否都丢到/dev/null黑洞中,并在后台运行 \n并执行了一个在后台运行的sleep命令\n查看PID为6597的ping进程的父进程的PID为6331 \n查看得知PID为6331的进程是打开此虚拟终端/dev/pts/0产生的bash进程\n'),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n'),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ping www.baidu.com &> /dev/null &")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6597")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# sleep 3000 &")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6859")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ps -elf | grep 6597 | grep -v grep")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" S root   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6597")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6331")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" - "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("33188")]),s._v(" poll_s 09:50 pts/0 00:00:00 "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ping")]),s._v(" www.baidu.com\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ps aux | grep 6331 | grep -v grep")]),s._v("\nroot       "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6331")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.2")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("116456")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2944")]),s._v(" pts/0    Ss   09:38   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":00 "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-bash")]),s._v("\n\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## -- /dev/pts/1")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n在第2个虚拟终端里\n同样能查询到ping进程和sleep进程的父进程,都是PID为6331的bash进程\n'),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n'),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-elf")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6597")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-elf")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6859")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" aux "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6331")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 该命令只是想验证,开启的每个虚拟终端都有对应的bash进程 pts/0对应6331  pts/1对应6537")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ps aux | grep bash | grep -v grep")]),s._v("\nroot     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("820")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("115408")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("956")]),s._v(" ?        S    05:09   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":00 /bin/bash /usr/sbin/ksmtuned\nroot       "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6331")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.2")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("116456")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2944")]),s._v(" pts/0    Ss+  09:38   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":00 "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-bash")]),s._v("\nroot       "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6537")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.2")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("116456")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2936")]),s._v(" pts/1    Ss   09:49   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":00 "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-bash")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 可以查询到 PID为6631的bash进程 有两个正在运行的子进程 ping 和sleep")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# pstree 6331")]),s._v("\nbash─┬─ping\n     └─sleep\n\n\n将第1个虚拟终端 /dev/pts/0 的会话窗口叉掉"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("注意,不是exit正常退出"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(",\n在此session关闭的时候,会向此会话窗口里的bash进程及其子进程都发一个hup信号,\n该hup信号的意思就是让它们都死掉"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("  所以ping进程、sleep进程在第2个终端/dev/pts/1里就查询不到啦\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# tty")]),s._v("\n/dev/pts/1\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ps aux | grep 6597 | grep -v grep")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ps aux | grep 6859 | grep -v grep")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ")]),s._v("\nPs: 在第1个终端/dev/pts/0里输入命令exit而不是直接叉掉,那么在第二个终端里依旧能查到ping进程"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br")])]),n("h3",{attrs:{id:"exit、logout"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#exit、logout"}},[s._v("#")]),s._v(" exit、logout")]),s._v(" "),n("blockquote",[n("p",[n("font",{attrs:{color:"brown"}},[s._v("养成良好习惯,先exit/logout正常退出后,保证该窗口没有任何远程连接了,再叉掉!!!")])],1)]),s._v(" "),n("p",[s._v("在centos7里内核只负责硬件部分的管理,上层运行的软件统一被systemd软件管理起来啦."),n("br"),s._v("\nPID为1的进程就是systemd软件启动起来的..")]),s._v(" "),n("p",[s._v("当我们在/dev/pts/0终端输入命令"),n("code",[s._v("exit")]),s._v("或者"),n("code",[s._v("logout")]),s._v(" , 正常退出该终端.."),n("br"),s._v("\n此终端里PID为7441的bash进程就会被kill关掉,但该bash进程的子进程ping托管给了PID为1的进程...")]),s._v(" "),n("p",[s._v("So,正常退出/dev/pts/0终端后,再叉掉该终端窗口,ping进程也会一直在后台运行..."),n("br"),s._v(" "),n("font",{attrs:{color:"gray"}},[s._v("别问为什么,linux就是这么设计的！！T_T ")])],1),s._v(" "),n("p",[n("img",{attrs:{src:a(501),alt:""}})]),s._v(" "),n("p",[n("font",{attrs:{color:"gray"}},[s._v("Ps: 往下在进行新的实验之前,记得 kill -9 7492 ...")])],1),s._v(" "),n("h3",{attrs:{id:"nohup"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nohup"}},[s._v("#")]),s._v(" nohup")]),s._v(" "),n("blockquote",[n("p",[s._v("nohup的用途就是让提交的命令忽略 hup 信号")])]),s._v(" "),n("p",[n("img",{attrs:{src:a(502),alt:""}})]),s._v(" "),n("p",[n("img",{attrs:{src:a(503),alt:""}})]),s._v(" "),n("p",[s._v("nohup 的使用是十分方便的, 只需在要处理的命令前加上 nohup 即可..."),n("br"),s._v("\n但 "),n("strong",[s._v("通常")]),s._v(" 使用nohup的时候,会在命令最后加上"),n("code",[s._v("&")]),s._v(",让其在后台运行...")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("注意哦"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\n在直接叉掉终端时, 该终端bash的子进程会丢掉STDOUT"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("正常输出"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("、STDERR"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("错误输出"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("的链接.\n标准输出和标准错误缺省会被重定向到 nohup.out文件中.\n一般我们会在结尾加上"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"&"')]),s._v("来将命令放入后台运行进而解决问题, 或者更改缺省的重定向文件名"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("h3",{attrs:{id:"setsid"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#setsid"}},[s._v("#")]),s._v(" setsid")]),s._v(" "),n("blockquote",[n("p",[s._v("核心思想也是让进程忽略 hup信号..")])]),s._v(" "),n("p",[s._v("setid直接将进程的父pid设置成1, 即让运行的进程成为init( "),n("font",{attrs:{color:"gray"}},[s._v("centos7以前是init,centos是systemd")]),s._v(" )的子进程. 那么除非init/systemd结束, 该子进程才会结束, 当前进程所在的终端结束后并不会影响进程的运行.."),n("br"),s._v(" "),n("font",{attrs:{color:"gray"}},[s._v("即该运行的进程跟当前终端啥关系都没有了.. 它并不属于当前终端的子进程, 从而也就不会受到当前终端的Linux HUP信号的影响了.")])],1),s._v(" "),n("p",[n("strong",[s._v("注意哦!")]),s._v(" "),n("font",{attrs:{color:"brown"}},[s._v("nohup需要在命令最后加"),n("code",[s._v("&")]),s._v(", setid可用可不用...")]),s._v(" setid一步到位,将运行进程的父进程变为了PID为1的进程..")],1),s._v(" "),n("p",[s._v("实现了nohup运行命令后, 叉掉会话窗口的效果..")]),s._v(" "),n("p",[n("img",{attrs:{src:a(504),alt:""}})]),s._v(" "),n("p",[n("font",{attrs:{color:"gray",size:"2"}},[s._v("吐槽一下, 有个待解决的疑点, A终端后台运行 "),n("code",[s._v("setsid ping www.baidu.com &> /dev/null &")]),s._v(" 命令, 交互式界面返回了"),n("code",[s._v("[1] 9192")]),s._v(", 将道理,按照往常的逻辑, 9192也就是这条运行命令的PID... 但结果9193才是此命令的PID!! why? ")])],1),s._v(" "),n("h3",{attrs:{id:"在子shell中提交任务"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#在子shell中提交任务"}},[s._v("#")]),s._v(" 在子shell中提交任务")]),s._v(" "),n("blockquote",[n("p",[s._v("用括号将命令括起来提交... 能达到跟setsid同样的效果.  具体的底层原理等讲shell编程时再阐述..")])]),s._v(" "),n("p",[n("img",{attrs:{src:a(505),alt:""}})]),s._v(" "),n("h3",{attrs:{id:"screen"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#screen"}},[s._v("#")]),s._v(" screen!!")]),s._v(" "),n("blockquote",[n("p",[n("code",[s._v("screen 命令")]),n("br"),s._v(" "),n("code",[s._v("screen -S 窗口名")]),n("br"),s._v(" "),n("code",[s._v("screen -ls")]),s._v(" "),n("code",[s._v("screen -r 窗口名/终端PID")]),n("br"),s._v(" "),n("code",[s._v("ctrl+a")]),s._v("  + "),n("code",[s._v("ctrl+d")]),s._v("组合键"),n("br"),s._v(" "),n("code",[s._v("screen -x 窗口名/终端PID")])]),s._v(" "),n("p",[s._v("更多操作参考:"),n("code",[s._v("https://zhuanlan.zhihu.com/p/336727473")]),s._v(" screen部分内容...")])]),s._v(" "),n("p",[n("code",[s._v("yum install screen -y")])]),s._v(" "),n("p",[s._v("在第一个终端运行命令 "),n("code",[s._v("screen vim a.txt")]),n("br"),s._v("\n在第二个终端中查看 \t14283 -- 15367 -- 15368 -- 15369"),n("br"),s._v("\n     14283: 第一个终端的bash进程"),n("br"),s._v("\n     15367: bash的子进程,在第一个终端运行的screen命令"),n("br"),s._v("\n     15368: screen命令自个儿创建的子进程SCREEN"),n("br"),s._v("\n     15369: SCREEN进程创建了一个新的窗口/dev/pts/2来运行vim a.txt命令")]),s._v(" "),n("p",[n("img",{attrs:{src:a(506),alt:""}})]),s._v(" "),n("p",[n("font",{attrs:{color:"green"}},[s._v("首先要知道,通过"),n("code",[s._v("screen vim a.txt")]),s._v("编辑后,正常"),n("code",[s._v(":wq")]),s._v("退出界面, 15367 -- 15368 -- 15369都会结束掉...")])],1),s._v(" "),n("p",[s._v("若在编辑过程中 "),n("strong",[s._v("意外")]),s._v(" 关掉第一个终端, 那么, pts/0的bash进程和其子进程screen会被杀掉;"),n("br"),s._v("\n但此时PID为15368的SCREEN进程脱离pts/0终端运行, 开始依托于init/systemd进程开始运行, 即SCREEN进程的父进程变为PID为1的进程..")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## -- 在第二个终端中查看")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ps -elf | grep [v]im")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" S root     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("15368")]),s._v("     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" - "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("32001")]),s._v(" poll_s "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(":29 ?        00:00:00 SCREEN "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" a.txt\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" S root     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("15369")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("15368")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" - "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("37398")]),s._v(" poll_s "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(":29 pts/2    00:00:00 "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" a.txt\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[s._v("所以,15368和15369的进程并没有死掉... 而且我们可以恢复意外关闭的vim编辑界面的窗口继续编辑..")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# screen -ls")]),s._v("\nThere is a "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("screen")]),s._v(" on:\n\t"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("15368")]),s._v(".pts-0.localhost\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Detached"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" Socket "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" /var/run/screen/S-root.\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## -- 打开vim界面继续编辑.. 当然是在pts/2终端继续执行的vim命令..")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# screen -r 15478")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## -- 编辑完后 :q正常退出  pts/2窗口会自动关闭！! 15368和15369进程也会结束掉..")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ps -elf | grep [v]im")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("p",[n("font",{attrs:{color:"green"}},[n("strong",[s._v("screen 的其他玩法")])]),s._v(" "),n("code",[s._v("screen -S 窗口名")])],1),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# tty")]),s._v("\n/dev/pts/0\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# screen -S new_s")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## -- 回车,执行命令 /pts/0的终端会闪烁一下,跳出一个空白的终端界面")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## -- 可以观察掉,此终端界面是screen创建的新终端/pts/1")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# tty")]),s._v("\n/dev/pts/1\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ps -elf | grep [b]ash")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" S root     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("785")]),s._v("      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" - "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("28852")]),s._v(" do_wai 01:23 ?   00:00:01 /bin/bash"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" S root     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1881")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1751")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" - "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("18138")]),s._v(" poll_s 01:24 ?  00:00:01 /usr/bin/ssh-agent"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" S root      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("16943")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("16941")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" - "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("29114")]),s._v(" do_wai "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(":44 pts/0    00:00:00 "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-bash")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" S root      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("17020")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("17019")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" - "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("29142")]),s._v(" do_wai "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(":45 pts/1    00:00:00 /bin/bash\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ps -elf | grep new_s | grep -v grep")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" S root      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("17018")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("16943")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" - "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("31935")]),s._v(" sys_pa "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(":45 pts/0    00:00:00 "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("screen")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-S")]),s._v(" new_s\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" S root      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("17019")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("17018")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" - "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("31968")]),s._v(" poll_s "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(":45 ?        00:00:00 SCREEN "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-S")]),s._v(" new_s\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -- 梳理下此进程树的关系")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n  ------------------------------------------------\n  命令\t\t\t\t\t\t\t\t PID\t\t\t\t\t\t\t\t '),n("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PPID")]),s._v("\n  ------------------------------------------------\n\tpts/0  \t\t\t\t\t\t\t"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("16943")]),s._v("\t\t\t\t\t\t\t\t\n\t"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("screen")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-S")]),s._v(" new_s\t\t\t"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("17018")]),s._v(" \t\t\t\t\t\t\t"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("16943")]),s._v("\n\tSCREEN "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-S")]),s._v(" new_s\t\t\t"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("17019")]),s._v("\t\t\t\t\t\t\t\t"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("17018")]),s._v("\n\tpts/1\t\t\t\t\t\t\t\t"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("17020")]),s._v("\t\t\t\t\t\t\t\t"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("17019")]),s._v("\n\tpstree\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("17020")]),s._v("\n\t------------------------------------------------\n"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n'),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# pstree 16943")]),s._v("\nbash───screen───screen───bash───pstree\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br")])]),n("p",[s._v("在screen创建的pts/1终端运行命令"),n("code",[s._v("n = 0;while true;do ((n++));sleep 1;echo $n;done;")]),s._v(","),n("br"),s._v(" "),n("code",[s._v("ctrl+a")]),s._v(" "),n("code",[s._v("ctrl+d")]),s._v("连贯敲击.. 回到pts/0终端,可以做其他事情啦..."),n("br"),s._v("\n哪怕关闭了pts/0终端,在pts/1终端运行的命令也不会终止,会继续运行..."),n("br"),s._v("\n关闭pts/0终端, 重新连接上服务器, "),n("code",[s._v("screen -ls")]),s._v(" "),n("code",[s._v("screen -r new_S")]),s._v("  可以进入pts/1终端看运行状况等等...")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# tty")]),s._v("\n/dev/pts/0\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# screen -S new_s")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("detached from "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("17019")]),s._v(".new_s"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## -- 脱离new_s窗口")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("还有个骚操作.."),n("br"),s._v("\n小明正处于new_S窗口, 小川远程连接服务器后 "),n("code",[s._v("screen -x new_s")]),s._v(", "),n("strong",[s._v("两边可以同步显示操作")]),s._v("! Amazing..")]),s._v(" "),n("hr"),s._v(" "),n("h2",{attrs:{id:"管理后台进程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#管理后台进程"}},[s._v("#")]),s._v(" 管理后台进程")]),s._v(" "),n("blockquote",[n("p",[n("strong",[s._v("此部分了解即可..")]),s._v("  后台进程的管理通常会借助screen命令.")])]),s._v(" "),n("p",[n("code",[s._v("&")]),s._v("                                   后台运行"),n("br"),s._v(" "),n("code",[s._v("jobs")]),s._v("                             查看 "),n("strong",[s._v("当前终端")]),s._v(" 里提交的后台进程, 注意哦,是当前终端"),n("br"),s._v(" "),n("code",[s._v("ctrl+z")]),s._v("                         将前台的进程挂起(暂停 T)到后台  "),n("font",{attrs:{color:"blue"}},[s._v("注意哦,ctrl+c是结束进程")])],1),s._v(" "),n("p",[n("code",[s._v("fg %作业编号")]),s._v("              将后台的进程调到前台运行"),n("br"),s._v(" "),n("code",[s._v("bg %作业编号")]),s._v("              将后台挂起(T)的进程在后台运行")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# sleep 3000 &")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20265")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# jobs")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("+  运行中               "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sleep")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3000")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## -- 在vim编辑界面 ctrl+z 将前台的进程挂起(暂停)到后台")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## -- 中括号内的编号就是作业编号, %1代表作业1")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim b.txt")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("+  已停止               "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" b.txt\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# jobs")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("-  运行中               "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sleep")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3000")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("+  已停止               "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" b.txt\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## -- 调到前台运行后,ctrl+z就在前台结束了该进程")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# fg %1")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sleep")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3000")]),s._v("\n^C\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# jobs")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("+  已停止               "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" b.txt\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## -- 在vim页面 :q 退出后 该进程就结束了")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# fg %2")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" b.txt\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# jobs")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br")])]),n("p",[s._v("演示下杀死进程  "),n("code",[s._v("kill -9 %作业编号")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim c.txt")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("+  已停止               "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" c.txt\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# jobs")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("+  已停止               "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" c.txt\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ps aux | grep [v]im")]),s._v("\nroot      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20469")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.1")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.5")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("149548")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5184")]),s._v(" pts/0    T    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(":32   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":00 "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" c.txt\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -- 因为vim命令是交互式的,应该在前台运行,没法让其在后台运行")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# bg %1")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("+ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" c.txt "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# jobs")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("+  已停止               "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" c.txt\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kill -9 %1")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("+  已停止               "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" c.txt\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# jobs")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("+  已杀死               "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" c.txt\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br")])]),n("p",[s._v("演示bg命令")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## -- 在第一个终端执行")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ctrl+z后,该进程到后台挂起,不会再有信息输入到/mnt/a.txt中!!")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ping www.baidu.com &>> /mnt/a.txt")]),s._v("\n^Z\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("+  已停止               "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ping")]),s._v(" www.baidu.com "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&>>")]),s._v("/mnt/a.txt\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# jobs")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("+  已停止               "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ping")]),s._v(" www.baidu.com "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&>>")]),s._v("/mnt/a.txt\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## -- 解决方案: kill发送一个18）SIGCONT继续的信号给该进程 或者使用 bg命令")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# bg %1")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("+ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ping")]),s._v(" www.baidu.com "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&>>")]),s._v("/mnt/a.txt "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## -- 在后台继续运行, tail -f /mnt/a.txt 可以动态查看文件里的内容进行验证")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br")])]),n("hr"),s._v(" "),n("h2",{attrs:{id:"管道"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#管道"}},[s._v("#")]),s._v(" 管道")]),s._v(" "),n("blockquote",[n("p",[n("strong",[s._v("管道用于进程间通信")])])]),s._v(" "),n("p",[s._v('管道操作符号 "|" 主要用来连接左右两个命令. 将左侧命令的标准输出 stdout 作为右侧命令的标准输入 stdin .'),n("br"),s._v(" "),n("font",{attrs:{color:"gray"}},[n("strong",[s._v("注意哦!")]),s._v(" 无法传递标准错误输出给右侧命令..")])],1),s._v(" "),n("h3",{attrs:{id:"管道练习"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#管道练习"}},[s._v("#")]),s._v(" 管道练习")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("▲ 题1:统计当前/etc/passwd文件中用户使用的shell类型\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat /etc/passwd | head -1")]),s._v("\nroot:x:0:0:root:/root:/bin/bash\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# awk -F: '{print $7}' /etc/passwd | sort | uniq -c")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" /bin/bash\n      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" /bin/sync\n      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" /sbin/halt\n     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("39")]),s._v(" /sbin/nologin\n      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" /sbin/shutdown\n\n▲ 题2:统计网站的访问情况\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("netstat")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-an")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" :80 "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" -F"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('":"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{print $8}'")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sort")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("uniq")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-c")]),s._v("\n\n▲ 题3:打印当前所有的IP\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ip addr | grep 'inet ' | awk '{print $2}' | awk -F \"/\" '{print $1}'")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.16")]),s._v(".150.131\n\n▲ 题4:打印根分区已用空间的百分比"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("仅打印数字"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# df | grep '/$' | awk '{print $5}' | awk -F\"%\" '{print $1}'")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("27")]),s._v("\n\n▲ 题5:统计网站的访问最多的ip "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("top")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## -- 思路: 打印所有访问的过来的ip | 排序 | 去重 | 倒序排序 | 取前10")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{print $1}'")]),s._v(" access.log "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sort")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("uniq")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-c")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sort")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-rn")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("head")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br")])]),n("h3",{attrs:{id:"管道中的tee"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#管道中的tee"}},[s._v("#")]),s._v(" 管道中的tee")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## -- ifconfig命令的结果丢到了a.txt文件中,但屏幕上没有显示啦")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ifconfig")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&>")]),s._v(" /opt/a.txt\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## -- ifconfig命令的结果不仅会丢到了b.txt文件中,屏幕上也会显示一份")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## tee不加选项默认是覆盖\t\t`tee -a`是追加")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ifconfig")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("tee")]),s._v(" /opt/b.txt\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("h3",{attrs:{id:"xargs"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#xargs"}},[s._v("#")]),s._v(" xargs")]),s._v(" "),n("blockquote",[n("p",[s._v("xargs参数传递, 让一些不支持管道的命令可以使用管道技术!!!")])]),s._v(" "),n("p",[s._v("所有的命令都能将命令的结果丢到管道里, 但不是所有的命令("),n("font",{attrs:{color:"gray"}},[s._v("eg: rm mv cp")]),s._v(")都能从管道中拿出结果做处理!!!"),n("br"),s._v("\n那如何是好？"),n("font",{attrs:{color:"red"}},[s._v("结合 "),n("strong",[s._v("xargs命令")]),s._v(" 使用!! ")]),n("br"),s._v(" "),n("font",{attrs:{color:"blue"}},[s._v("详情请跳转:")]),s._v(" 4_文件管理之命令补充.md  find结合xargs 这部分的内容！！")],1),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# which cat | xargs ls -l")]),s._v("\n-rwxr-xr-x. "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("54080")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v("月 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v(" /usr/bin/cat\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## -- 必须的进入/opt目录才行  `ls /opt | xargs rm -rf`是失败的")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd /opt")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls")]),s._v("\na.txt  c.txt\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls | xargs rm -fv")]),s._v("\n已删除"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"a.txt"')]),s._v("\n已删除"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"c.txt"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("hr"),s._v(" "),n("h2",{attrs:{id:"僵尸进程与孤儿进程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#僵尸进程与孤儿进程"}},[s._v("#")]),s._v(" 僵尸进程与孤儿进程")]),s._v(" "),n("blockquote",[n("p",[s._v("在UNIX/Linux中, 每个进程都有一个父进程..")])]),s._v(" "),n("h3",{attrs:{id:"僵尸进程是什么"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#僵尸进程是什么"}},[s._v("#")]),s._v(" 僵尸进程是什么？")]),s._v(" "),n("p",[s._v("首先要明白, 当一个子进程开启起来以后, 它的运行与父进程是 "),n("strong",[s._v("异步并发")]),s._v(" 的, 彼此互不影响, 谁先死都不一定..."),n("br"),s._v(" "),n("font",{attrs:{color:"red"}},[s._v("总结来说,若直接叉掉终端, 父进程bash和其子进程都会结束掉.. 正常情况下,父进程先死,子进程会变成孤儿进程; 子进程先死,子进程会先变为僵尸进程再完全死去,对父进程没影响")])],1),s._v(" "),n("p",[s._v("第二点, linux操作系统的设计规定: "),n("font",{attrs:{color:"green"}},[s._v("父进程应该具备随时获取子进程状态的能力 ")]),n("br"),s._v(" "),n("font",{attrs:{color:"gray"}},[n("strong",[s._v("假设子进程先于父进程运行完毕,若OS将子进程的所有资源全部释放掉,父进程就找不到该子进程啦...")])]),n("br"),s._v("\nSo,linux当子进程先于父进程运行完毕/死掉时,OS会将子进程占用的重型资源都释放掉( "),n("font",{attrs:{color:"gray"}},[s._v("eg:关闭已打开的文件,舍弃已占用的cpu、内存、交换空间等")]),s._v(" ), 但是会保留一部分子进程的关键状态信息( "),n("font",{attrs:{color:"gray"}},[s._v("eg: "),n("strong",[s._v("PID")]),s._v("、退出状态、已运行时间等")]),s._v(" ), 此时子进程就相当于死了但是没完全死,没死干净, 因而得名"),n("font",{attrs:{color:"brown"}},[s._v('"僵尸进程"')]),s._v("...")],1),s._v(" "),n("p",[s._v("僵尸进程是linux操作系统出于好心, 为父进程准备的一些子进程的状态数据, 专供父进程随时查阅"),n("br"),s._v('\n也就是说"僵尸进程"是linux系统的一种数据结构, '),n("font",{attrs:{color:"brown"}},[s._v("所有的子进程结束后都会进入僵尸进程的状态")])],1),s._v(" "),n("h3",{attrs:{id:"wait-waitpid"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#wait-waitpid"}},[s._v("#")]),s._v(" wait / waitpid")]),s._v(" "),n("p",[s._v("僵尸进程残存的那些数据(eg PID)是需要回收的! 当父进程觉得自己无需查看僵尸进程的数据,觉得留着僵尸进程的数据没啥用时,会由父进程发起一个 "),n("strong",[s._v("系统调用")]),s._v(" "),n("font",{attrs:{color:"green"}},[s._v("wait / waitpid")]),s._v(" 来通知linux操作系统来清理这些僵尸进程..")],1),s._v(" "),n("p",[s._v("这里针对父进程有三种情况需要讨论:"),n("br"),s._v("\n1> 一些优秀的开源软件  "),n("font",{attrs:{color:"gray"}},[s._v("eg: nginx ")]),s._v(", 这些软件在开启子进程时"),n("br"),s._v("\n     父进程内部都会及时调用wait/waitpid来通知操作系统回收僵尸进程"),n("br"),s._v(" "),n("font",{attrs:{color:"gray"}},[s._v("所以我们通常看不到优秀的开源软件堆积僵尸进程 ")]),n("br"),s._v("\n2> 水平良好的程序员开发的应用程序, 知道父进程要对子进程负责, 会在父进程内考虑wait/waitpid"),n("br"),s._v("\n     但发起系统调用wait/waitpid的时间可能慢了些, 我们只需要发送17号信号提醒该父进程就行.."),n("br"),s._v("\n3> 垃圾程序员开发应用程序时,压根没设计进程对OS的wait/waitpid调用... 我们发信号提醒也没用,压根不会响应!")],1),s._v(" "),n("p",[s._v("情况3可能会出现一个非常奇怪的现象:"),n("br"),s._v("\n     计算机内存和硬盘充足、cpu空闲. 但是启动新的软件就是无法启动起来."),n("br"),s._v("\n     究其根本原因就是堆积了太多僵尸进程, 僵尸进程虽然对内存、硬盘、cpu消耗很小很小, 但一个僵尸进程就要占用一个PID, linux操作系统中PID号是有限的!!!")]),s._v(" "),n("h3",{attrs:{id:"清理僵尸进程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#清理僵尸进程"}},[s._v("#")]),s._v(" 清理僵尸进程")]),s._v(" "),n("p",[s._v("OS收到父进程发起的wait / waitpid系统调用后, 会释放掉僵尸进程占用的资源..")]),s._v(" "),n("p",[s._v("针对上面情况2, 我们可以通过命令 "),n("code",[s._v("kill -CHLD 父进程PID")]),s._v(" 发送 "),n("code",[s._v("17) SIGCHLD")]),s._v("信号给父进程, 让其赶快发起系统调用来通知OS清理僵尸进程!!")]),s._v(" "),n("p",[s._v("针对上面的情况3, 父进程不会响应 "),n("code",[s._v("17) SIGCHLD")]),s._v(" 信号, 只能杀掉父进程, 让僵尸子进程被PID为1的顶级进程systemd收养!! systemd非常靠谱, 会定期发起系统调用wait/waitpid来通知操作系统清理僵尸..."),n("br"),s._v(" "),n("font",{attrs:{color:"gray"}},[s._v("若累积的僵尸很少,不会直接选择杀父进程导致服务关闭, 会在软件升级的时候(优化软件),将该父进程干掉!! ")])],1),s._v(" "),n("h3",{attrs:{id:"孤儿进程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#孤儿进程"}},[s._v("#")]),s._v(" 孤儿进程")]),s._v(" "),n("p",[s._v("父进程先死掉, 而它的一个或多个子进程还在运行. 那么那些子进程将成为孤儿进程.."),n("br"),s._v("\n孤儿进程将被PID为1的顶级进程init / systemd所收养, 并由顶级进程对它们完成状态收集工作..")]),s._v(" "),n("h3",{attrs:{id:"实验验证"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#实验验证"}},[s._v("#")]),s._v(" 实验验证")]),s._v(" "),n("p",[s._v("linux 僵尸进程和孤儿进程的设计没有问题, 有问题的是开发应用程序的程序员..Hhh"),n("br"),s._v("\n看到出现僵尸进程不用紧张,僵尸进程个数一直在增加才应该紧张...")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("▲ 孤儿进程验证\nA终端\n\t后台运行命令,"),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ping")]),s._v(" www.baidu.com "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&>")]),s._v(" /dev/null "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\nB终端\n  "),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-elf")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("p"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("ing"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 找到PID与PPID")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("kill")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-9")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PPID")]),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(" \t\t\t\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 干掉ping进程的PPID,也就是终端A的bash 终端A会断开与服务器的连接")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-elf")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("p"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("ing"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 再执行此命令,发现ping进程的PPID变为了1")]),s._v("\n  \n▲ 僵尸进程验证\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## -- 终端A上操作")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim a.py")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat a.py")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 父进程开了3个子进程,父进程活10000秒,每个子进程都活10秒")]),s._v("\nfrom multiprocessing "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("import")]),s._v(" Process\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("import")]),s._v(" os\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("import")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("time")]),s._v("\n\ndef task"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(":\n    print"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"son -> "')]),s._v(",os.getpid"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")]),s._v("\n    time.sleep"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" __name__ "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"__main__"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[s._v("i")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" range"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(":\n        p "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Process"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("target"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("task"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        p.start"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\t\t\t\t\n    print"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"father -> "')]),s._v(",os.getpid"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")]),s._v("\n    time.sleep"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 10秒后,3个子进程会变成僵尸进程")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# python a.py ")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'father -> '")]),s._v(", "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("24754")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'son -> '")]),s._v(", "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("24756")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'son -> '")]),s._v(", "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("24757")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'son -> '")]),s._v(", "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("24755")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## -- 终端B上操作")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ps aux | grep 24754 | grep -v grep")]),s._v("\nroot      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("24754")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.5")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("151308")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5812")]),s._v(" pts/1    S+   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":58   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":00 python a.py\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ps aux | grep 24755 | grep -v grep")]),s._v("\nroot      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("24755")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" pts/1    Z+   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":58   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":00 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("python"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("defunct"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ps aux | grep 24756 | grep -v grep")]),s._v("\nroot      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("24756")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" pts/1    Z+   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":58   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":00 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("python"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("defunct"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ps aux | grep 24757 | grep -v grep")]),s._v("\nroot      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("24757")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" pts/1    Z+   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":58   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":00 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("python"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("defunct"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 证明僵尸进程杀不掉")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kill -9 24757")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ps aux | grep 24757 | grep -v grep")]),s._v("\nroot      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("24757")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" pts/1    Z+   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":58   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":00 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("python"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("defunct"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 再使用top命令 查看zombie字段的值 值为3")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 退出top界面")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## kill -9杀掉父进程,或者在终端A的交互式界面执行ctrl+c结束掉py程序")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kill -9 24754")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 再使用top命令 查看zombie字段的值 值为0")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br")])]),n("hr")])}),[],!1,null,null,null);t.default=e.exports},498:function(s,t,a){s.exports=a.p+"assets/img/ftp.2dbc356c.jpeg"},499:function(s,t,a){s.exports=a.p+"assets/img/ftp2.9a0628b1.jpeg"},500:function(s,t,a){s.exports=a.p+"assets/img/18_19.5c902be3.jpeg"},501:function(s,t,a){s.exports=a.p+"assets/img/exit_logout.fe0d57e5.jpeg"},502:function(s,t,a){s.exports=a.p+"assets/img/nohup_1.6dd9c2de.jpeg"},503:function(s,t,a){s.exports=a.p+"assets/img/nohup_2.b0012bab.jpeg"},504:function(s,t,a){s.exports=a.p+"assets/img/setsid.f4f4e976.jpeg"},505:function(s,t,a){s.exports=a.p+"assets/img/9.b5699492.jpeg"},506:function(s,t,a){s.exports=a.p+"assets/img/screen.f18d1627.jpeg"}}]);