(window.webpackJsonp=window.webpackJsonp||[]).push([[134],{1206:function(s,a,t){"use strict";t.r(a);var n=t(0),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"yum命令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#yum命令"}},[s._v("#")]),s._v(" yum命令")]),s._v(" "),n("blockquote",[n("p",[s._v("基于RPM包管理, 能够从指定的服务器自动下载RPM包并且安装, 可以自动处理依赖性关系, 并且一次安装所有依赖的软件包, 无须繁琐地一次次下载、安装.")])]),s._v(" "),n("p",[s._v("yum命令相较于rpm命令,"),n("strong",[s._v("yum可以自动解决依赖性的问题")]),s._v("."),n("br"),s._v("\n其原理在于:"),n("br"),s._v("\n     使用yum安装软件包时,会去某个仓库找软件包,此仓库已经事先将该软件包以及相关依赖全都准备好了.."),n("br"),s._v(" "),n("font",{attrs:{color:"gray"}},[n("strong",[s._v("仓库:")]),s._v(" 本质上就是存放所有相关软件包的一个文件夹.. ")]),n("br"),s._v("\n               该文件夹下必定有个名为"),n("strong",[s._v("repodata")]),s._v("的文件夹记录了文件夹所包含软件包之间的依赖关系..")],1),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## yum命令来自于哪个软件包")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rpm -qf /usr/bin/yum")]),s._v("\nyum-3.4.3-168.el7.centos.noarch\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 安装yum软件包后生成的配置文件")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rpm -qc yum")]),s._v("\n/etc/logrotate.d/yum\n/etc/yum.conf\n/etc/yum/version-groups.conf\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("h3",{attrs:{id:"选项"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#选项"}},[s._v("#")]),s._v(" 选项")]),s._v(" "),n("p",[n("strong",[s._v("查询仓库:")]),s._v(" "),n("code",[s._v("yum repolist")]),s._v(" -- 查看可用仓库"),n("br"),s._v(" "),n("code",[s._v("yum repolist all")]),s._v("\t-- 查看所有仓库(包含启用的与禁用的)")]),s._v(" "),n("p",[n("code",[s._v("yum-config-manager --disable 仓库名")]),s._v("\t-- 关闭指定仓库"),n("br"),s._v(" "),n("code",[s._v("yum-config-manager --enable 仓库名")]),s._v("\t  -- 开启指定仓库"),n("br"),s._v("\n​             "),n("font",{attrs:{color:"gray"}},[s._v(" 去掉.repo后缀就是仓库名 "),n("code",[s._v("ls /etc/yum.repos.d/")])]),n("br"),s._v("\n​             "),n("font",{attrs:{color:"green"}},[s._v("本质是将 "),n("code",[s._v("/etc/yum.repos.d/CentOS-Base.repo")]),s._v("文件中对应仓库的"),n("strong",[s._v("enabled")]),s._v("值进行更改")]),n("br"),s._v("\n​             "),n("font",{attrs:{color:"green"}},[s._v("enabled默认值为1 \t 0关闭) 1(开启)")]),n("br"),s._v(" "),n("strong",[s._v("查询软件包:")]),n("br"),s._v("\n​        "),n("code",[s._v("yum list")]),s._v("\t-- 列出所有可用仓库里的所有软件包( "),n("strong",[s._v("包括 "),n("em",[s._v("已经安装的")]),s._v(" 和 "),n("em",[s._v("可以安装的")])]),s._v(" )"),n("br"),s._v("\n​                "),n("font",{attrs:{color:"gray"}},[s._v("可结合管道与查看文件的一些命令一起使用 eg: "),n("code",[s._v("yum list|less")]),s._v(" ; "),n("code",[s._v("yum list|more")])]),n("br"),s._v(" "),n("code",[s._v("yum grouplist")]),s._v("  -- 列出所有可用仓库中的软件包组"),n("br"),s._v("\n​                "),n("font",{attrs:{color:"gray"}},[s._v("eg: 软件包组之一的 安全性工具 里就包含了一堆相关的软件包 ")]),n("br"),s._v("\n​        "),n("code",[s._v("yum provides 文件路径")]),s._v("\t-- 查看某个文件由哪个软件包产生的\t"),n("br"),s._v("\n​                "),n("font",{attrs:{color:"gray"}},[s._v("可用于查看命令来自哪个软件包  等同于 rpm -qf")])],1),s._v(" "),n("p",[n("font",{attrs:{color:"blue"}},[s._v("提一嘴,加 -y 选项 (表明yes) 可以非交互式的进行安装、卸载、重装、更新..")]),n("br"),s._v(" "),n("strong",[s._v("安装:")]),n("br"),s._v(" "),n("code",[s._v("yum install 软件包名 -y")]),s._v("\t-- 安装软件包"),n("br"),s._v(" "),n("font",{attrs:{color:"gray"}},[s._v("若已经安装啦,会在现有的仓库里面看看有无更高的版本,有的话会进行升级处理.. "),n("strong",[s._v("最好卸载后装新的!!")])]),n("br"),s._v(" "),n("font",{attrs:{color:"gray"}},[s._v("eg: "),n("code",[s._v("yum remove nginx-* -y")])]),n("br"),s._v(" "),n("code",[s._v('yum groupinstall "软件包组名字" -y')]),s._v("  or  "),n("code",[s._v('yum groups install "软件包组名字" -y')]),s._v("\t-- 安装软件组"),n("br"),s._v(" "),n("font",{attrs:{color:"gray"}},[s._v("注意: 软件组名字需要加双引号 ")]),n("br"),s._v(" "),n("strong",[s._v("卸载:")]),n("br"),s._v(" "),n("code",[s._v("yum remove 软件包名 -y")]),s._v(" \t-- 卸载软件包"),n("br"),s._v(" "),n("code",[s._v('yum groupremove "软件组名字" -y')]),s._v("  or  "),n("code",[s._v('yum groups remove "软件组名字" -y')]),s._v(" \t-- 卸载软件组"),n("br"),s._v(" "),n("strong",[s._v("重装:")]),s._v(" "),n("code",[s._v("yum reinstall 软件包名 -y")]),s._v("\t-- 不小心删除了配置文件的时,可以reinstall一下,会补充没有的部分"),n("br"),s._v(" "),n("font",{attrs:{color:"gray"}},[s._v("Ps: 晓得预期的结果的前提下,不打印结果 "),n("code",[s._v("yum reinstall httpd -y &>/dev/null")])]),n("br"),s._v(" "),n("font",{attrs:{color:"brown"}},[s._v("注意: reinstall仅限于在测试环境中搞,生产环境别轻易这样做!!!容易出问题. ")]),n("br"),s._v(" "),n("strong",[s._v("更新:")]),s._v(" "),n("font",{attrs:{color:"red"}},[s._v("不要作死,不要作死,不要轻易更新..")]),n("br"),s._v(" "),n("code",[s._v("yum update -y")]),s._v(" \t-- 会更新所有软件包,包括OS内核,"),n("font",{attrs:{color:"brown"}},[s._v("通常只在刚装完系统时执行")]),n("br"),s._v(" "),n("code",[s._v("yum update 软件包名 -y")]),s._v("\t-- 更新某个软件包"),n("br"),s._v(" "),n("code",[s._v("yum check-update")]),s._v("\t-- 检查有哪些可以更新的软件包"),n("br"),s._v(" "),n("font",{attrs:{color:"gray"}},[s._v("通常要更新时,测试环境、与线上1比1的环境都要实验下,没问题后, 再更新线上几台机器试试,观察几周时间,再将集群慢慢的更新...保证业务能正常运行的情况下,缓慢的从局部到全体更新...")])],1),s._v(" "),n("p",[n("strong",[s._v("缓存:")]),n("br"),s._v(" "),n("code",[s._v("yum makecache")]),s._v("\t-- 制作元数据缓存"),n("br"),s._v(" "),n("code",[s._v("yum clean all")]),s._v("\t-- 清除元数据缓存")]),s._v(" "),n("p",[n("strong",[s._v("历史记录:")]),n("br"),s._v(" "),n("code",[s._v("yum history")]),s._v("\t-- 查看执行过的yum命令历史记录"),n("br"),s._v(" "),n("code",[s._v("yum history info ID号")]),s._v("\t-- 查看具体某一条yum命令的详细信息,干了什么事"),n("br"),s._v(" "),n("code",[s._v("yum history undo ID号")]),s._v("\t-- "),n("strong",[s._v("撤销")]),s._v("执行过的某条yum命令,即相当于没有执行这条yum命令.."),n("br"),s._v(" "),n("font",{attrs:{color:"gray"}},[s._v("eg: 某条yum命令是卸载某个软件包,那么执行undo后,会重新下载这个软件包..")])],1),s._v(" "),n("p",[n("font",{attrs:{color:"blue"}},[n("strong",[s._v("注意:")]),s._v(" 无论yum安装的软件来自何方 "),n("code",[s._v("yum install rpm包网络地址")]),s._v(" , 遇到依赖问题, yum都会以自己仓库中的repodata存储的依赖关系为准.. 多个仓库的话, 会依次检索..")])],1),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("文件 "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 文件元数据 + 实际内容\n安装软件包就是在安装一堆文件,"),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("yum makecache"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("缓存的是文件的元数据"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("权限、大小、时间、此文件与其它文件的关联等"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(" 执行"),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("yum makecache"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("后,可以提速,提的是yum命令的查询速度"),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("yum list"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(",并没有提升软件包的下载速度"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n\nQ:能否缓存软件包呢？？\nA:若yum的仓库在网上的话,yum发请求将软件包下载到本地,安装完成后,默认情况yum会自动将软件包删除"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n  下次还想安装同一软件包,就得重复这个请求下载的过程"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n\t\n默认软件包下载安装后会自动删除这一操作是跟"),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("/etc/yum.conf"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("文件有关的"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n可以看到keepcache默认等于0,若"),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("keepcache")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("就代表yum会将rpm包安装后丢到cachedir属性指定的文件夹下"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost yum.repos.d"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim /etc/yum.conf   ")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("main"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("cachedir")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/var/cache/yum/"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$basearch")]),s._v("/"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$releasever")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("keepcache")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("debuglevel")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("logfile")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/var/log/yum.log\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("exactarch")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("obsoletes")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("gpgcheck")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("plugins")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("installonly_limit")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("bugtracker_url")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("http://bugs.centos.org/set_project.php?project_id"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ref")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("http://bugs.centos.org/bug_report_page.php?category"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("yum\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("distroverpkg")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("centos-release\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br")])]),n("h3",{attrs:{id:"实验验证"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#实验验证"}},[s._v("#")]),s._v(" 实验验证")]),s._v(" "),n("p",[n("font",{attrs:{color:"gray"}},[s._v("Ps: shell远程连接开了两个窗口,第一个窗口的yum命令正在执行,第二个窗口使用yum时会提示yum对应的进程正在运行,"),n("strong",[s._v("即同一时间在一台机器上只能有一个yum命令运行...")])]),n("br"),s._v("\n当我们确定后台运行的yum没用时,那么运行命令 "),n("code",[s._v("pkill -9 yum")]),s._v(" 可干掉后台正在运行的那个yum..")],1),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 观察结果,可以看到当前可以的仓库有三个 Base、Extras、Updates")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# yum repolist")]),s._v("\n已加载插件：fastestmirror, langpacks\nLoading mirror speeds from cached hostfile\n * base: mirrors.nju.edu.cn\n * extras: mirrors.163.com\n * updates: mirrors.nju.edu.cn\n源标识                       源名称                                     状态\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("base/7/x86_64           CentOS-7 - Base                            "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10,072")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("extras/7/x86_64         CentOS-7 - Extras                             "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("updates/7/x86_64        CentOS-7 - Updates                          "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4,101")]),s._v("\nrepolist: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("14,685")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 关闭与启动仓库 Base")]),s._v("\nyum-config-manager "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--disable")]),s._v(" Base\nyum-config-manager "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--enable")]),s._v(" Base\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost yum.repos.d"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# which ifconfig")]),s._v("\n/usr/sbin/ifconfig\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost yum.repos.d"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# yum provides /usr/sbin/ifconfig")]),s._v("\n已加载插件：fastestmirror, langpacks\nLoading mirror speeds from cached hostfile\n * base: mirrors.nju.edu.cn\n * extras: mirrors.nju.edu.cn\n * updates: mirrors.nju.edu.cn\nnet-tools-2.0-0.25.20131004git.el7.x86_64 "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" Basic networking tools\n源    :@anaconda\n匹配来源：\n文件名    :/usr/sbin/ifconfig\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 安装软件包 以及 软件组")]),s._v("\nyum "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" httpd "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v("\nyum groupinstall "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"开发工具"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 卸载")]),s._v("\nyum remove httpd "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v("\nyum groupremove "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"开发工具"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 更新")]),s._v("\nyum update httpd "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br")])]),n("hr"),s._v(" "),n("h2",{attrs:{id:"yum源分类"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#yum源分类"}},[s._v("#")]),s._v(" yum源分类")]),s._v(" "),n("blockquote",[n("p",[s._v("要使用yum前,需要准备一个yum源/仓库, 可以是一个互联网上的仓库,也可以是本地自己搭建的仓库."),n("br"),s._v("\n仓库里面有什么呢?里面全部都是.rpm的软件包."),n("br"),s._v("\n一台linux,可以添加N多个yum源, 能搜索的软件包数量就是N个yum源之和..")])]),s._v(" "),n("p",[s._v("1> "),n("strong",[s._v("本地源:")]),s._v(" 把本地的文件夹做成了yum源"),n("br"),s._v("\n        方式一:\n             step1: 采集一系列相关的软件包放在本地某一个目录下;\n             step2: "),n("code",[s._v("yum install createrepo -y")]),s._v(" "),n("code",[s._v("createrepo 目录路径")]),s._v("\n                     -- 创建仓库,会在该目录下生成一个名为repodata的文件夹..用于存放依赖关系.\n             step3: 修改配置\n                  "),n("code",[s._v("vim /etc/yum.repo.d/仓库名.repo")]),s._v("   --- 必须以"),n("code",[s._v(".repo")]),s._v("结尾\n        方式二:  将镜像文件作为本地源\n2> "),n("strong",[s._v("网络源:")]),n("br"),s._v("\n        base基础源 -- 放置的是一些常用的软件包;"),n("br"),s._v("\n        epel扩展源  -- 放置的是一些扩展/额外的软件包;"),n("br"),s._v("\n        与服务相关的源(官网) -- 某一个软件包所在官网提供的源.. "),n("font",{attrs:{color:"gray"}},[s._v("eg: "),n("strong",[s._v("nginx官网")]),s._v("的软件包源")])],1),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("注意,能作为yum仓库必须具备两个前提:\n    该目录下存放了所有相关的软件包"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    该目录下必须有一个文件夹repodata记录该目录所包含软件包之间的依赖关系"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("便于yum解决依赖性问题.\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("hr"),s._v(" "),n("h2",{attrs:{id:"镜像文件作为本地源"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#镜像文件作为本地源"}},[s._v("#")]),s._v(" 镜像文件作为本地源")]),s._v(" "),n("h3",{attrs:{id:"step1-准备工作"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#step1-准备工作"}},[s._v("#")]),s._v(" step1: 准备工作")]),s._v(" "),n("blockquote",[n("p",[s._v("干掉系统默认的yum源")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n'),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("/etc/yum.repos.d/"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("目录下全是以"),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v(".repo"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("结尾的yum仓库配置文件"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\nyum命令在运行时会去检索这些配置文件"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n'),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd /etc/yum.repos.d/")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost yum.repos.d"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls")]),s._v("\nCentOS-Base.repo  CentOS-Debuginfo.repo  CentOS-Media.repo    CentOS-Vault.repo\nCentOS-CR.repo    CentOS-fasttrack.repo  CentOS-Sources.repo  CentOS-x86_64-kernel.repo\n\n"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n我们通常不会使用系统默认的这些yum仓库\n但删除不是好习惯'),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(" 我们选择使用mv命令移动下.让yum命令找不到就可以啦.\n\nPs: mv后,"),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("yum list"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("还有结果,列出的只是已经安装了的软件包"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(" 若安装未安装的软件包肯定是安装不了的"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n'),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost yum.repos.d"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mkdir bak")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 在yum.repos.d目录下执行命令 `mv bak/* .` 就可以还原回来啦")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost yum.repos.d"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mv *.repo bak/")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost yum.repos.d"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls")]),s._v("\nbak\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost yum.repos.d"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# pwd")]),s._v("\n/etc/yum.repos.d\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost yum.repos.d"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# yum repolist")]),s._v("\n已加载插件：fastestmirror, langpacks\nLoading mirror speeds from cached hostfile\nrepolist: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 验证结果不为0的话 yum clean all 清除下元数据缓存")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br")])]),n("h3",{attrs:{id:"step2-挂载镜像"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#step2-挂载镜像"}},[s._v("#")]),s._v(" step2: 挂载镜像")]),s._v(" "),n("blockquote",[n("p",[s._v("详见 "),n("code",[s._v("10_软件包管理之rpm.md")]),s._v(" 中挂载镜像这一部分内容..")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# df")]),s._v("\n文件系统                   1K-块    已用     可用 已用% 挂载点\ndevtmpfs                  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("480924")]),s._v("       "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("480924")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("% /dev\ntmpfs                     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("497820")]),s._v("       "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("497820")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("% /dev/shm\ntmpfs                     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("497820")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("27432")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("470388")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("% /run\ntmpfs                     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("497820")]),s._v("       "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("497820")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("% /sys/fs/cgroup\n/dev/mapper/centos-root "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("17811456")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5243408")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("12568048")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v("% /\n/dev/sda1                "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1038336")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("258412")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("779924")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("25")]),s._v("% /boot\ntmpfs                      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("99564")]),s._v("      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("36")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("99528")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("% /run/user/0\ntmpfs                      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("99564")]),s._v("       "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("99564")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("% /run/user/1001\n/dev/sr0                 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4600876")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4600876")]),s._v("        "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("% /opt\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls")]),s._v("\nCentOS_BuildTag  EULA  images   LiveOS   repodata    RPM-GPG-KEY-CentOS-Testing-7\nEFI    GPL   isolinux  Packages  RPM-GPG-KEY-CentOS-7  TRANS.TBL\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br")])]),n("h3",{attrs:{id:"step3-编辑repo文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#step3-编辑repo文件"}},[s._v("#")]),s._v(" step3: 编辑repo文件")]),s._v(" "),n("p",[s._v("仓库配置文件叫啥名并不重要,但后缀必须得是"),n("code",[s._v(".repo")]),n("br"),s._v("\n仓库配置文件里的baseurl属性值 "),n("em",[n("strong",[s._v("指定到repodata文件夹的父亲目录即可")])]),s._v(" ..跟rpm包在哪无关.."),n("br"),s._v(" "),n("font",{attrs:{color:"gray"}},[s._v("因为yum命令在执行时,会通过repodata里面的数据来找到软件包的位置及相关依赖..")])],1),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost yum.repos.d"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd /etc/yum.repos.d/")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost yum.repos.d"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls")]),s._v("\nbak\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost yum.repos.d"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim local.repo")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n'),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("local"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("                     "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 仓库的实际名字,任意")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("name")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"this is local repo"')]),s._v("   "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 仓库的描述,任意")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("baseurl")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("file:///opt         "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 仓库位置,一般会出现四种前缀 http:// https:// ftp:// file://")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("enabled")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("                   "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启用仓库, 默认enabled=1 不写也可以 ")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("gpgcheck")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("                  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 检查安装的rpm是否是合法的,通常设置为0,0表示不检验")]),s._v("\n\nPs: 配置本地源,"),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("file://"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("是固定开头,代表是从本地找.往后再跟repodata的父级目录路径 "),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("file:///opt"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n'),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost yum.repos.d"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat local.repo ")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("local"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("name")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"this is local repo"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("baseurl")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("file:///opt\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("enabled")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("gpgcheck")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br")])]),n("h3",{attrs:{id:"step4-查询可用仓库"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#step4-查询可用仓库"}},[s._v("#")]),s._v(" step4: 查询可用仓库")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 进行验证")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# yum repolist")]),s._v("\n已加载插件：fastestmirror, langpacks\nLoading mirror speeds from cached hostfile\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v("                                 "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.6")]),s._v(" kB  00:00:00     \n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": local/group_gz                 "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("153")]),s._v(" kB  00:00:00     \n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("/2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": local/primary_db               "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.3")]),s._v(" MB  00:00:00     \n源标识            源名称                状态\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v("        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"this is local repo"')]),s._v("     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4,070")]),s._v("\nrepolist: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4,070")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("h2",{attrs:{id:"开源的yum源-网络源"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#开源的yum源-网络源"}},[s._v("#")]),s._v(" 开源的yum源/网络源")]),s._v(" "),n("h3",{attrs:{id:"base基础源"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#base基础源"}},[s._v("#")]),s._v(" Base基础源")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"▲ Base基础源\n阿里云的Base基础源:\n  '),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-O")]),s._v(" /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("163")]),s._v("的Base基础源:\n  "),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-O")]),s._v(" /etc/yum.repos.d/CentOS-Base.repo http://mirrors.163.com/.help/CentOS7-Base-163.repo"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n'),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-08-11 06:42:38 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("54.8")]),s._v(" KB/s"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" - 已保存 “/etc/yum.repos.d/CentOS-Base.repo” "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2523")]),s._v("/2523"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd /etc/yum.repos.d/")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost yum.repos.d"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls")]),s._v("\nbak  CentOS-Base.repo  local.repo\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("h3",{attrs:{id:"epel扩展源"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#epel扩展源"}},[s._v("#")]),s._v(" epel扩展源")]),s._v(" "),n("blockquote",[n("p",[s._v("EPEL是由 Fedora 社区打造, 为 RHEL 及衍生发行版如 CentOS、Scientific Linux 等提供高质量软件包的项目.  装上了 EPEL之后,就相当于添加了一个第三方源.  但提供的版本往往是很滞后的,因为安全稳定是重点..")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"▲ epel扩展源\n阿里云的epel扩展源如下:'),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("用wget命令也可以"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-o")]),s._v(" /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-7.repo"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n也可以通过安装epel-release软件包来自动生成扩展源:\n  "),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("yum "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" epel-release "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n'),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost yum.repos.d"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# yum install epel-release -y ")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost yum.repos.d"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls")]),s._v("\nbak  CentOS-Base.repo  epel.repo  epel-testing.repo  local.repo\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("h3",{attrs:{id:"配置nginx官网源"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#配置nginx官网源"}},[s._v("#")]),s._v(" 配置nginx官网源")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 可以看到epel扩展源里也提供了nginx的软件包 ")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 但版本1.20.1也不是nginx稳定版最新的(epel源提供的版本往往会比较滞后 当前官网最新的稳定版本是1.22.0)..")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost yum.repos.d"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# yum list | grep nginx.x86_64")]),s._v("\ncollectd-nginx.x86_64                    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.8")]),s._v(".1-1.el7                   epel     \nnginx.x86_64                             "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(":1.20.1-9.el7                epel     \npcp-pmda-nginx.x86_64                    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.3")]),s._v(".2-13.el7_9                updates  \nsympa-nginx.x86_64                       "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6.2")]),s._v(".68-1.el7                  epel \n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("p",[s._v("从官网配置nginx的rpm源的步骤解析如下:"),n("br"),s._v("\n1> 输入网址"),n("code",[s._v("https://nginx.org/")]),s._v(",点击右边栏中的"),n("code",[s._v("download")]),n("br"),s._v("\n2> Mainline version 官方维护版本; Stable version 稳定版本; Legacy versions历史版本;"),n("br"),s._v("\n     Source Code 源代码; Pre-Built Packages 预构建包.. "),n("strong",[s._v("点击 Pre-Built Packages")]),n("br"),s._v(" "),n("font",{attrs:{color:"gray"}},[s._v("Mainline、Stable、Legacy下载的都是源码包!! ")]),n("br"),s._v("\n3> 往下滑, 直到 RHEL/CentOS 小节.. 按照官方提示进行操作..")],1),s._v(" "),n("p",[n("img",{attrs:{src:t(495),alt:""}})]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n'),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("nginx-stable"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" 稳定版本"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("nginx-mainline"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" 维护版本\n我们通常会使用稳定版本"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("所以前者enabled的值为1,后者为0.\n\nhttp://nginx.org/packages/centos/"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$releasever")]),s._v("/"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$basearch")]),s._v("/\n"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$releasever")]),s._v(" 系统的发行版本"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("当前环境是7"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$basearch")]),s._v(" \t架构"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("当前环境是x86_64"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n两个变量都根据所在平台不同动态获取值"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\n\nPs:输入网址"),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("http://nginx.org/packages/centos/7/x86_64/"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("可以发现当前路径下有repodata文件夹"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\n   佐证了 baseurl属性值指定到repodata文件夹的父亲目录即可 这一结论"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n'),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost yum.repos.d"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls")]),s._v("\nbak  CentOS-Base.repo  epel.repo  epel-testing.repo  local.repo\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost yum.repos.d"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim nginx.repo")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost yum.repos.d"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat nginx.repo ")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("nginx-stable"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" \n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("name")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("nginx stable repo \n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("baseurl")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("http://nginx.org/packages/centos/"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$releasever")]),s._v("/"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$basearch")]),s._v("/ \n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("gpgcheck")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" \n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("enabled")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" \n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("gpgkey")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("https://nginx.org/keys/nginx_signinz.key \n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("module_hotfixes")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true \n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("nginx-mainline"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" \n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("name")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("nginx mainline repo \n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("baseurl")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("http://nginx.org/packages/mainline/centos/"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$releasever")]),s._v("/"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$basearch")]),s._v("/ \n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("gpgcheck")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" \n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("enabled")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" \n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("gpgkey")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("https://nginx.org/keys/nginx_signing.key \n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("module_hotfixes")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost yum.repos.d"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost yum.repos.d"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# yum repolist | grep nginx")]),s._v("\nnginx-stable/7/x86_64   nginx stable repo     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("280")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n若安装nginx过程中,出错提示 获取 GPG 密钥失败\n执行命令'),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--import")]),s._v(" https://nginx.org/keys/nginx_signing.key"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("后再安装"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\nyum remove nginx-* '),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 保持环境的干净")]),s._v("\nyum "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" nginx "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 安装的是nginx官网源里的(因为nginx官网源里的版本比epel源里的高)")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br")])]),n("p",[n("strong",[s._v("补充:")]),s._v(" 执行"),n("code",[s._v("yum install nginx-* -y")]),s._v(", 试图下载nginx官方源里相关安装包, 在此过程中报错的解决...")]),s._v(" "),n("p",[n("font",{attrs:{color:"blue"}},[s._v("简单来说,epel源与官方源冲突,干掉epel源再安装; 官方源安装过程中缺少的依赖通过epel源下载安装..Hhhh.")])],1),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n当前有阿里云的Base基础源、阿里云的epel源、镜像文件的本地源、nginx的官方源\n'),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n'),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost yum.repos.d"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls")]),s._v("\nbak  bak1  CentOS-Base.repo  epel.repo  epel.repo.rpmsave local.repo  nginx.repo\n\n"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"▲ 做了个实验,只留下nginx的官方源\n'),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("执行"),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("yum "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" nginx "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("命令\n   只下载了安装nginx-1.22.0-1.el7.ngx.x86_64.rpm包"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(" \n   不是废话嘛,指定下载的软件包名就是nginx,只不过该软件包没有依赖罢了"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")]),s._v("执行"),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("yum "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" nginx* "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("命令\n   理论上会下载nginx的官方源中所有的最新版本的rpm包\n   "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("举个抽象的例子 有四个rpm包 A-1.0.1 A.1.0.2 B-1.1.2 B-1.1.3 最终只会下载A.1.0.2和B-1.1.3"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n   试着执行命令,但中途报错啦"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("报错如下:\n   "),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("nginx-nr-agent-2.0.0-12.el7.ngx.noarch "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("nginx-stable"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("软件包需要依赖 python-daemon"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n   python-daemon包nginx的官方源没有"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("可以访问http://nginx.org/packages/centos/7/x86_64/RPMS/,下面全是nginx开头的rpm包,没有其他的"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n解决的话就需要epel扩展源的帮忙"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n\n'),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"▲ 不动yum源 包含epel源和nginx官方源\n'),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n执行'),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("yum "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" nginx* "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("命令,依旧会下载nginx官方源那个软件包,报那个错误,所以先解决下"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("yum "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" python-daemon"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("通过epel扩展源解决了依赖包的下载安装\n\n继续满怀期望的执行"),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("yum "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" nginx* "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("发现,冲突啦"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\nepel源里的软件包版本跟nginx官方源里软件包版本依赖相关冲突导致的"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("阿巴阿巴,反正就是冲突啦.\n\n解决:\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd /etc/yum.repos.d/")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost yum.repos.d"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls")]),s._v("\nbak  bak1  CentOS-Base.repo  epel.repo  epel.repo.rpmsave  local.repo  nginx.repo\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 其实也可以使用命令 `yum-config-manager --disable 仓库名` 关闭指定仓库..")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost yum.repos.d"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mv epel* bak1")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost yum.repos.d"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls")]),s._v("\nbak  bak1  CentOS-Base.repo  local.repo  nginx.repo\n\n再执行"),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("yum "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" nginx* "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("将nginx官方源里的软件包全部下载下来.\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br")])]),n("hr"),s._v(" "),n("h2",{attrs:{id:"制作yum本地源"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#制作yum本地源"}},[s._v("#")]),s._v(" 制作yum本地源")]),s._v(" "),n("blockquote",[n("p",[s._v("前面我们实现了将镜像文件作为本地源,因为镜像文件里有repodata文件夹,所以省去了一些步骤.."),n("br"),s._v("\n因为制作个yum本地源这是个"),n("strong",[s._v("重点")]),s._v(",所以这里单独进行阐述!")])]),s._v(" "),n("p",[s._v("在生产环境中,通常会自己做一个yum源!! 保证集群中每台机器的软件包版本的高度一致!"),n("br"),s._v(" "),n("font",{attrs:{color:"gray"}},[s._v("集群的每台机子的网络源一样也不好使.. 因为网络源在别个手中,一改动.. 添加新机子的时候, 就容易出问题.")])],1),s._v(" "),n("p",[s._v("前文在yum命令那里提到了元数据缓存跟软件包内容的缓存.."),n("br"),s._v("\n将"),n("code",[s._v("/etc/yum.conf")]),s._v("的keepcache属性值改为1后, 软件包安装完成yum不再自动删除软件包,会缓存到指定路径..")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost yum.repos.d"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim /etc/yum.conf")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("main"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("cachedir")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/var/cache/yum/"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$basearch")]),s._v("/"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$releasever")]),s._v(" \t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## -- 默认的软件包缓存路径 可改")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("keepcache")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n\n"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n本地源的好处:将软件包的版本牢牢的控制到了自己的手里'),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("速度也会快一些.\n"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("p",[s._v("假设要在一套测试环境中要部署k8s docker集群架构..具体操作如下:"),n("br"),s._v("\n     1.给测试环境中每台机子用同一个镜像安装OS系统.保证os的一致."),n("br"),s._v("\n     2.刚安装完os系统时,每台机子都统一执行 "),n("code",[s._v("yum update -y")]),s._v(" 操作.."),n("br"),s._v("\n     3.将测试环境中的每台机子/每个节点的keepcache属性值都设置为1,即开启软件包缓存."),n("br"),s._v(" "),n("code",[s._v("rm -rf /var/cache/yum/*")]),s._v("  -- 保持环境的干净"),n("br"),s._v(" "),n("code",[s._v("vim /etc/yum.conf")]),s._v(" 设置 keepcache=1"),n("br"),s._v("\n     4.配置网络源(bash+epel+官方),部署过程中安装的软件包会全部缓存到本地.."),n("br"),s._v("\n             等整套测试环境都调试ok啦.."),n("br"),s._v("\n     5.将测试环境中每台机子上缓存好的软件包全都采集到一起."),n("br"),s._v("\n             假设放到名为/soft的文件夹下,有重复的就覆盖.  以一台机子为例.."),n("br"),s._v(" "),n("code",[s._v('find /var/cache/yum -type f -name "*.rpm" | xargs -I {} mv {} /soft/')]),n("br"),s._v("\n     6.最后针对这个文件夹做"),n("code",[s._v("createrepo /soft")]),s._v("建立依赖性关系. 在"),n("code",[s._v("/soft")]),s._v("下会生成"),n("code",[s._v("repodata")]),s._v("文件夹..")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("后续在完成yum本地源共享后,在线上的机子"),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("/etc/yum.repos.d/"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("下配置 .repo结尾的本地源"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("配置时注意repodata目录的位置以便于设置正确的baseurl属性值"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n/soft文件夹作为线上环境的一个yum源"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("不要轻易升级,不要滥用yum源,这样可以严格控制好各个服务的版本\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("hr"),s._v(" "),n("h2",{attrs:{id:"本地源共享"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#本地源共享"}},[s._v("#")]),s._v(" 本地源共享")]),s._v(" "),n("blockquote",[n("p",[s._v("有两种方式 "),n("strong",[s._v("http://")]),s._v(" 和 "),n("strong",[s._v("ftp://")]),s._v(" 完成文件的上传和下载, 这里以ftp为例.."),n("br"),s._v("\nPs: http超文本传输协议; ftp文件传输协议")])]),s._v(" "),n("h3",{attrs:{id:"服务端上的操作"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#服务端上的操作"}},[s._v("#")]),s._v(" 服务端上的操作")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"环境准备\n'),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n'),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# systemctl stop firewalld      ## -- 关闭防火墙")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# systemctl disable firewalld   ## -- 开机不启动防火墙")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# setenforce 0\t\t## -- 临时关闭SElinux 配置文件里是没有修改的!")]),s._v("\nsetenforce: SELinux is disabled     "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## -- 这里提示selinux目前是禁用状态,不必关闭")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 当然可以用 vim /etc/sysconfig/selinux 在文件中修改 SELINUX=disabled")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# sed -i 's#^SELINUX=.*#SELINUX=disabled#g' /etc/selinux/config   ")]),s._v("\n\n\n"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"安装ftp服务\n'),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n'),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 在挂载的镜像文件里就有vsftpd")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 当然可通过命令 yum install vsftpd -y 下载安装")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rpm -ivh /opt/Packages/vsftpd-3.0.2-28.el7.x86_64.rpm ")]),s._v("\n准备中"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".                          "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("################################# [100%]")]),s._v("\n正在升级/安装"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(":vsftpd-3.0.2-28.el7              "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("################################# [100%]")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# systemctl start vsftpd\t\t## -- 开启ftp服务")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# systemctl status vsftpd\t\t## -- 查看ftp服务状态")]),s._v("\n● vsftpd.service - Vsftpd "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ftp")]),s._v(" daemon\n   Loaded: loaded "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("/usr/lib/systemd/system/vsftpd.service"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" disabled"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n   Active: active "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("running"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" since 四 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-08-11 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(":13:49 CST"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" 8s ago\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# systemctl enable vsftpd\t\t## -- 设置开机自启动")]),s._v("\nCreated symlink from /etc/systemd/system/multi-user.target.wants/vsftpd.service to /usr/lib/systemd/system/vsftpd.service.\n\n\n"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"制作yum源\n'),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n在前面我们成功执行'),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("yum "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" nginx* "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("将nginx官方源里的软件包全部下载下来.\n并成功缓存到了路径"),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("/var/cache/yum"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("下. 在根目录下建立 "),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" /soft"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(" 文件夹\n执行"),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" /var/cache/yum "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-type")]),s._v(" f "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-name")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"*.rpm"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("xargs")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-I")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" /soft/"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("命令\n成功将缓存的软件包采集到了 /soft目录下\n执行"),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("createrepo /soft"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("命令建立依赖性关系.在"),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("/soft"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("下会生成了"),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("repodata"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("文件夹.\n\n"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"ftp服务共享文件夹\n'),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" ftp://172.16.150.131 指向的就是 /var/ftp\n"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n'),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 将/soft文件夹移动到ftp服务自带的共享文件夹里  本质就是通过套接字程序共享")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 实际上严谨点,缓存的软件包通过find命令找到后应该xargs到/var/ftp/pub目录下")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mv /soft/ /var/ftp")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls /var/ftp")]),s._v("\npub  soft\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ifconfig ens33 | grep inet")]),s._v("\n        inet "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.16")]),s._v(".150.131  netmask "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("255.255")]),s._v(".255.0  broadcast "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.16")]),s._v(".150.255\n        inet6 fe80::20c:29ff:fe90:303e  prefixlen "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v("  scopeid 0x2"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("0")]),s._v("<")]),s._v("link"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br")])]),n("h3",{attrs:{id:"客户端上的操作"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#客户端上的操作"}},[s._v("#")]),s._v(" 客户端上的操作")]),s._v(" "),n("blockquote",[n("p",[s._v("主要两点, 客户端要跟服务端的OS版本以及架构一致;ftp服务要ping通!!!")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n同理,关防火墙关selinux\nping一下服务端的ip地址,保证网络畅通'),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("这很重要.\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("实际上因为vm虚拟机与主机桥接模式的缘故,能ping通 在同一个网段应该能互ping 在此不深究啦"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\nOne_Piece@DCdeMacBook-Air ~ % '),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ping")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.16")]),s._v(".150.131\nPING "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.16")]),s._v(".150.131 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.16")]),s._v(".150.131"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("56")]),s._v(" data bytes\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" bytes from "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.16")]),s._v(".150.131: "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("icmp_seq")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ttl")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("time")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.650")]),s._v(" ms\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" bytes from "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.16")]),s._v(".150.131: "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("icmp_seq")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ttl")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("time")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.604")]),s._v(" ms\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" bytes from "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.16")]),s._v(".150.131: "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("icmp_seq")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ttl")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("time")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.648")]),s._v(" ms\n^C\n--- "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.16")]),s._v(".150.131 "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ping")]),s._v(" statistics ---\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" packets transmitted, "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" packets received, "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("% packet loss\nround-trip min/avg/max/stddev "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.604")]),s._v("/0.634/0.650/0.021 ms\n\n"),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /etc/yum.repos.d/"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" ftp.repo"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(" 写入以下内容"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("  就可以使用yum命令使用该源里面的包啦\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ftp_repo"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nname "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" This is Ftp Share Repo\nbaseurl "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" ftp://172.16.150.131/soft  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 该路径下有个repodata文件夹")]),s._v("\nenabled "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\ngpgcheck "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\n此时这台机器就可以使用共享的源安装nginx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n但要注意,若集群中的这台机器跟共享本地源的那台机器的os版本、架构不一样的话"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("会安装失败"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\n因为共享源的那台机器是根据它自身的情况缓存的软件包"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$releasever")]),s._v(" OS版本 "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$basearch")]),s._v(" 架构\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br")])]),n("hr"),s._v(" "),n("h2",{attrs:{id:"源码包"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#源码包"}},[s._v("#")]),s._v(" 源码包")]),s._v(" "),n("p",[s._v("以nginx源码包的安装为例, 依次进行以下步骤:")]),s._v(" "),n("p",[n("img",{attrs:{src:t(496),alt:""}})]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("▲ "),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("1")]),s._v(">")]),s._v(" 安装源码包对应的编译器以及相关依赖库\n"),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("yum grouplist"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(" 看一下是否支持中文\n"),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("yum groupinstall "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Development tools"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" yum groupinstall "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"开发工具"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v("\n保险起见,怕"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"开发工具"')]),s._v("里没包含这些依赖包,再执行下下面两条命令\nyum "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" gcc gcc-c++ autoconf automake "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v("\nyum "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" zlib zlib-devel openssl openssl-devel pcre pcre-devel\n\n▲ "),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("2")]),s._v(">")]),s._v(" 下载源码包\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" ~\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://nginx.org/download/nginx-1.22.0.tar.gz\n\n▲ "),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("3")]),s._v(">")]),s._v(" 解压\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" xvf nginx-1.22.0.tar.gz "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-C")]),s._v(" /tmp/\n\n▲ "),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("4")]),s._v(">")]),s._v(" 进行编译 -- 生成makefile文件\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /tmp/nginx-1.22.0/  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 该目录下有个configure程序可以进行配置")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"./configure \n参考地址: https://nginx.org/en/docs/configure.html\n'),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--prefix")]),s._v(" 指定安装的目录\n\t\t\t\t 这里指定的路径是 /usr/local/nginx-1.22.0,最终会在此目录下包含一堆可执行的二进制命令\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n这儿笼统的将所以的配置都放到/usr/local/nginx-1.22.0下,不分那么的细了"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n'),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 若此命令报错,只可能是因为缺少依赖库")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 报错后,一定要先执行命令 make clean all,再解决依赖包的问题 于此往复,直至不报错")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost nginx-1.22.0"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#./configure  --prefix=/usr/local/nginx-1.22.0")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\nConfiguration summary\n  + using system PCRE library\n  + OpenSSL library is not used\n  + using system zlib library\n  nginx path prefix: "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/usr/local/nginx-1.22.0"')]),s._v("\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## -- 安装路径")]),s._v("\n  nginx binary file: "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/usr/local/nginx-1.22.0/sbin/nginx"')]),s._v("\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## -- nginx程序")]),s._v("\n  nginx modules path: "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/usr/local/nginx-1.22.0/modules"')]),s._v("\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## -- 模块路径")]),s._v("\n  nginx configuration prefix: "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/usr/local/nginx-1.22.0/conf"')]),s._v("\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## -- 配置文件")]),s._v("\n  nginx configuration file: "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/usr/local/nginx-1.22.0/conf/nginx.conf"')]),s._v("\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## -- 主配置文件")]),s._v("\n  nginx pid file: "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/usr/local/nginx-1.22.0/logs/nginx.pid"')]),s._v("\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## -- pid")]),s._v("\n  nginx error log file: "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/usr/local/nginx-1.22.0/logs/error.log"')]),s._v("\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## -- 错误日志")]),s._v("\n  nginx http access log file: "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/usr/local/nginx-1.22.0/logs/access.log"')]),s._v("\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## -- 访问日志")]),s._v("\n  nginx http client request body temporary files: "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"client_body_temp"')]),s._v("\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## -- 临时文件")]),s._v("\n  nginx http proxy temporary files: "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"proxy_temp"')]),s._v("\n  nginx http fastcgi temporary files: "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"fastcgi_temp"')]),s._v("\n  nginx http uwsgi temporary files: "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"uwsgi_temp"')]),s._v("\n  nginx http scgi temporary files: "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"scgi_temp"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 生成了Makefile编译文件")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost nginx-1.22.0"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls")]),s._v("\nauto  CHANGES  CHANGES.ru  conf  configure  contrib  html  LICENSE  Makefile  "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("man")]),s._v("  objs  README  src\n\n▲ 安装\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-rf")]),s._v(" /tmp/nginx-1.22.0/  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 清理安装包")]),s._v("\n\n▲ 运行\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local/nginx-1.22.0\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost nginx-1.22.0"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ps aux | grep nginx")]),s._v("\nroot      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("75065")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20576")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("616")]),s._v(" ?        Ss   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":33   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":00 nginx: master process /usr/local/nginx-1.22.0/sbin/nginx\nnobody    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("75066")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.1")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("23104")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1372")]),s._v(" ?        S    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":33   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":00 nginx: worker process\nroot      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("75153")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("112824")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("988")]),s._v(" pts/0    R+   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":35   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":00 "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--color")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("auto nginx\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br")])]),n("p",[n("font",{attrs:{color:"brown"}},[s._v("源码安装后,做一点点优化!")])],1),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mkdir /soft/")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ln -s /usr/local/nginx-1.22.0/ /soft/nginx")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll -d /soft/nginx/")]),s._v("\ndrwxr-xr-x "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(" root root "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("151")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("月  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":33 /soft/nginx/\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll -d /soft/nginx")]),s._v("\nlrwxrwxrwx "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("月  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":43 /soft/nginx -"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /usr/local/nginx-1.22.0/\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls /soft/nginx/")]),s._v("\nclient_body_temp  conf  fastcgi_temp  html  logs  proxy_temp  sbin  scgi_temp  uwsgi_temp\n\n用软链接一通操作,便于以后的升级"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("具体操作如下:\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("1")]),s._v(">")]),s._v(" 原来安装的是nginx1.22的版本,并软链接到了 /soft/nginx目录下"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("2")]),s._v(">")]),s._v(" 现在要升级nginx,先安装nginx1.3的版本到默认路径/usr/local下\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("3")]),s._v(">")]),s._v(" 删除软链接/soft/nginx/下的内容\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("4")]),s._v(">")]),s._v(" 将新安装的nginx与/soft/nginx建立软链接\n这样的话,系统中关于nginx的配置文件,要用nginx的地方路径依旧是 /soft/nginx/"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". 没必要更改"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br")])]),n("hr")])}),[],!1,null,null,null);a.default=e.exports},495:function(s,a,t){s.exports=t.p+"assets/img/nginx_rpm.3d46b763.jpeg"},496:function(s,a,t){s.exports=t.p+"assets/img/nginx.2103fb44.jpeg"}}]);