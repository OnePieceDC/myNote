(window.webpackJsonp=window.webpackJsonp||[]).push([[161],{1185:function(s,t,n){"use strict";n.r(t);var a=n(0),e=Object(a.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"储备知识"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#储备知识"}},[s._v("#")]),s._v(" 储备知识")]),s._v(" "),a("blockquote",[a("p",[s._v("我们得弄清 cookies、session、token 到底是什么？!"),a("br"),s._v("\n参考文档: "),a("font",{attrs:{color:"brown"}},[a("code",[s._v("https://www.cnblogs.com/liuqingzheng/articles/8990027.html")])])],1)]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[s._v("何为会话?\n会话"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("广义的含义是指有始有终的一系列动作"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("消息"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n在web中"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("会话对象用来存储特定用户会话所需的属性及配置信息!\n\nHTTP协议是无状态协议?\n无状态协议即无法保持会话之间的状态"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("服务端不晓得客户端是什么状态"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\nHTTP请求是无状态的"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("每次都是新的请求!\n举个例子"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("成功登陆一个网站"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("当访问该网站的其它网页时"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("该登陆状态会消失!需要重新登陆一次"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n此时"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("我们需要将对应的会话信息"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("eg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("登陆成功的信息等"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("保存下来 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" Cookie 或 Session!\n\n会话信息的保存"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    cookie 客户端  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  session 服务端  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  token 客户端\n    注意"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("不管是cookie还是token"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("只要保存在客户端的信息"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("我们都统称为cookie信息"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n    \n无cookie时期 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" 静态网站\ncookie认证时期 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" 在线购物网站、需要登录的网站等\n    当一个浏览器访问某web服务器时\n    web服务器会在响应头中添加一个名叫Set"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Cookie的响应字段"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("用于将Cookie返回给浏览器\n    当浏览器第二次访问该web服务器时会自动的将该cookie回传给服务器"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("来实现用户状态跟踪!!\n    弊端"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" \n       尽管浏览器发送登陆信息"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("pwd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("会加密发送到服务端"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n       进而服务端返还给客户端的cookie中包含的是客户端"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("浏览器加密的密码"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n       但cookie中始终包含着pwd这些用户的敏感信息"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v(" \n       不管是用户首次登陆发送给S端的数据包"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("还是C"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("S的cookie"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("黑客截获后可以通过撞库破解"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n    为了降低风险"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("我们可以将C"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("S的cookie信息中不包含pwd等用户的敏感信息\ncookie"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("session认证时期\n    打个比方"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("将自己比作服务端"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("给大家发一个会话标识"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("session "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("id")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("说白了就是一个随机的字串\n    每个人收到的都不一样"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("每次大家向我发起HTTP请求的时候"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("把这个session字串放到cookie中一并捎过来\n    我在服务端将其与存储的session进行比对"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("这样我就能区分开谁是谁了!\n    弊端"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" 每个人只需要保存自己的session "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("id")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("而服务器要保存所有人的session "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("id")]),s._v(" ！\n           随着访问服务端的用户增多"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("S端存储的session也会变多!\n        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" 若同时有"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("万个并发访问S端"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("S端收到了"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("万份包含了session的cookie"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("需要一一进行比对"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" 倘若用两个机器组成了一个集群"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("小F通过机器A登录了系统"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("那session "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("id")]),s._v("会保存在机器A上\n           假设小F的下一次请求被转发到机器B怎么办?机器B可没有小F的 session "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("id")]),s._v("啊"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n           限制了集群的水平扩展"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n           解决办法"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" \n              session sticky\n                就是让小F的请求一直粘连在机器A上"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("但是这也不管用"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("要是机器A挂掉了"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("还得转到机器B去"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n              session的复制\n                把session "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("id")]),s._v("在两个机器之间搬来搬去!\n              session的集群\n                将多台服务器的session集中管理"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("放到一处"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("并对该session做集群"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("避免单点故障"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\nToken \n服务端为什么要保存这可恶的session呢"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("只让每个客户端去保存该多好!\nSo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("Token用计算换取了空间!\n    小F已经成功登录系统"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("我给他发一个令牌"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("token"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("里边包含了小F的user "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("id")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("并对该数据做一个签名\n       比如说我用HMAC"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("SHA256算法"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("加上一个只有我才知道的密钥"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("对数据做一个签名\n    把 这个签名和数据一起作为token `即签名"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("数据"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("token` 发送给C端"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("由于密钥别人不知道"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("就无法伪造token了!!\n    这个token我不保存"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("当小F把这个token给我发过来的时候"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("我再用同样的HMAC"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("SHA256算法和同样的密钥\n    对数据再计算一次签名和token中的签名做个比较\n    若相同"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("我就知道小F已经登录过了"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("并且可以直接取到小F的user "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("id")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    若不相同"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("数据部分肯定被人篡改过"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("我就告诉发送者"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("对不起"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("没有认证!\nPs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("Token移动端也可以用!\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br")])]),a("hr"),s._v(" "),a("h2",{attrs:{id:"仿优酷项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#仿优酷项目"}},[s._v("#")]),s._v(" 仿优酷项目")]),s._v(" "),a("blockquote",[a("p",[s._v("该项目涵盖内容: 线程池, 锁机制, session验证机制, 简易版orm, 大文件md5校验, 数据库操作")])]),s._v(" "),a("h5",{attrs:{id:"系统架构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#系统架构"}},[s._v("#")]),s._v(" 系统架构")]),s._v(" "),a("p",[a("img",{attrs:{src:n(450),alt:""}})]),s._v(" "),a("p",[a("font",{attrs:{color:"gray"}},[s._v("Ps: 偷个懒吧,不想画图!!直接拍照完事. 随缘画法.")])],1),s._v(" "),a("h5",{attrs:{id:"创建表"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建表"}},[s._v("#")]),s._v(" 创建表")]),s._v(" "),a("blockquote",[a("p",[s._v("用sql语句 or 用工具创建表")])]),s._v(" "),a("p",[a("font",{attrs:{color:"brown"}},[s._v("Ps: 加` `是为了表明它不是关键字,若不加,美化后,它就变成大写的了!")]),a("br"),s._v('\n用工具创建类型为timestamp的字段时,若勾选"根据当前时间更新",添加和修改数据时,都会更新时间!')],1),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 关掉外键约束,表明不用做外键检查,两表有外键关联,也能删除!")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" foreign_key_checks "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 若表已存在,删除.")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("drop")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("exists")]),s._v(" user_info"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("movie"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("notice"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("download_record"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" \n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 用户表")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" user_info "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n\tid "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIMARY")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("KEY")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("auto_increment")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token identifier"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("32")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token identifier"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("password"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\tis_vip "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("                 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 是否是会员 ")]),s._v("\n\tlocked "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("                 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 是否锁定")]),s._v("\n\tuser_type "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("32")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 管理员还是普通用户")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENGINE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INNODB")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("charset")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'utf8'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 视频表")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" movie "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n\tid "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIMARY")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("KEY")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("auto_increment")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token identifier"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("32")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token identifier"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\tis_free "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 是否收费")]),s._v("\n\tis_delete "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\tcreate_time "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TIMESTAMP")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CURRENT_TIMESTAMP")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 自动添加当前时间戳为上传时间.")]),s._v("\n\tuser_id "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("                "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 谁上传的视频")]),s._v("\n\tfile_md5 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("charset")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'utf8'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 公告表")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" notice "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" \n\tid "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIMARY")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("KEY")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("auto_increment")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n\t"),a("span",{pre:!0,attrs:{class:"token identifier"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n\tcontent "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n\tcreate_time "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TIMESTAMP")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CURRENT_TIMESTAMP")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n\tuser_id "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INT")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("charset")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'utf8'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 下载记录表")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" download_record "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" \n\tid "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIMARY")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("KEY")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("auto_increment")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n\tuser_id "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\tmovie_id "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INT")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("charset")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'utf8'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br")])]),a("h5",{attrs:{id:"搭建项目目录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#搭建项目目录"}},[s._v("#")]),s._v(" 搭建项目目录")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n├── youkuClient\n│   ├── conf\n│   │   └── setting"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("py     \n│   ├── core\n│   │   ├── admin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("py       "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -- 管理员视图相关功能函数")]),s._v("\n│   │   ├── src"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("py         "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -- 主视图")]),s._v("\n│   │   └── user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("py        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -- 用户视图相关功能函数")]),s._v("\n│   ├── lib\n│   │   └── common"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("py      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -- 存放公共方法")]),s._v("\n│   ├── start"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("py           "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -- 启动文件")]),s._v("\n│   └── tcpClient\n│       └── tcp_client"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("py  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -- 客户端连接")]),s._v("\n└── youkuServer\n    ├── conf\n    │   └── setting"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("py\n    ├── db\n    │   └── models"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("py            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -- 数据库表对应程序中的类")]),s._v("\n    ├── interface\n    │   ├── admin_interface"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("py   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -- 管理员相关操作的接口")]),s._v("\n    │   ├── common_interface"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("py  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -- 公共操作的相关接口(登录,注册)")]),s._v("\n    │   └── user_interface"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("py    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -- 用户相关操作的接口")]),s._v("\n    ├── lib\n    │   └── common"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("py\n    ├── start"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("py\n    └── tcpServer\n        └── tcp_server"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("py\n      \n      \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n├── youkuClient\n│   ├── conf\n│   │   └── setting"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("py     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -- 配置信息相关")]),s._v("\n│   ├── core\n│   │   ├── admin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("py       "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -- 管理员视图相关功能函数")]),s._v("\n│   │   ├── src"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("py         "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -- 主视图")]),s._v("\n│   │   └── user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("py        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -- 用户视图相关功能函数")]),s._v("\n│   ├── download_movie     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -- 存放下载完的电影")]),s._v("\n│   ├── lib\n│   │   └── common"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("py      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -- 存放公共方法")]),s._v("\n│   ├── start"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("py           "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -- 启动文件")]),s._v("\n│   ├── tcpClient          "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -- 存放要上传的电影")]),s._v("\n│   │   └── tcp_client"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("py  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -- 客户端连接")]),s._v("\n│   └── upload_movie\n└── youkuServer\n    ├── conf\n    │   └── setting"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("py\n    ├── db\n    │   └── models"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("py\n    ├── interface\n    │   ├── admin_interface"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("py   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -- 管理员相关操作的接口")]),s._v("\n    │   ├── common_interface"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("py  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -- 公共操作的相关接口(登录,注册)")]),s._v("\n    │   └── user_interface"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("py    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -- 用户相关操作的接口")]),s._v("\n    ├── lib\n    │   └── common"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("py\n    ├── movie_list\n    ├── orm_pool                 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -- 简易版的ORM框架")]),s._v("\n    │   ├── db_pool"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("py\n    │   ├── mysql_conn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("py\n    │   └── todo_orm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("py\n    ├── start"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("py\n    └── tcpServer\n        ├── tcp_server"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("py        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -- 服务端核心代码")]),s._v("\n        └── use_data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("py          "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -- 存放用户信息和全局锁")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br")])]),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[s._v("ORM框架\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" 定义字段类表示表中的列\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" 实现不用写__init__"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("类实例化时可以传任意类型的k"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("v"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("把参数放到实例对象的体内 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" 字典\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" 实现字典对象通过 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v(" 访问到属性 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" __getattr__、__setattr__\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" 用一个类表示数据库当中的一个表"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("所有的类都得具备表的几个属性"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("表名、主键、一堆字段"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n      但这些属性的值每张表都不相同"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("通过控制类的创建过程"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("让类创建好后就有这几个东西 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" 元类\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" 不写sql 类对应数据库当中的表"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("类的一个实例对应表中的一条数据\n      查询所有数据 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" 类方法\n      更新、新增 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" 实例绑定方法\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("构建sql语句、pymysql接口返回结果"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" 数据库连接池\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("hr")])}),[],!1,null,null,null);t.default=e.exports},450:function(s,t,n){s.exports=n.p+"assets/img/23.c53d20c0.jpeg"}}]);