(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{1061:function(t,s,a){t.exports=a.p+"assets/img/image-20240220185110975.77991d31.png"},1062:function(t,s,a){t.exports=a.p+"assets/img/image-20240220195607310.05d09478.png"},1063:function(t,s,a){t.exports=a.p+"assets/img/image-20240221120155022.7b31914f.png"},1064:function(t,s,a){t.exports=a.p+"assets/img/image-20240221190746193.8e874be0.png"},1065:function(t,s,a){t.exports=a.p+"assets/img/image-20240221191042021.8b15cd84.png"},1066:function(t,s,a){t.exports=a.p+"assets/img/image-20240221193149125.388fa437.png"},1067:function(t,s,a){t.exports=a.p+"assets/img/image-20240221223626863.01162608.png"},1068:function(t,s,a){t.exports=a.p+"assets/img/image-20240221224152793.7a456f1c.png"},1335:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h2",{attrs:{id:"导言"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#导言"}},[t._v("#")]),t._v(" 导言")]),t._v(" "),n("blockquote",[n("p",[t._v("接下来我们要做什么?! 做一个承上启下的工作.")])]),t._v(" "),n("p",[n("font",{attrs:{color:"blue"}},[t._v("整个供应链项目大致分为三部分进行开发:")]),n("br"),t._v("\n1 part - 面向供应链的web端 --\x3e 用户端(供应商)"),n("br"),t._v("\n2 part - 后台管理web端 --\x3e 管理员使用"),n("br"),t._v("\n3 part - 小程序 or App --\x3e 用户端(司机)"),n("br"),t._v("\n(´･Д･)」 现目前,基本完成了第一趴的工作, 接着开始后台管理的开发工作!!")],1),t._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[t._v("关于后台管理的开发"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("会按照一下的思路进行学习"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\nstep1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 学习Django本身权限相关的知识\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" 说到Django权限"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("很容易想到Django已经自带权限校验功能了"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("为何我们通常在开发中不会使用它呢? 因为不是很适配"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" 武sir开源的组件"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("自行找到以往的视频进行学习"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("暂略 ★学习后可"),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"快速"')]),t._v("的开发前后端不分离的CRM项目!!"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n       权限组件“比django内置的权限组件更通用些”、Starck组件“可快速的进行CURD”"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Starck组件借鉴了Django admin的源码"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nstep2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" drf "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" vue来实现权限管理\n  尽管"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("通常情况下"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("面向用户端的开发会选择用前后端分离"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("后台管理的开发往往会使用前后端不分离"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n  但我们还是得学习权限管理如何集成到 drf "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" vue 中!!\nstep3"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 后端管理业务\n  eg"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("管理员的审核工作等\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br")])]),n("p",[n("font",{attrs:{color:"blue"}},[t._v("面试聊什么?")])],1),t._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[t._v("面试时的阐述"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("不能只是业务层面的CURD"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("更应该聊一些更深层次的东西"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n你跟面试官说"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("你做了个短信登陆、做了个签合同"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("在面试官看来"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("没太大的意义"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("吸引力"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n就已经完成的第一趴 供应商web端的开发而言"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("我们可以聊 drf源码的流程、你分析的过程以及对其进行的扩展"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("视图、返回值、异常等"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n那么在即将学习的第二趴 后台管理"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" 我们也要有可以聊的东西!!\n\n程序员阶段\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" 学习\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" 工作搬砖"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("进行CURD\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" 自定义组件"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("用三五行代码来实现通用的功能"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("来尽可能的减少CURD这一类浪费时间对自己没有成长的工作\n  开发的项目越多"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("遇到的项目场景越多"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("组件不断的开发迭代就会越来越通用"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("这一过程就在培养我们 抽象"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("扩展 的能力!!\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br")])]),n("hr"),t._v(" "),n("h2",{attrs:{id:"信号"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#信号"}},[t._v("#")]),t._v(" 信号")]),t._v(" "),n("blockquote",[n("p",[t._v("本小节讲阐述 如何自定义信息, 以及 Django 内部已经给我们内置了哪些信息!!")])]),t._v(" "),n("p",[t._v("插入一条数据,如何进行日志记录? -- 考察的就是你是否懂信号")]),t._v(" "),n("h3",{attrs:{id:"自定义信号"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#自定义信号"}},[t._v("#")]),t._v(" 自定义信号")]),t._v(" "),n("blockquote",[n("p",[t._v("后续的开发过程中, 使用自定义信号是比较少的! 但依旧需要进行了解.")])]),t._v(" "),n("p",[t._v("学会自定义信号的意义何在? 自定义信号的应用场景不是没有,只是比较少."),n("br"),t._v(" "),n("strong",[t._v("比如:")]),n("br"),t._v("\n消息通知的功能,函数1发短息、函数2发微信 、函数3发邮件"),n("br"),t._v("\n当有了信号后, 往后需要发送报警之类的信息时,无需自己去调用函数1、函数2、函数3,只需触发下信号,自动去调用"),n("br"),t._v("\n若不想发送邮件,直接注释掉 对函数2的注册回调 即可, 业务代码不会有任何的影响. 这样的设计,就是 "),n("font",{attrs:{color:"brown"}},[t._v('"解藕"')]),t._v(" !!")],1),t._v(" "),n("p",[n("img",{attrs:{src:a(1061),alt:"image-20240220185110975"}})]),t._v(" "),n("h3",{attrs:{id:"内置信号"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#内置信号"}},[t._v("#")]),t._v(" 内置信号")]),t._v(" "),n("blockquote",[n("p",[t._v("Django的开发者在Django源码里内置了很多的信号!")])]),t._v(" "),n("p",[t._v("Django的开发者只是自定义很多信号, 并规定了哪些地方触发这些信号, "),n("strong",[t._v("但并没有给这些信号注册回调函数.")]),n("br"),t._v("\n注册回调的工作是留给我们做的!! 就像是给我们预留了 "),n("font",{attrs:{color:"brown"}},[t._v("钩子")]),t._v(" !!")],1),t._v(" "),n("h5",{attrs:{id:"django内置的信号"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#django内置的信号"}},[t._v("#")]),t._v(" Django内置的信号")]),t._v(" "),n("blockquote",[n("p",[t._v("来看看Django内置了哪些信号!!")])]),t._v(" "),n("p",[n("font",{attrs:{color:"brown"}},[t._v("Model signals")]),t._v(" 执行数据库相关操作的信号")],1),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("信号")]),t._v(" "),n("th",[t._v("何时触发")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("pre_init")]),t._v(" "),n("td",[t._v("django的model执行其构造方法前, 自动触发")])]),t._v(" "),n("tr",[n("td",[t._v("post_init")]),t._v(" "),n("td",[t._v("django的model执行其构造方法后, 自动触发")])]),t._v(" "),n("tr",[n("td",[t._v("pre_save")]),t._v(" "),n("td",[t._v("django的model对象保存前, 自动触发")])]),t._v(" "),n("tr",[n("td",[t._v("post_save")]),t._v(" "),n("td",[t._v("django的model对象保存后, 自动触发")])]),t._v(" "),n("tr",[n("td",[t._v("pre_delete")]),t._v(" "),n("td",[t._v("django的model对象删除前, 自动触发")])]),t._v(" "),n("tr",[n("td",[t._v("post_delete")]),t._v(" "),n("td",[t._v("django的model对象删除后, 自动触发")])]),t._v(" "),n("tr",[n("td",[t._v("m2m_changed")]),t._v(" "),n("td",[t._v("django的model中使用m2m字段操作第三张表.   "),n("br"),t._v("(add,remove,clear) 前后, 自动触发")])]),t._v(" "),n("tr",[n("td",[t._v("class_prepared")]),t._v(" "),n("td",[t._v("程序启动时, 检测已注册的app中model类, 对于每一个类, 自动触发")])])])]),t._v(" "),n("p",[n("font",{attrs:{color:"brown"}},[t._v("Management signals")]),t._v(" 执行数据进行迁移时相关操作的信号")],1),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("信号")]),t._v(" "),n("th",[t._v("何时触发")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("pre_migrate")]),t._v(" "),n("td",[t._v("执行migrate命令前, 自动触发")])]),t._v(" "),n("tr",[n("td",[t._v("post_migrate")]),t._v(" "),n("td",[t._v("执行migrate命令后, 自动触发")])])])]),t._v(" "),n("p",[n("font",{attrs:{color:"brown"}},[t._v("Request/response signals")]),t._v(" 请求响应时相关操作的信号."),n("br"),t._v(" "),n("font",{attrs:{color:"gray"}},[t._v("PS: 在中间件里也可以操作, 与使用信号的方案解决不冲突, 只是方式方法不一样罢了!")])],1),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("信号")]),t._v(" "),n("th",[t._v("何时触发")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("request_started")]),t._v(" "),n("td",[t._v("请求到来前, 自动触发")])]),t._v(" "),n("tr",[n("td",[t._v("request_finished")]),t._v(" "),n("td",[t._v("请求结束后, 自动触发")])]),t._v(" "),n("tr",[n("td",[t._v("got_request_exception")]),t._v(" "),n("td",[t._v("请求异常后, 自动触发")])])])]),t._v(" "),n("p",[n("font",{attrs:{color:"brown"}},[t._v("Test signals")]),t._v(" 测试用例时相关操作的信号")],1),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("信号")]),t._v(" "),n("th",[t._v("何时触发")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("setting_changed")]),t._v(" "),n("td",[t._v("使用test测试修改配置文件时, 自动触发")])]),t._v(" "),n("tr",[n("td",[t._v("template_rendered")]),t._v(" "),n("td",[t._v("使用test测试渲染模板时, 自动触发")])])])]),t._v(" "),n("p",[n("font",{attrs:{color:"brown"}},[t._v("Database Wrappers")]),t._v(" 数据库连接时相关操作的信号")],1),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("信号")]),t._v(" "),n("th",[t._v("何时触发")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("connection_created")]),t._v(" "),n("td",[t._v("创建数据库连接时, 自动触发")])])])]),t._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" django"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("core"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("signals "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" request_finished\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" django"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("core"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("signals "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" request_started\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" django"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("core"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("signals "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" got_request_exception\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" django"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("db"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("signals "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" class_prepared\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" django"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("db"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("signals "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" pre_init"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" post_init\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" django"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("db"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("signals "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" pre_save"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" post_save\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" django"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("db"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("signals "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" pre_delete"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" post_delete\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" django"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("db"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("signals "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" m2m_changed\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" django"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("db"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("signals "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" pre_migrate"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" post_migrate\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" django"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("test"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("signals "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" setting_changed\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" django"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("test"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("signals "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" template_rendered\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" django"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("db"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("backends"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("signals "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" connection_created\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br")])]),n("h5",{attrs:{id:"案例"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#案例"}},[t._v("#")]),t._v(" 案例")]),t._v(" "),n("blockquote",[n("p",[t._v("举个例子: 在Django ORM创建数据时, 触发post_save信号!")])]),t._v(" "),n("p",[n("img",{attrs:{src:a(1062),alt:"image-20240220195607310"}})]),t._v(" "),n("hr"),t._v(" "),n("h2",{attrs:{id:"contenttypes"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#contenttypes"}},[t._v("#")]),t._v(" contenttypes")]),t._v(" "),n("blockquote",[n("p",[t._v("它是Django配置文件里已经注册好的app组件!! "),n("code",[t._v("'django.contrib.contenttypes',")]),n("br"),t._v("\n别头铁,别上头, 不是说学习了contenttypes就说一定得用它, 它是存在效率问题的, 毕竟它要绕一下, 数据量大的话不建议!")])]),t._v(" "),n("p",[n("font",{attrs:{color:"gray"}},[t._v("可参考这两篇博客辅助理解:  "),n("br"),t._v(" "),n("code",[t._v("https://www.liujiangblog.com/course/django/281")]),t._v(",  "),n("br"),t._v(" "),n("code",[t._v("https://www.liwenzhou.com/posts/Django/about_django_contenttypes/")])])],1),t._v(" "),n("p",[t._v("看到没, 在进行数据库迁移后, contenttypes表中保存了 Django中注册的所有app以及每个app下有哪些表!!")]),t._v(" "),n("p",[n("img",{attrs:{src:a(1063),alt:"image-20240221120155022"}})]),t._v(" "),n("h3",{attrs:{id:"表结构分析"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#表结构分析"}},[t._v("#")]),t._v(" 表结构分析")]),t._v(" "),n("blockquote",[n("p",[t._v("现有一个需求, 课程分为学位课和普通课程, 每个课程根据服务周期不同收费标准也是不同的, 请设计出合适的表结构!")])]),t._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" 两表之间 "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("行对"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("行   \n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" A表的一行数据对应B表的一行数据\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("n 两表之间 "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("行对多行  \n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" A表的一行数据对应B表的多行数据\nn"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("n 两表之间 多行对多行"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("相互的"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("行对多行  \n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" A表的一行数据对应B表的多行数据"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("B表的一行数据对应A表的多行数据 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("比如书和作者"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" 是会生成第三表的!!\n\n\nContentTypes\n  django_content_type表中的第"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("行的数据"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("对应C表的多行数据\n  django_content_type表中的第"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("行的数据"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("对应D表的多行数据\n  也就是一行表中存在 A"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("C"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("n  A"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("D"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("n  A"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("E"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("n 等多个"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("对多个关系!!\n              \n\n■ 方案一"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n  就是 一对多的关系"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" 多增添几张表!!\n  弊端 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" 假设再来个 "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"其他课程表"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" 就需要再增加一个对应的价格策略表"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" \n■ 方案二"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  就是 将多张表的一对多的关系 写在一张表里\n  弊端 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" 三个外键字段"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("它们必须允许为空"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" \n        并且在实际ORM操作中"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("必须注意"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("不能同时对这三个外键字段赋值"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("最多只能赋值一个!该表的数据很多的话"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("null值空数据也会很多!!\n        ★ 这些外键字段通常只有一个有值"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("其他都是空的\n■ 方案三"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  就是 使用ContentTypes!!\n\nψ"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("｀∇´"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("ψ 你思考下"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("方案二"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("我后续再添加其他类型的课程表"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("价格策略表里就需要同步添加外键字段"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n而我使用方案三"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("添加了其他类型的课程表后"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("价格策略表我是不用改的!!\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br"),n("span",{staticClass:"line-number"},[t._v("26")]),n("br"),n("span",{staticClass:"line-number"},[t._v("27")]),n("br"),n("span",{staticClass:"line-number"},[t._v("28")]),n("br")])]),n("h5",{attrs:{id:"方案一"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#方案一"}},[t._v("#")]),t._v(" 方案一")]),t._v(" "),n("blockquote",[n("p",[t._v("方案一, 就是 一对多的关系, 多增添几张表!!")])]),t._v(" "),n("p",[n("img",{attrs:{src:a(1064),alt:"image-20240221190746193"}})]),t._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DegreeCourse")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Model"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v('"""学位课表"""')]),t._v("\n    name "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CharField"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("max_length"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("128")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" unique"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Course")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Model"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v('"""普通课程表"""')]),t._v("\n    name "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CharField"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("max_length"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("128")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" unique"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    \n    \n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DegreeCoursePricePolicy")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Model"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v('"""学位课的价格策略表"""')]),t._v("\n    expiration_date "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CharField"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("verbose_name"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"有效期"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" max_length"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("32")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    price "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("IntegerField"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("verbose_name"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"价格"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    degreecourse "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ForeignKey"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("DegreeCourse"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" on_delete"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CASCADE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    \n    \n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DegreeCoursePricePolicy")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Model"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v('"""普通课的价格策略表"""')]),t._v("\n    expiration_date "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CharField"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("verbose_name"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"有效期"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" max_length"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("32")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    price "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("IntegerField"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("verbose_name"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"价格"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    course "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ForeignKey"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Course"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" on_delete"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CASCADE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br")])]),n("h5",{attrs:{id:"方案二"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#方案二"}},[t._v("#")]),t._v(" 方案二")]),t._v(" "),n("blockquote",[n("p",[t._v("方案二, 将多张表的一对多的关系写在一张表里")])]),t._v(" "),n("p",[n("img",{attrs:{src:a(1065),alt:"image-20240221191042021"}})]),t._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DegreeCourse")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Model"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v('"""学位课表"""')]),t._v("\n    name "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CharField"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("max_length"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("128")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" unique"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Course")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Model"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v('"""普通课程表"""')]),t._v("\n    name "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CharField"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("max_length"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("128")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" unique"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    \n    \n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Other")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Model"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v('"""其他课程表"""')]),t._v("\n    name "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CharField"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("max_length"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("128")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" unique"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    \n    \n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DegreeCoursePricePolicy")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Model"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v('"""价格策略表"""')]),t._v("\n    expiration_date "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CharField"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("verbose_name"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"有效期"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" max_length"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("32")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    price "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("IntegerField"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("verbose_name"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"价格"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    degreecourse "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ForeignKey"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("DegreeCourse"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" blank"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("null"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" on_delete"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CASCADE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    course "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ForeignKey"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Course"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" blank"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("null"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" on_delete"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CASCADE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    other "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ForeignKey"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Other"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" blank"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("null"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" on_delete"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CASCADE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br")])]),n("h5",{attrs:{id:"方案三"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#方案三"}},[t._v("#")]),t._v(" 方案三")]),t._v(" "),n("blockquote",[n("p",[t._v("方案三: 使用ContentTypes!!  核心: 哪张表的哪一行数据!/多张表的一对多关系写在了同一张表里!!")])]),t._v(" "),n("p",[n("img",{attrs:{src:a(1066),alt:"image-20240221193149125"}})]),t._v(" "),n("p",[t._v("若我们不用django_content_type表, 那么在周期价格策略表的content_type_id这一列就会有很多重复的表名!!是不妥的!!")]),t._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" django"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("contrib"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("contenttypes"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fields "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" GenericForeignKey"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" GenericRelation\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" django"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("contrib"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("contenttypes"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("models "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" ContentType\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" django"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("db "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" models\n\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DegreeCourse")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Model"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v('"""学位课表"""')]),t._v("\n    name "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CharField"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("max_length"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("128")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" unique"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 用于GenericForeignKey反向查询,不会生成表字段")]),t._v("\n    degree_price_policy "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" GenericRelation"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"PricePolicy"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ★")]),t._v("\n\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Course")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Model"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v('"""普通课程表"""')]),t._v("\n    name "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CharField"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("max_length"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("128")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" unique"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 用于GenericForeignKey反向查询,不会生成表字段")]),t._v("\n    general_price_policy "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" GenericRelation"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"PricePolicy"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ★")]),t._v("\n\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("PricePolicy")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Model"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v('"""每个课程不同有效期对应不同价格 表"""')]),t._v("\n    expiration_date "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CharField"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("verbose_name"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"有效期"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" max_length"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("32")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    price "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("IntegerField"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("verbose_name"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"价格"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    content_type "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ForeignKey"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ContentType"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" on_delete"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CASCADE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ★")]),t._v("\n    object_id "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("PositiveIntegerField"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("verbose_name"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"content_type关联的那张表的某一行记录"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ★")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 不会生成表字段content_object. ")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 写它是为了方便新增数据(直接设值为object_id所对应的记录/对象,会自动生成content_type和object_id)")]),t._v("\n    content_object "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" GenericForeignKey"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'content_type'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'object_id'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ★")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br"),n("span",{staticClass:"line-number"},[t._v("26")]),n("br"),n("span",{staticClass:"line-number"},[t._v("27")]),n("br"),n("span",{staticClass:"line-number"},[t._v("28")]),n("br"),n("span",{staticClass:"line-number"},[t._v("29")]),n("br")])]),n("h3",{attrs:{id:"如何新增查询"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#如何新增查询"}},[t._v("#")]),t._v(" 如何新增查询")]),t._v(" "),n("blockquote",[n("p",[t._v("实践是检验真理的唯一标准, 我们采用方案三进行实验!!")])]),t._v(" "),n("h5",{attrs:{id:"新增"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#新增"}},[t._v("#")]),t._v(" 新增")]),t._v(" "),n("blockquote",[n("p",[t._v("迁移数据库后, 可使用脚本添加实验数据!!")])]),t._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" os\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" __name__ "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"__main__"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    os"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("environ"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("setdefault"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'DJANGO_SETTINGS_MODULE'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'djangoProject.settings'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" django\n\n    django"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("setup"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" app01 "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" models\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# -- 单表新增数据")]),t._v("\n    models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("DegreeCourse"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("objects"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("create"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Python全栈"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("DegreeCourse"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("objects"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("create"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"爬虫"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("DegreeCourse"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("objects"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("create"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Linux"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Course"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("objects"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("create"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"App逆向"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Course"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("objects"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("create"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Django项目"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Course"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("objects"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("create"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"小程序"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# -- 给价格策略表添加数据 (手动自己去找content_type_id、object_id对应的值)")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" django"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("contrib"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("contenttypes"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("models "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" ContentType\n    object_id "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("DegreeCourse"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("objects"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Python全栈"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pk\n    content_type_id "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ContentType"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("objects"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("app_label"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"app01"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" model"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"degreecourse"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pk\n    models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("PricePolicy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("objects"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("create"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        content_type_id"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("content_type_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 7")]),t._v("\n        object_id"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("object_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("              "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 1")]),t._v("\n        expiration_date"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"3个月"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        price"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# -- 给价格策略表添加数据 (自动生成content_type_id、object_id对应的值)")]),t._v("\n    models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("PricePolicy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("objects"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("create"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        content_object"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("DegreeCourse"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("objects"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Python全栈"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        expiration_date"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"6个月"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        price"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("150")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    obj "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("DegreeCourse"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("objects"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"爬虫"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("PricePolicy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("objects"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("create"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        content_object"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("obj"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        expiration_date"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"3个月"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        price"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("PricePolicy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("objects"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("create"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        content_object"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("DegreeCourse"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("objects"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"爬虫"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        expiration_date"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"6个月"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        price"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("120")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("PricePolicy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("objects"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("create"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        content_object"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Course"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("objects"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"App逆向"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        expiration_date"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"3个月"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        price"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("PricePolicy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("objects"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("create"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        content_object"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Course"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("objects"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"App逆向"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        expiration_date"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"6个月"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        price"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("15")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("PricePolicy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("objects"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("create"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        content_object"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Course"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("objects"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Django项目"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        expiration_date"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"3个月"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        price"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("PricePolicy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("objects"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("create"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        content_object"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Course"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("objects"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Django项目"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        expiration_date"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"6个月"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        price"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br"),n("span",{staticClass:"line-number"},[t._v("26")]),n("br"),n("span",{staticClass:"line-number"},[t._v("27")]),n("br"),n("span",{staticClass:"line-number"},[t._v("28")]),n("br"),n("span",{staticClass:"line-number"},[t._v("29")]),n("br"),n("span",{staticClass:"line-number"},[t._v("30")]),n("br"),n("span",{staticClass:"line-number"},[t._v("31")]),n("br"),n("span",{staticClass:"line-number"},[t._v("32")]),n("br"),n("span",{staticClass:"line-number"},[t._v("33")]),n("br"),n("span",{staticClass:"line-number"},[t._v("34")]),n("br"),n("span",{staticClass:"line-number"},[t._v("35")]),n("br"),n("span",{staticClass:"line-number"},[t._v("36")]),n("br"),n("span",{staticClass:"line-number"},[t._v("37")]),n("br"),n("span",{staticClass:"line-number"},[t._v("38")]),n("br"),n("span",{staticClass:"line-number"},[t._v("39")]),n("br"),n("span",{staticClass:"line-number"},[t._v("40")]),n("br"),n("span",{staticClass:"line-number"},[t._v("41")]),n("br"),n("span",{staticClass:"line-number"},[t._v("42")]),n("br"),n("span",{staticClass:"line-number"},[t._v("43")]),n("br"),n("span",{staticClass:"line-number"},[t._v("44")]),n("br"),n("span",{staticClass:"line-number"},[t._v("45")]),n("br"),n("span",{staticClass:"line-number"},[t._v("46")]),n("br"),n("span",{staticClass:"line-number"},[t._v("47")]),n("br"),n("span",{staticClass:"line-number"},[t._v("48")]),n("br"),n("span",{staticClass:"line-number"},[t._v("49")]),n("br"),n("span",{staticClass:"line-number"},[t._v("50")]),n("br"),n("span",{staticClass:"line-number"},[t._v("51")]),n("br"),n("span",{staticClass:"line-number"},[t._v("52")]),n("br"),n("span",{staticClass:"line-number"},[t._v("53")]),n("br"),n("span",{staticClass:"line-number"},[t._v("54")]),n("br"),n("span",{staticClass:"line-number"},[t._v("55")]),n("br"),n("span",{staticClass:"line-number"},[t._v("56")]),n("br"),n("span",{staticClass:"line-number"},[t._v("57")]),n("br"),n("span",{staticClass:"line-number"},[t._v("58")]),n("br"),n("span",{staticClass:"line-number"},[t._v("59")]),n("br"),n("span",{staticClass:"line-number"},[t._v("60")]),n("br"),n("span",{staticClass:"line-number"},[t._v("61")]),n("br"),n("span",{staticClass:"line-number"},[t._v("62")]),n("br"),n("span",{staticClass:"line-number"},[t._v("63")]),n("br"),n("span",{staticClass:"line-number"},[t._v("64")]),n("br"),n("span",{staticClass:"line-number"},[t._v("65")]),n("br"),n("span",{staticClass:"line-number"},[t._v("66")]),n("br"),n("span",{staticClass:"line-number"},[t._v("67")]),n("br"),n("span",{staticClass:"line-number"},[t._v("68")]),n("br"),n("span",{staticClass:"line-number"},[t._v("69")]),n("br"),n("span",{staticClass:"line-number"},[t._v("70")]),n("br"),n("span",{staticClass:"line-number"},[t._v("71")]),n("br"),n("span",{staticClass:"line-number"},[t._v("72")]),n("br"),n("span",{staticClass:"line-number"},[t._v("73")]),n("br")])]),n("p",[n("img",{attrs:{src:a(1067),alt:"image-20240221223626863"}})]),t._v(" "),n("h5",{attrs:{id:"查询"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#查询"}},[t._v("#")]),t._v(" 查询")]),t._v(" "),n("blockquote",[n("p",[t._v("正向 GenericForeignKey ; 反向 GenericRelation")])]),t._v(" "),n("p",[n("font",{attrs:{color:"brown"}},[t._v("问题1: 查询所有的价格策略 (正向 GenericForeignKey)")])],1),t._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" os\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" __name__ "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"__main__"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    os"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("environ"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("setdefault"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'DJANGO_SETTINGS_MODULE'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'djangoProject.settings'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" django\n\n    django"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("setup"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" app01 "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" models\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查询所有的价格策略 (正向 GenericForeignKey)")]),t._v("\n    queryset "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("PricePolicy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("objects"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("all")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" obj "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" queryset"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n            obj"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("id")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            obj"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("expiration_date"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            obj"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("price"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"||"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            obj"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("content_object"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            obj"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("content_type"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get_object_for_this_type"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pk"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("obj"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("object_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"||"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            obj"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("content_object"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            obj"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("content_type"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get_object_for_this_type"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pk"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("obj"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("object_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"||"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            obj"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("content_type"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("model_class"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            obj"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("content_type"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("model_class"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("objects"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pk"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("obj"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("object_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br"),n("span",{staticClass:"line-number"},[t._v("26")]),n("br"),n("span",{staticClass:"line-number"},[t._v("27")]),n("br")])]),n("p",[n("img",{attrs:{src:a(1068),alt:"image-20240221224152793"}})]),t._v(" "),n("p",[n("font",{attrs:{color:"brown"}},[t._v("问题2: 想获取某个课程的所有价格策略 (反向 GenericRelation)")])],1),t._v(" "),n("p",[t._v("如果我们不用GenericRelation, 解决这个问题就很复杂.")]),t._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" os\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" __name__ "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"__main__"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    os"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("environ"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("setdefault"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'DJANGO_SETTINGS_MODULE'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'djangoProject.settings'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" django\n\n    django"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("setup"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" app01 "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" models\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" django"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("contrib"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("contenttypes"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("models "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" ContentType\n    \n    obj_id "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("DegreeCourse"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("objects"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("filter")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Python全栈"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("first"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pk\n    content_type_id "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ContentType"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("objects"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("app_label"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"app01"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" model"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"degreecourse"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pk\n    queryset "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("PricePolicy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("objects"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("filter")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("object_id"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("obj_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" content_type"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("content_type_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("queryset"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" obj "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" queryset"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("id")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" obj"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("expiration_date"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" obj"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("price"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        \n"),n("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v('"""\n<QuerySet [<PricePolicy: PricePolicy object (1)>, <PricePolicy: PricePolicy object (2)>]>\n1 3个月 100\n2 6个月 150\n"""')]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br")])]),n("p",[t._v("当我们用了GenericRelation, 就很方便快速的查询了!")]),t._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" os\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" __name__ "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"__main__"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    os"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("environ"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("setdefault"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'DJANGO_SETTINGS_MODULE'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'djangoProject.settings'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" django\n\n    django"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("setup"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    \n    obj "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("DegreeCourse"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("objects"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("filter")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Python全栈"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("first"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    queryset "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" obj"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("degree_price_policy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("all")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("queryset"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" obj "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" queryset"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("id")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" obj"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("expiration_date"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" obj"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("price"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        \n"),n("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v('"""\n<QuerySet [<PricePolicy: PricePolicy object (1)>, <PricePolicy: PricePolicy object (2)>]>\n1 3个月 100\n2 6个月 150\n"""')]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br")])]),n("h3",{attrs:{id:"举一反三"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#举一反三"}},[t._v("#")]),t._v(" 举一反三")]),t._v(" "),n("blockquote",[n("p",[t._v("应用场景的举一反三")])]),t._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[t._v("应用场景举一反三"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  现在有一个论坛项目"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("用户可以在论坛里发布帖子或图片"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("用户当然还可以对帖子发表评论或者对图片发表评论!\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" User用户表      "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("id")]),t._v(" name\n     Post帖子表      "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("id")]),t._v(" title    外键user_id“表明哪个用户发布的帖子 不为空”\n     Picture图片表   "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("id")]),t._v(" picture  外键user_id“表明哪个用户发布的图片 不为空”\n     Comment评论表\n     "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" 不妥的设计\n       "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Comment")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Model"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n           content "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("TextField"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n           author "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ForeignKey"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("User"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n           post "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ForeignKey"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Post"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" null"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" blank"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" on_delete"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CASCADE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n           picture "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ForeignKey"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Picture"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" null"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" blank"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" on_delete"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CASCADE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n     "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" 应该采用的设计\n       "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Comment")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Model"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n           content "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("TextField"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n           user "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ForeignKey"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("User"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n           content_type "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ForeignKey"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ContentType"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# - 外键关联django_content_type表")]),t._v("\n           object_id "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("PositiveIntegerField"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("      "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# - 关联数据的主键")]),t._v("\n           content_object "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" GenericForeignKey"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'content_type'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'object_id'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br")])]),n("hr"),t._v(" "),n("h2",{attrs:{id:"admin"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#admin"}},[t._v("#")]),t._v(" admin")]),t._v(" "),n("blockquote"),t._v(" "),n("h3",{attrs:{id:"快速使用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#快速使用"}},[t._v("#")]),t._v(" 快速使用")]),t._v(" "),n("blockquote")])}),[],!1,null,null,null);s.default=e.exports}}]);